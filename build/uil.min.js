'use strict';var UMC=UMC||function(){var a=document,b=a.getElementsByTagName("head")[0],c="height width top left bottom right margin-left margin-right margin-top margin-bottom".split(" "),d="pattern defs transform stop animate radialGradient linearGradient animateMotion".split(" "),e="rect circle path polygon text g line foreignObject".split(" "),f=new Image,h=a.createDocumentFragment();UMC=function(){};UMC.frag=function(){return h};UMC.setSvg=function(a,b,c,d){-1===d?a.setAttributeNS(null,b,c):a.childNodes[d||
0].setAttributeNS(null,b,c)};UMC.setDom=function(a,b,d){var e=-1!==c.indexOf(b)?"px":"";a.style[b]=d+e};UMC.clear=function(a){for(UMC.purge(a);a.firstChild;)a.firstChild.firstChild&&UMC.clear(a.firstChild),a.removeChild(a.firstChild)};UMC.purge=function(a){var b=a.attributes,c,d;if(b)for(c=b.length;c--;)d=b[c].name,"function"===typeof a[d]&&(a[d]=null);if(b=a.childNodes)for(c=b.length;c--;)UMC.purge(a.childNodes[c])};UMC.dom=function(b,c,k,h,f,m){c=c||"div";-1!==d.indexOf(c)||-1!==e.indexOf(c)?(void 0===
f&&(f=a.createElementNS("http://www.w3.org/2000/svg","svg")),UMC.add(f,c,h,m)):f=void 0===f?a.createElementNS("http://www.w3.org/1999/xhtml",c):f.appendChild(a.createElementNS("http://www.w3.org/1999/xhtml",c));b&&("UIL"===b?k="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; overflow:hidden; background:none;"+k:"UIL text"===b?k='-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; overflow:hidden; background:none;font-family:"Lucida Console", Monaco, monospace; font-size:11px; color:#CCC; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;'+
k:"UIL textSelect"===b?k='-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; overflow:hidden; background:none;-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; overflow:hidden; background:none;font-family:"Lucida Console", Monaco, monospace; font-size:11px; color:#CCC; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;pointer-events:auto; padding:2px 5px; outline:none; -webkit-appearance:none; -moz-appearance:none; border:1px dashed #4f4f4f; -ms-user-select:element;'+
k:"UIL number"===b?k='-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; overflow:hidden; background:none;-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; overflow:hidden; background:none;font-family:"Lucida Console", Monaco, monospace; font-size:11px; color:#CCC; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;letter-spacing:-1px; padding:2px 5px;'+
k:f.setAttribute("class",b));k&&(f.style.cssText=k);return void 0===m?f:f.childNodes[m||0]};UMC.cc=function(c,d,e){e=void 0===e?".":"";"*"===c&&(e="");var f=a.createElement("style");f.type="text/css";b.appendChild(f);(f.sheet||{}).insertRule?f.sheet.insertRule(e+c+"{"+d+"}",0):(f.styleSheet||f.sheet).addRule(e+c,d)};UMC.clone=function(a,b){void 0===b&&(b=!0);return a.cloneNode(b)};UMC.add=function(a,b,c,d){var f=document.createElementNS("http://www.w3.org/2000/svg",b);this.set(f,c);this.get(a,d).appendChild(f);
-1!==e.indexOf(b)&&(f.style.pointerEvents="none");return f};UMC.set=function(a,b){for(var c in b)"txt"===c&&(a.textContent=b[c]),a.setAttributeNS(null,c,b[c])};UMC.get=function(a,b){if(void 0===b)return a;if(!isNaN(b))return a.childNodes[b];if(b instanceof Array){if(2===b.length)return a.childNodes[b[0]].childNodes[b[1]];if(3===b.length)return a.childNodes[b[0]].childNodes[b[1]].childNodes[b[2]]}};UMC.toCanvas=function(a,b,c,d){var e=a.getContext("2d");a=null;"string"===typeof b?(a=UMC.dom(null,"iframe",
"position:abolute; left:0; top:0; width:"+c+"px; height:"+d+"px;"),a.src=b):(a=b.cloneNode(!0),a.style.left=0);b=UMC.dom(null,"foreignObject","position:abolute; left:0; top:0;",{width:c,height:d});b.childNodes[0].appendChild(a);b.setAttribute("version","1.1");b.setAttribute("xmlns","http://www.w3.org/2000/svg");b.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");b.setAttribute("width",c);b.setAttribute("height",d);b.childNodes[0].setAttribute("width","100%");b.childNodes[0].setAttribute("height",
"100%");b="data:image/svg+xml;base64,"+window.btoa((new XMLSerializer).serializeToString(b));a=null;f.src=b;setTimeout(function(){e.clearRect(0,0,c,d);e.drawImage(f,0,0,c,d,0,0,c,d)},0)};return UMC}();var define,module,exports,performance,UIL=function(){UIL={REVISION:1,frag:UMC.frag,DOM:UMC.dom,clear:UMC.clear,setSvg:UMC.setSvg,isLoop:!1,listens:[],main:null,DEF:!1,WIDTH:240,HEIGHT:20,P:30,BASIC:"-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none; position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none;  background:none;",COLOR:"N",BASECOLOR:"#C0C0C0",BUTTON:"#404040",BOOLBG:"#181818",SELECT:"#308AFF",
MOVING:"#03afff",SELECTDOWN:"#024699",BG:"rgba(0,0,0,0.3)",SVGB:"rgba(0,0,0,0.3)",SVGC:"rgba(120,120,120,0.6)",Border:"#4f4f4f",BorderSelect:"#308AFF",setText:function(a,b,c){UIL.TXT=UIL.BASIC+"font-family:"+(c||'"Consolas", "Lucida Console", Monaco, monospace')+"; font-size:"+(a||11)+"px; color:"+(b||"#CCC")+"; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;";UIL.TXTSELECT=UIL.TXT+"pointer-events:auto; padding:2px 5px; outline:none; -webkit-appearance:none; -moz-appearance:none; border:1px dashed "+
UIL.Border+"; -ms-user-select:element;";UIL.NUM=UIL.TXT+"letter-spacing:-1px; padding:2px 5px;";UIL.ITEM=UIL.TXT+"position:relative; background:rgba(0,0,0,0.2); margin-bottom:1px; pointer-events:auto; cursor:pointer;"},GPATH:"M 7 7 L 7 8 8 8 8 7 7 7 M 5 7 L 5 8 6 8 6 7 5 7 M 3 7 L 3 8 4 8 4 7 3 7 M 7 5 L 7 6 8 6 8 5 7 5 M 6 6 L 6 5 5 5 5 6 6 6 M 7 3 L 7 4 8 4 8 3 7 3 M 6 4 L 6 3 5 3 5 4 6 4 M 3 5 L 3 6 4 6 4 5 3 5 M 3 3 L 3 4 4 4 4 3 3 3 Z"};UIL.setText();return UIL}();
(function(a){"function"===typeof define&&define.amd?define("uil",UIL):"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=UIL:a.UIL=UIL})(this);UIL.loop=function(){UIL.isLoop&&requestAnimationFrame(UIL.loop);UIL.update()};UIL.update=function(){for(var a=UIL.listens.length;a--;)UIL.listens[a].listening()};UIL.removeListen=function(a){a=UIL.listens.indexOf(a);UIL.listens.splice(a,1);0===UIL.listens.length&&(UIL.isLoop=!1)};UIL.addListen=function(a){-1===UIL.listens.indexOf(a)&&(UIL.listens.push(a),UIL.isLoop||(UIL.isLoop=!0,UIL.loop()))};
UIL.add=function(){var a=arguments,b,c,d=!1;"string"===typeof a[0]?(b=a[0][0].toUpperCase()+a[0].slice(1),c=a[1]||{}):"object"===typeof a[0]&&(d=!0,void 0===a[2]&&[].push.call(a,{}),b=UIL.autoType.apply(this,a),c=a[2],c.name=a[1],c.value=a[0][a[1]]);b=new UIL[b](c);d&&b.setReferency(a[0],a[1]);return b};UIL.autoType=function(){var a=arguments,b="Slide";a[2].type&&(b=a[2].type);return b};
UIL.ColorLuma=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);b=b||0;var c="#",d,e;for(e=0;3>e;e++)d=parseInt(a.substr(2*e,2),16),d=Math.round(Math.min(Math.max(0,d+d*b),255)).toString(16),c+=("00"+d).substr(d.length);return c};UIL.findDeepInver=function(a){return 0.6>=0.3*a[0]+0.59*a[1]+0.11*a[2]};UIL.hexToHtml=function(a){return"#"+("000000"+(void 0===a?0:a).toString(16)).substr(-6)};UIL.htmlToHex=function(a){return a.toUpperCase().replace("#","0x")};
UIL.u255=function(a,b){return parseInt(a.substring(b,b+2),16)/255};UIL.u16=function(a,b){return parseInt(a.substring(b,b+1),16)/15};UIL.unpack=function(a){if(7==a.length)return[UIL.u255(a,1),UIL.u255(a,3),UIL.u255(a,5)];if(4==a.length)return[UIL.u16(a,1),UIL.u16(a,2),UIL.u16(a,3)]};UIL.htmlRgb=function(a){return"rgb("+Math.round(255*a[0])+","+Math.round(255*a[1])+","+Math.round(255*a[2])+")"};UIL.rgbToHex=function(a){return"#"+("000000"+(255*a[0]<<16^255*a[1]<<8^255*a[2]<<0).toString(16)).slice(-6)};
UIL.hueToRgb=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a};UIL.rgbToHsl=function(a){var b=a[0],c=a[1];a=a[2];var d=Math.min(b,c,a),e=Math.max(b,c,a),f=e-d,h=0,g=0,d=(d+e)/2;0<d&&1>d&&(g=f/(0.5>d?2*d:2-2*d));0<f&&(e==b&&e!=c&&(h+=(c-a)/f),e==c&&e!=a&&(h+=2+(a-b)/f),e==a&&e!=b&&(h+=4+(b-c)/f),h/=6);return[h,g,d]};
UIL.hslToRgb=function(a){var b,c=a[0];b=a[1];a=a[2];if(0===b)return[a,a,a];b=0.5>=a?a*(b+1):a+b-a*b;a=2*a-b;return[UIL.hueToRgb(a,b,c+0.33333),UIL.hueToRgb(a,b,c),UIL.hueToRgb(a,b,c-0.33333)]};UIL.Gui=function(a){a=a||{};void 0!==a.Tpercent&&(UIL.P=a.Tpercent);void 0===a.css&&(a.css="");this.height=20;this.width=void 0!==a.width?a.width:UIL.WIDTH;this.width=void 0!==a.size?a.size:this.width;this.left=0;this.top=a.top||0;this.h=0;this.prevY=-1;this.isWithClose=!0;this.bh=a.bh||20;void 0!==a.close&&(this.bh=(this.isWithClose=a.close)?this.bh:0);this.sw=a.sw||10;UIL.main=this;this.callback=void 0===a.callback?null:a.callback;this.color=a.color||UIL.COLOR;this.bg=a.bg||"rgba(44,44,44,0.3)";
this.isCenter=a.center||!1;this.onWheel=this.lockwheel=!1;this.isOpen=!0;this.uis=[];this.content=UIL.DOM(null,"div",UIL.BASIC+"display:block; width:"+this.width+"px; height:auto; top:0; right:10px; transition:height 0.1s ease-out;"+a.css);document.body.appendChild(this.content);this.innerContent=UIL.DOM(null,"div",UIL.BASIC+"width:100%; top:0; left:0; height:auto;overflow:hidden;");this.content.appendChild(this.innerContent);this.inner=UIL.DOM(null,"div",UIL.BASIC+"width:100%; top:0; left:0; height:auto;");
this.innerContent.appendChild(this.inner);this.inner.name="inner";this.scrollBG=UIL.DOM(null,"div",UIL.BASIC+"right:0; top:0; width:10px; height:10px; cursor:s-resize; pointer-events:auto; display:none;");this.content.appendChild(this.scrollBG);this.scrollBG.name="scroll";this.scroll=UIL.DOM(null,"div",UIL.BASIC+"background:#666; right:0; top:0; width:5px; height:10px;");this.scrollBG.appendChild(this.scroll);this.bottom=UIL.DOM(null,"div",UIL.TXT+"width:100%; top:auto; bottom:0; left:0; border-bottom-right-radius:10px;  border-bottom-left-radius:10px; text-align:center; pointer-events:auto; cursor:pointer; height:"+
this.bh+"px; line-height:"+(this.bh-5)+"px;");this.content.appendChild(this.bottom);this.bottom.textContent="close";this.bottom.name="bottom";this.bottom.style.background=this.bg;this.isScroll=this.isDown=!1;this.callbackClose=function(){};this.content.addEventListener("mousedown",this,!1);this.content.addEventListener("mousemove",this,!1);this.content.addEventListener("mouseout",this,!1);this.content.addEventListener("mouseup",this,!1);this.content.addEventListener("mouseover",this,!1);document.addEventListener("mousewheel",
function(a){this.wheel(a)}.bind(this),!1);window.addEventListener("resize",function(a){this.resize(a)}.bind(this),!1);this.setWidth(this.width)};
UIL.Gui.prototype={constructor:UIL.Gui,hide:function(a){this.content.style.display=a?"none":"block"},setBG:function(a){this.bg=a;for(var b=this.uis.length;b--;)this.uis[b].setBG(a);this.bottom.style.background=a},getHTML:function(){return this.content},onChange:function(a){this.callback=a;return this},handleEvent:function(a){switch(a.type){case "mousedown":this.down(a);break;case "mouseout":this.out(a);break;case "mouseover":this.over(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}},
down:function(a){a.target.name&&("scroll"===a.target.name&&(this.isDown=!0,this.move(a),document.addEventListener("mouseup",this,!1),document.addEventListener("mousemove",this,!1)),"bottom"===a.target.name&&(this.isOpen=this.isOpen?!1:!0,this.bottom.textContent=this.isOpen?"close":"open",this.testHeight()))},move:function(a){this.isDown&&(this.scroll.style.background="#AAA",this.update(a.clientY-this.top-0.5*this.sh))},out:function(a){a.target.name&&("scroll"===a.target.name&&(this.scroll.style.background=
"#666"),"bottom"===a.target.name&&(this.bottom.style.color="#CCC"))},up:function(a){this.isDown=!1;this.scroll.style.background="#666";document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1)},over:function(a){a.target.name&&("scroll"===a.target.name&&(this.scroll.style.background="#888"),"bottom"===a.target.name&&(this.bottom.style.color="#FFF"))},wheel:function(a){if(!this.lockwheel&&this.isScroll){var b=a.clientX,c=this.content.getBoundingClientRect().left;
b<c||b>c+this.width||(b=0,a.wheelDeltaY?b=0.04*-a.wheelDeltaY:a.wheelDelta?b=0.2*-a.wheelDelta:a.detail&&(b=4*a.detail),this.py+=b,this.update(this.py))}},add:function(){var a=arguments;"object"===typeof a[1]?(a[1].isUI=!0,a[1].main=this):"string"===typeof a[1]&&(void 0===a[2]?[].push.call(a,{isUI:!0,main:this}):(a[2].isUI=!0,a[2].main=this));a=UIL.add.apply(this,a);this.uis.push(a);a.py=this.h;if(a.autoWidth)this.prevY=-1,this.calc(a.h+1);else{var b=a.c[0].getBoundingClientRect().top;this.prevY!==
b&&(this.calc(a.h+1),this.prevY=b)}return a},remove:function(a){a=this.uis.indexOf(a);-1!==a&&this.uis[a].clear()},clearOne:function(a){a=this.uis.indexOf(a);-1!==a&&(this.inner.removeChild(this.uis[a].c[0]),this.uis.splice(a,1))},clear:function(){for(var a=this.uis.length;a--;)this.uis[a].clear();this.uis=[];UIL.listens=[];this.calc(-this.h)},update:function(a){a=0>a?0:a;a=a>this.range?this.range:a;this.inner.style.top=-~~(a/this.ratio)+"px";this.scroll.style.top=~~a+"px";this.py=a},showScroll:function(a){this.isScroll=
!0;this.total=this.h;this.maxView=this.maxHeight;this.ratio=this.maxView/this.total;this.sh=this.maxView*this.ratio;20>this.sh&&(this.sh=20);this.range=this.maxView-this.sh;this.scrollBG.style.display="block";this.scrollBG.style.height=this.maxView+"px";this.scroll.style.height=this.sh+"px";this.update(0)},hideScroll:function(){this.isScroll=!1;this.update(0);this.scrollBG.style.display="none"},resize:function(a){this.testHeight()},calc:function(a){this.h+=a;clearTimeout(this.tmp);this.tmp=setTimeout(this.testHeight.bind(this),
10)},testHeight:function(){this.tmp&&clearTimeout(this.tmp);this.height=this.top+this.bh;this.isOpen?(this.maxHeight=window.innerHeight-this.top-this.bh,this.h>this.maxHeight?(this.height=this.maxHeight+this.bh,this.showScroll()):(this.height=this.h+this.bh,this.hideScroll())):this.hideScroll();this.innerContent.style.height=this.height-this.bh+"px";this.content.style.height=this.height+"px";this.bottom.style.top=this.height-this.bh+"px"},setWidth:function(a){a&&(this.width=a);this.content.style.width=
this.width+"px";this.isCenter&&(this.content.style.marginLeft=-~~(0.5*this.width)+"px");for(var b=a=this.uis.length;b--;)this.uis[b].setSize(this.width);for(b=a;b--;)this.uis[b].rSize();this.resize()}};UIL.Proto=function(a){a=a||{};this.main=a.main||null;this.p=UIL.P;void 0!==a.p&&(this.p=a.p);this.autoWidth=!0;this.isGroup=!1;this.parentGroup=null;this.autoHeight=!1;this.isUI=a.isUI||!1;this.isEdit=this.mono=this.isNumber=!1;if(this.simple=a.simple||!1)this.sa=0;this.width=this.isUI?this.main.width:UIL.WIDTH;void 0!==a.width&&(this.width=a.width);void 0!==a.size&&(this.width=a.size);this.setSize(this.width);void 0!==a.sa&&(this.sa=a.sa);void 0!==a.sb&&(this.sb=a.sb);this.simple&&(this.sb=this.width-
this.sa);this.sc=void 0===a.sc?47:a.sc;this.val=this.parent=null;this.isSend=!1;var b=20;this.isUI&&(b=UIL.HEIGHT);this.h=a.h||a.height||b;this.h=11>this.h?11:this.h;this.bgcolor=UIL.COLOR||a.bgcolor;this.bg=this.isUI?this.main.bg:"rgba(44,44,44,0.3)";void 0!==a.bg&&(this.bg=a.bg);this.titleColor=a.titleColor||UIL.BASECOLOR;this.fontColor=a.fontColor||UIL.BASECOLOR;this.colorPlus=UIL.ColorLuma(this.fontColor,0.3);this.txt=a.name||"Proto";this.rename=a.rename||"";this.target=a.target||null;this.callback=
void 0===a.callback?null:a.callback;this.endCallback=null;null===this.callback&&this.isUI&&null!==this.main.callback&&(this.callback=this.main.callback);this.c=[];this.s=[];this.c[0]=UIL.DOM(null,"div",UIL.BASIC+"position:relative; height:20px; float:left; overflow:hidden;");this.s[0]=this.c[0].style;this.isUI&&(this.s[0].marginBottom="1px");this.simple||(this.c[1]=UIL.DOM(null,"div",UIL.TXT),this.s[1]=this.c[1].style,this.c[1].textContent=""===this.rename?this.txt:this.rename,this.s[1].color=this.titleColor);
if(a.pos){this.s[0].position="absolute";for(var c in a.pos)this.s[0][c]=a.pos[c];this.mono=!0}a.css&&(this.s[0].cssText=a.css)};
UIL.Proto.prototype={constructor:UIL.Proto,init:function(){var a=this.s;a[0].height=this.h+"px";this.isUI&&(this.s[0].background=this.bg);this.autoHeight&&(this.s[0].transition="height 0.1s ease-out");void 0!==this.c[1]&&this.autoWidth&&(a[1]=this.c[1].style,a[1].height=this.h-4+"px",a[1].lineHeight=this.h-8+"px");for(var b=UIL.frag(),c=1,d=this.c.length;c!==d;c++)void 0!==this.c[c]&&(b.appendChild(this.c[c]),a[c]=this.c[c].style);null!==this.target?this.target.appendChild(this.c[0]):this.isUI?this.main.inner.appendChild(this.c[0]):
document.body.appendChild(this.c[0]);this.c[0].appendChild(b);this.rSize();this.addEvent()},rename:function(a){this.c[1].textContent=a},setBG:function(a){this.bg=a;this.s[0].background=a},listen:function(){UIL.addListen(this);UIL.listens.push(this);return this},listening:function(){null!==this.parent&&(this.isSend||this.isEdit||this.setValue(this.parent[this.val]))},setValue:function(a){this.value=this.isNumber?this.numValue(a):a;this.update()},update:function(){},onChange:function(a){this.callback=
a;return this},onFinishChange:function(a){this.callback=null;this.endCallback=a;return this},send:function(a){this.isSend=!0;null!==this.parent&&(this.parent[this.val]=a||this.value);this.callback&&this.callback(a||this.value);this.isSend=!1},sendEnd:function(a){this.endCallback&&this.endCallback(a||this.value);null!==this.parent&&(this.parent[this.val]=a||this.value)},clear:function(){this.clearEvent();UIL.clear(this.c[0]);null!==this.target?this.target.removeChild(this.c[0]):this.isUI?this.main.clearOne(this):
document.body.removeChild(this.c[0]);this.target=this.callback=this.s=this.c=null},setSize:function(a){this.autoWidth&&(this.width=a,this.p=void 0===this.p?UIL.P:this.p,this.simple?this.sb=this.width-this.sa:(a=this.p/100*this.width,this.sa=~~a+10,this.sb=~~this.width-a-20))},rSize:function(){this.autoWidth&&(this.s[0].width=this.width+"px",this.simple||(this.s[1].width=this.sa+"px"))},setTypeNumber:function(a){this.isNumber=!0;this.value=0;void 0!==a.value&&(this.value="string"===typeof a.value?
1*a.value:a.value);this.min=void 0===a.min?-Infinity:a.min;this.max=void 0===a.max?Infinity:a.max;this.precision=void 0===a.precision?2:a.precision;var b;switch(this.precision){case 0:b=1;break;case 1:b=0.1;break;case 2:b=0.01;break;case 3:b=0.001;break;case 4:b=1E-4}this.step=void 0===a.step?b:a.step;this.range=this.max-this.min;this.value=this.numValue(this.value)},numValue:function(a){return 1*Math.min(this.max,Math.max(this.min,a)).toFixed(this.precision)},addEvent:function(){for(var a=this.c.length,
b,c;a--;)if(c=this.c[a],void 0!==c&&void 0!==c.events)for(b=c.events.length;b--;)c.addEventListener(c.events[b],this,!1)},clearEvent:function(){for(var a=this.c.length,b,c;a--;)if(c=this.c[a],void 0!==c&&void 0!==c.events)for(b=c.events.length;b--;)c.removeEventListener(c.events[b],this,!1)},handleEvent:function(a){},setReferency:function(a,b){this.parent=a;this.val=b},display:function(a){this.s[0].display=a?"block":"none"}};UIL.Group=function(a){UIL.Proto.call(this,a);this.isGroup=this.autoHeight=!0;this.baseH=this.h;var b=Math.floor(0.5*this.h)-6;this.isOpen=a.open||!1;this.c[2]=UIL.DOM(null,"div",UIL.BASIC+"width:100%; left:0; height:auto; overflow:hidden; top:"+this.h+"px");this.c[3]=UIL.DOM(null,"path",UIL.BASIC+"position:absolute; width:10px; height:10px; left:0; top:"+b+"px;",{d:UIL.GPATH,fill:this.fontColor,stroke:"none"});this.c[4]=UIL.DOM(null,"path",UIL.BASIC+"position:absolute; width:10px; height:10px; left:4px; top:"+
b+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"});this.c[5]=UIL.DOM(null,"div",UIL.BASIC+"background:rgba(255, 255, 255, 0.2); width:100%; left:0; height:1px; bottom:0px");b=this.s;b[0].height=this.h+"px";b[1].height=this.h+"px";b[1].pointerEvents="auto";b[1].cursor="pointer";this.c[1].name="group";this.s[1].marginLeft="10px";this.s[1].lineHeight=this.h-4;this.s[1].color=this.fontColor;this.s[1].fontWeight="bold";this.uis=[];this.c[1].events=["click"];this.init();void 0!==a.bg&&
this.setBG(a.bg);this.isOpen&&this.open()};UIL.Group.prototype=Object.create(UIL.Proto.prototype);UIL.Group.prototype.constructor=UIL.Group;UIL.Group.prototype.setBG=function(a){this.s[0].background=a;for(var b=this.uis.length;b--;)this.uis[b].setBG(a)};UIL.Group.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "click":this.click(a)}};UIL.Group.prototype.click=function(a){this.isOpen?this.close():this.open()};
UIL.Group.prototype.add=function(){var a=arguments;"object"===typeof a[1]?(a[1].isUI=this.isUI,a[1].target=this.c[2]):"string"===typeof arguments[1]&&(void 0===a[2]?[].push.call(a,{isUI:!0,target:this.c[2]}):(a[2].isUI=!0,a[2].target=this.c[2]));a=UIL.Gui.prototype.add.apply(this,a);a.autoHeight&&(a.parentGroup=this);return a};UIL.Group.prototype.open=function(){this.isOpen=!0;UIL.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z");this.rSizeContent();this.isUI&&this.main.calc(this.h-this.baseH)};
UIL.Group.prototype.close=function(){this.isUI&&this.main.calc(-(this.h-this.baseH));this.isOpen=!1;UIL.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z");this.h=this.baseH;this.s[0].height=this.h+"px"};UIL.Group.prototype.clear=function(){this.clearGroup();this.isUI&&this.main.calc(-(this.h+1));UIL.Proto.prototype.clear.call(this)};UIL.Group.prototype.clearGroup=function(){this.close();for(var a=this.uis.length;a--;)this.uis[a].clear(),this.uis.pop();this.uis=[];this.h=this.baseH};
UIL.Group.prototype.calc=function(a){this.isOpen&&(void 0!==a?(this.h+=a,this.isUI&&this.main.calc(a)):this.h=this.c[2].offsetHeight+this.baseH,this.s[0].height=this.h+"px")};UIL.Group.prototype.rSizeContent=function(){for(var a=this.uis.length;a--;)this.uis[a].setSize(this.width),this.uis[a].rSize();this.calc()};
UIL.Group.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);var a=this.s;a[3].left=this.sa+this.sb-17+"px";a[1].width=this.width+"px";a[2].width=this.width+"px";this.isOpen&&this.rSizeContent()};UIL.Title=function(a){UIL.Proto.call(this,a);a=a.prefix||"";this.c[2]=UIL.DOM(null,"div",UIL.TXT+"text-align:right; width:60px; line-height:"+(this.h-8)+"px; color:"+this.fontColor);31===this.h&&(this.s[0].height=this.h+"px",this.s[1].top="8px",this.c[2].style.top="8px");this.c[1].textContent=this.txt.substring(0,1).toUpperCase()+this.txt.substring(1).replace("-"," ");this.c[2].textContent=a;this.init()};UIL.Title.prototype=Object.create(UIL.Proto.prototype);UIL.Title.prototype.constructor=UIL.Title;
UIL.Title.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.s[1].width=this.width-50+"px";this.s[2].left=this.width-76+"px"};UIL.Title.prototype.text=function(a){this.c[1].textContent=a};UIL.Title.prototype.text2=function(a){this.c[2].textContent=a};UIL.String=function(a){UIL.Proto.call(this,a);this.value=a.value||"";this.allway=a.allway||!1;this.c[2]=UIL.DOM(null,"div",UIL.TXTSELECT);this.c[2].name="input";this.c[2].textContent=this.value;this.c[2].events=["mousedown","keydown","keyup","blur","focus"];this.init()};UIL.String.prototype=Object.create(UIL.Proto.prototype);UIL.String.prototype.constructor=UIL.String;
UIL.String.prototype.handleEvent=function(a){switch(a.type){case "mousedown":this.down(a);break;case "blur":this.blur(a);break;case "focus":this.focus(a);break;case "keydown":this.keydown(a);break;case "keyup":this.keyup(a)}};UIL.String.prototype.down=function(a){a.target.contentEditable=!0;a.target.focus();a.target.style.cursor="auto"};UIL.String.prototype.blur=function(a){a.target.style.borderColor=UIL.Border;a.target.contentEditable=!1};
UIL.String.prototype.focus=function(a){a.target.style.borderColor=UIL.BorderSelect};UIL.String.prototype.keydown=function(a){a.stopPropagation();13===a.keyCode&&(a.preventDefault(),this.value=a.target.textContent,a.target.blur(),this.send())};UIL.String.prototype.keyup=function(a){a.stopPropagation();this.value=a.target.textContent;this.allway&&this.send()};
UIL.String.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.s[2].color=this.fontColor;this.s[2].left=this.sa+"px";this.s[2].width=this.sb+"px";this.s[2].height=this.h-4+"px";this.s[2].lineHeight=this.h-8+"px"};UIL.Number=function(a){UIL.Proto.call(this,a);this.type="number";this.setTypeNumber(a);this.allway=a.allway||!1;this.isDrag=void 0===a.drag?!0:a.drag;this.value=[0];this.toRad=1;this.isNumber=!0;this.isSelect=this.isVector=this.isAngle=!1;void 0!==a.value&&(isNaN(a.value)?a.value instanceof Array?(this.value=a.value,this.isNumber=!1):a.value instanceof Object&&(this.value=[],a.value.x&&(this.value[0]=a.value.x),a.value.y&&(this.value[1]=a.value.y),a.value.z&&(this.value[2]=a.value.z),a.value.w&&(this.value[3]=
a.value.w),this.isVector=!0):this.value=[a.value]);this.length=this.value.length;a.isAngle&&(this.isAngle=!0,this.toRad=Math.PI/180);this.w=(UIL.BW+5)/this.length-5;this.current=void 0;for(var b=this.length;b--;)this.isAngle&&(this.value[b]=(180*this.value[b]/Math.PI).toFixed(this.precision)),this.c[2+b]=UIL.DOM(null,"div",UIL.TXTSELECT+"letter-spacing:-1px; cursor:pointer; height:"+(this.h-4)+"px; line-height:"+(this.h-8)+"px;"),this.c[2+b].name=b,this.isDrag&&(this.c[2+b].style.cursor="move"),a.center&&
(this.c[2+b].style.textAlign="center"),this.c[2+b].textContent=this.value[b],this.c[2+b].style.color=this.fontColor,this.c[2+b].events=["keydown","keyup","mousedown","blur","focus"];this.init()};UIL.Number.prototype=Object.create(UIL.Proto.prototype);UIL.Number.prototype.constructor=UIL.Number;
UIL.Number.prototype.handleEvent=function(a){switch(a.type){case "mousedown":this.down(a);break;case "keydown":this.keydown(a);break;case "keyup":this.keyup(a);break;case "blur":this.blur(a);break;case "focus":this.focus(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}};UIL.Number.prototype.setValue=function(a,b){b=b||0;this.value[b]=this.numValue(a);this.c[2+b].textContent=this.value[b]};
UIL.Number.prototype.keydown=function(a){a.stopPropagation();13===a.keyCode&&(a.preventDefault(),this.testValue(parseFloat(a.target.name)),this.validate(),a.target.blur())};UIL.Number.prototype.keyup=function(a){a.stopPropagation();this.allway&&(this.testValue(parseFloat(a.target.name)),this.validate())};UIL.Number.prototype.blur=function(a){this.isSelect=!1;a.target.style.borderColor=UIL.Border;a.target.contentEditable=!1;a.target.style.cursor=this.isDrag?"move":"pointer"};
UIL.Number.prototype.focus=function(a){this.isSelect=!0;this.current=void 0;a.target.style.borderColor=UIL.BorderSelect;this.isDrag&&(a.target.style.cursor="auto")};
UIL.Number.prototype.down=function(a){this.isSelect||(a.preventDefault(),this.current=parseFloat(a.target.name),this.prev={x:a.clientX,y:a.clientY,d:0,id:this.current+2},this.prev.v=this.isNumber?parseFloat(this.value):parseFloat(this.value[this.current]),document.addEventListener("mouseup",this,!1),this.isDrag&&document.addEventListener("mousemove",this,!1))};
UIL.Number.prototype.up=function(a){a.preventDefault();document.removeEventListener("mouseup",this,!1);this.isDrag&&document.removeEventListener("mousemove",this,!1);void 0!==this.current&&this.current===parseFloat(a.target.name)&&(a.target.contentEditable=!0,a.target.focus())};
UIL.Number.prototype.move=function(a){a.preventDefault();void 0!==this.current&&(this.prev.d+=a.clientX-this.prev.x-(a.clientY-this.prev.y),this.value[this.current]=this.numValue(this.prev.v+this.prev.d*this.step),this.c[2+this.current].textContent=this.value[this.current],this.validate(),this.prev.x=a.clientX,this.prev.y=a.clientY)};
UIL.Number.prototype.testValue=function(a){if(isNaN(this.c[2+a].textContent))this.c[2+a].textContent=this.value[a];else{var b=this.numValue(this.c[2+a].textContent);this.c[2+a].textContent=b;this.value[a]=b}};UIL.Number.prototype.validate=function(){for(var a=[],b=this.length;b--;)a[b]=this.value[b]*this.toRad;this.isNumber?this.send(a[0]):this.send(a)};
UIL.Number.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.w=~~((this.sb+5)/this.length)-5;for(var a=this.s,b=this.length;b--;)a[2+b].left=~~(this.sa+this.w*b+5*b)+"px",a[2+b].width=this.w+"px"};UIL.Color=function(a){UIL.Proto.call(this,a);this.autoHeight=!0;this.ctype=a.ctype||"array";this.ww=this.sb;this.oldWidth=0;this.side=a.side||"down";this.holdTop=0;this.wheelWidth=0.1*this.ww;this.decal=this.h+2;this.radius=0.5*(this.ww-this.wheelWidth)-1;this.square=Math.floor(0.7*(this.radius-0.5*this.wheelWidth))-1;this.mid=Math.floor(0.5*this.ww);this.markerSize=0.3*this.wheelWidth;this.baseH=this.h;this.c[2]=UIL.DOM(null,"div",UIL.TXT+"height:"+(this.h-4)+"px;border-radius:3px; pointer-events:auto; cursor:pointer; border:1px solid "+
UIL.Border+"; line-height:"+(this.h-8)+"px;");this.s[2]=this.c[2].style;"up"===this.side&&(this.decal=5,this.s[2].top="auto",this.s[2].bottom="2px");this.c[3]=UIL.DOM(null,"div",UIL.BASIC+"display:none");this.c[4]=UIL.DOM(null,"canvas",UIL.BASIC+"display:none;");this.c[5]=UIL.DOM(null,"canvas",UIL.BASIC+"pointer-events:auto; cursor:pointer; display:none;");this.s[3]=this.c[3].style;this.s[5]=this.c[5].style;"up"===this.side&&(this.s[5].pointerEvents="none");this.c[4].width=this.c[4].height=this.ww;
this.c[5].width=this.c[5].height=this.ww;this.ctxMask=this.c[4].getContext("2d");this.ctxOverlay=this.c[5].getContext("2d");this.ctxMask.translate(this.mid,this.mid);this.ctxOverlay.translate(this.mid,this.mid);this.hsl=null;this.value="#ffffff";void 0!==a.value&&(a.value instanceof Array?this.value=UIL.rgbToHex(a.value):isNaN(a.value)?this.value=a.value:this.value=UIL.hexToHtml(a.value));this.bcolor=null;this.isShow=this.isDown=!1;this.c[2].events=["click"];this.c[5].events=["mousedown","mousemove",
"mouseup","mouseout"];this.setColor(this.value);this.init()};UIL.Color.prototype=Object.create(UIL.Proto.prototype);UIL.Color.prototype.constructor=UIL.Color;UIL.Color.prototype.handleEvent=function(a){a.preventDefault();a.stopPropagation();switch(a.type){case "click":this.click(a);break;case "mousedown":this.down(a);break;case "mousemove":this.move(a);break;case "mouseup":this.up(a);break;case "mouseout":this.out(a)}};UIL.Color.prototype.click=function(a){this.isShow?this.hide():this.show()};
UIL.Color.prototype.up=function(a){this.isDown=!1};UIL.Color.prototype.out=function(a){this.hide()};UIL.Color.prototype.down=function(a){if(this.isShow)return this.isDown=!0,this.move(a),!1};
UIL.Color.prototype.move=function(a){if(this.isDown){this.offset=this.c[5].getBoundingClientRect();var b=a.pageX-this.offset.left-this.mid;a=a.pageY-this.offset.top-this.mid;(this.circleDrag=Math.max(Math.abs(b),Math.abs(a))>this.square+2)?(b=Math.atan2(b,-a)/6.28,this.setHSL([(b+1)%1,this.hsl[1],this.hsl[2]])):(b=Math.max(0,Math.min(1,-(b/this.square*0.5)+0.5)),a=Math.max(0,Math.min(1,-(a/this.square*0.5)+0.5)),this.setHSL([this.hsl[0],b,a]))}};
UIL.Color.prototype.redraw=function(){this.oldWidth=this.ww;this.drawCircle();this.drawMask();this.drawMarkers()};
UIL.Color.prototype.show=function(){this.oldWidth!==this.ww&&this.redraw();this.isShow=!0;this.h=this.ww+this.baseH+10;this.s[0].height=this.h+"px";"up"==this.side&&(this.holdTop=1*this.s[0].top.substring(0,this.s[0].top.length-2)||"auto",isNaN(this.holdTop)||(this.s[0].top=this.holdTop-(this.h-20)+"px"),setTimeout(function(){this.s[5].pointerEvents="auto"}.bind(this),100));this.s[3].display="block";this.s[4].display="block";this.s[5].display="block";null!==this.parentGroup?this.parentGroup.calc(this.h-
this.baseH):this.isUI&&this.main.calc(this.h-this.baseH)};UIL.Color.prototype.hide=function(){null!==this.parentGroup?this.parentGroup.calc(-(this.h-this.baseH)):this.isUI&&this.main.calc(-(this.h-this.baseH));this.isShow=!1;this.h=this.baseH;"up"===this.side&&(isNaN(this.holdTop)||(this.s[0].top=this.holdTop+"px"),this.s[5].pointerEvents="none");this.s[0].height=this.h+"px";this.s[3].display="none";this.s[4].display="none";this.s[5].display="none"};
UIL.Color.prototype.update=function(a){this.s[3].background=UIL.rgbToHex(UIL.hslToRgb([this.hsl[0],1,0.5]));this.drawMarkers();this.value=this.bcolor;this.s[2].background=this.bcolor;this.c[2].textContent=UIL.htmlToHex(this.bcolor);this.invert=UIL.findDeepInver(this.rgb);this.s[2].color=this.invert?"#fff":"#000";a&&("array"===this.ctype&&this.send(this.rgb),"rgb"===this.ctype&&this.send(UIL.htmlRgb(this.rgb)),"hex"===this.ctype&&this.send(UIL.htmlToHex(this.value)),"html"===this.ctype&&this.send())};
UIL.Color.prototype.setColor=function(a){var b=UIL.unpack(a);this.bcolor!=a&&b&&(this.bcolor=a,this.rgb=b,this.hsl=UIL.rgbToHsl(this.rgb),this.update());return this};UIL.Color.prototype.setHSL=function(a){this.hsl=a;this.rgb=UIL.hslToRgb(a);this.bcolor=UIL.rgbToHex(this.rgb);this.update(!0);return this};UIL.Color.prototype.calculateMask=function(a,b,c){for(var d=1/a,e=1/b,f=0;f<=b;++f)for(var h=1-f*e,g=0;g<=a;++g){var l=1-g*d,l=1-2*Math.min(h*l,(1-h)*l);c(g,f,0<l?0.5*(2*h-1+l)/l:0,l)}};
UIL.Color.prototype.drawMask=function(){var a=this.square,b=Math.floor(2*this.square/2),c=document.createElement("canvas");c.width=c.height=b+1;var d=c.getContext("2d"),e=d.getImageData(0,0,b+1,b+1),f=0;this.calculateMask(b,b,function(a,b,c,d){e.data[f++]=e.data[f++]=e.data[f++]=255*c;e.data[f++]=255*d});d.putImageData(e,0,0);this.ctxMask.drawImage(c,0,0,b+1,b+1,-a,-a,2*a,2*a)};
UIL.Color.prototype.drawCircle=function(){var a=this.radius,b=this.wheelWidth,c=8/a/24*Math.PI,d=this.ctxMask,e=0,f,h,g,l;d.save();d.lineWidth=b/a;d.scale(a,a);for(var k=0;24>=k;++k)l=k/24,a=l*Math.PI*2,b=[Math.sin(e),-Math.cos(e),Math.sin(a),-Math.cos(a)],h=0.5*(e+a),g=1/Math.cos(0.5*(a-e)),e=Math.sin(h)*g,h=-Math.cos(h)*g,l=UIL.rgbToHex(UIL.hslToRgb([l,1,0.5])),0<k&&(g=d.createLinearGradient(b[0],b[1],b[2],b[3]),g.addColorStop(0,f),g.addColorStop(1,l),d.strokeStyle=g,d.beginPath(),d.moveTo(b[0],
b[1]),d.quadraticCurveTo(e,h,b[2],b[3]),d.stroke()),e=a-c,f=l;d.restore()};
UIL.Color.prototype.drawMarkers=function(){var a=this.markerSize,b=this.radius,c=this.ww,d=Math.ceil(a/4),e=a-d+1,f=this.invert?"#fff":"#000",h=this.invert?"#000":"#fff",g=6.28*this.hsl[0],b=[Math.sin(g)*b,-Math.cos(g)*b,2*this.square*(0.5-this.hsl[1]),2*this.square*(0.5-this.hsl[2])],a=[{x:b[2],y:b[3],r:a,c:f,lw:d},{x:b[2],y:b[3],r:e,c:h,lw:d+1},{x:b[0],y:b[1],r:a,c:"#fff",lw:d},{x:b[0],y:b[1],r:e,c:"#000",lw:d+1}];this.ctxOverlay.clearRect(-this.mid,-this.mid,c,c);for(c=a.length;c--;)d=a[c],this.ctxOverlay.lineWidth=
d.lw,this.ctxOverlay.strokeStyle=d.c,this.ctxOverlay.beginPath(),this.ctxOverlay.arc(d.x,d.y,d.r,0,2*Math.PI,!0),this.ctxOverlay.stroke()};
UIL.Color.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.ww=this.sb;this.wheelWidth=0.1*this.ww;"up"===this.side&&(this.decal=5);this.radius=0.5*(this.ww-this.wheelWidth)-1;this.square=Math.floor(0.7*(this.radius-0.5*this.wheelWidth))-1;this.mid=Math.floor(0.5*this.ww);this.markerSize=0.3*this.wheelWidth;var a=this.s;a[2].width=this.sb+"px";a[2].left=this.sa+"px";a[3].width=2*this.square-1+"px";a[3].height=2*this.square-1+"px";a[3].top=this.mid+this.decal-this.square+"px";a[3].left=
this.mid+this.sa-this.square+"px";this.c[4].width=this.c[4].height=this.ww;a[4].left=this.sa+"px";a[4].top=this.decal+"px";this.c[5].width=this.c[5].height=this.ww;a[5].left=this.sa+"px";a[5].top=this.decal+"px";this.ctxMask.translate(this.mid,this.mid);this.ctxOverlay.translate(this.mid,this.mid);this.isShow&&(this.redraw(),this.h=this.ww+30,this.c[0].height=this.h+"px",this.isUI&&this.main.calc())};UIL.Slide=function(a){UIL.Proto.call(this,a);this.setTypeNumber(a);this.stype=a.stype||0;this.buttonColor=a.bColor||UIL.BUTTON;this.isOver=this.isDown=!1;this.allway=a.allway||!1;this.c[2]=UIL.DOM(null,"div",UIL.TXTSELECT+"letter-spacing:-1px; padding:2px 5px; text-align:right; cursor:pointer; width:47px; border:none; color:"+this.fontColor);this.c[3]=UIL.DOM(null,"div",UIL.BASIC+"pointer-events:auto; cursor:w-resize; top:0; height:"+this.h+"px;");this.c[4]=UIL.DOM(null,"div",UIL.BASIC+"border:1px solid "+
UIL.Border+"; pointer-events:none; background:rgba(0,0,0,0.3); top:2px; height:"+(this.h-4)+"px;");this.c[5]=UIL.DOM(null,"div",UIL.BASIC+"left:4px; top:5px; height:"+(this.h-10)+"px; background:"+this.fontColor+";");this.c[2].name="text";this.c[3].name="scroll";if(0!==this.stype){if(1===this.stype||3===this.stype)var b=4,c=8,d=this.h-4,e=20;2===this.stype&&(b=2,c=4,e=2,d=0.5*(this.h-4));3===this.stype&&(this.c[5].style.visible="none");this.c[4].style.borderRadius=b+"px";this.c[4].style.height=c+
"px";this.c[4].style.top=0.5*this.h-b+"px";this.c[5].style.borderRadius=0.5*b+"px";this.c[5].style.height=b+"px";this.c[5].style.top=0.5*this.h-0.5*b+"px";this.c[6]=UIL.DOM(null,"div",UIL.BASIC+"border-radius:"+e+"px; margin-left:"+0.5*-d+"px; border:1px solid "+UIL.Border+"; background:"+this.buttonColor+"; left:4px; top:2px; height:"+(this.h-4)+"px; width:"+d+"px;")}this.c[3].events=["mouseover","mousedown","mouseout"];this.c[2].events=["keydown","keyup","mousedown","blur","focus"];this.init()};
UIL.Slide.prototype=Object.create(UIL.Proto.prototype);UIL.Slide.prototype.constructor=UIL.Slide;UIL.Slide.prototype.handleEvent=function(a){switch(a.type){case "mouseover":this.over(a);break;case "mousedown":"text"===a.target.name?this.textdown(a):this.down(a);break;case "mouseout":this.out(a);break;case "mouseup":this.up(a);break;case "mousemove":this.isDown&&this.move(a);break;case "blur":this.blur(a);break;case "focus":this.focus(a);break;case "keydown":this.keydown(a);break;case "keyup":this.keyup(a)}};
UIL.Slide.prototype.mode=function(a){var b=this.s;switch(a){case 0:b[2].color=this.fontColor;b[4].background="rgba(0,0,0,0.3)";b[5].background=this.fontColor;break;case 1:b[2].color=this.colorPlus,b[4].background="rgba(0,0,0,0.6)",b[5].background=this.colorPlus}};UIL.Slide.prototype.over=function(a){a.preventDefault();a.stopPropagation();this.isOver=!0;this.mode(1)};UIL.Slide.prototype.out=function(a){a.preventDefault();a.stopPropagation();this.isOver=!1;this.isDown||this.mode(0)};
UIL.Slide.prototype.up=function(a){a.preventDefault();a.stopPropagation();this.isDown=!1;document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1);this.isOver?this.mode(1):this.mode(0);this.sendEnd()};UIL.Slide.prototype.down=function(a){a.preventDefault();a.stopPropagation();this.isDown=!0;document.addEventListener("mouseup",this,!1);document.addEventListener("mousemove",this,!1);this.left=this.c[3].getBoundingClientRect().left;this.old=this.value;this.move(a)};
UIL.Slide.prototype.move=function(a){a=(a.clientX-this.left-3)/this.w*this.range+this.min-this.old;if(a>=this.step||a<=this.step)a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value};UIL.Slide.prototype.update=function(a){var b=(this.value-this.min)/this.range*this.w;3!==this.stype&&(this.s[5].width=~~b+"px");this.s[6]&&(this.s[6].left=~~(this.sa+b+3)+"px");this.c[2].textContent=this.value;a&&this.send()};
UIL.Slide.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);var a=this.sb-this.sc;this.w=a-6;var b=this.sc;if(this.isUI||!this.simple)b=this.sc+10;var c=~~(0.5*this.h)-8,d=this.s;d[2].width=this.sc-2+"px";d[2].left=this.width-b+2+"px";d[2].top=c+"px";d[3].left=this.sa+"px";d[3].width=a+"px";d[4].left=this.sa+"px";d[4].width=a+"px";d[5].left=this.sa+3+"px";this.update()};
UIL.Slide.prototype.validate=function(a){isNaN(this.c[2].textContent)?this.c[2].textContent=this.value:(this.value=this.numValue(this.c[2].textContent),this.update(!0))};UIL.Slide.prototype.textdown=function(a){a.target.contentEditable=!0;a.target.focus();this.isEdit=!0};UIL.Slide.prototype.keydown=function(a){a.stopPropagation();13===a.keyCode&&(a.preventDefault(),this.validate(),a.target.blur())};UIL.Slide.prototype.keyup=function(a){a.stopPropagation();this.allway&&this.validate()};
UIL.Slide.prototype.blur=function(a){a.target.style.border="none";this.isEdit=a.target.contentEditable=!1};UIL.Slide.prototype.focus=function(a){a.target.style.border="1px dashed "+UIL.BorderSelect};UIL.List=function(a){UIL.Proto.call(this,a);this.autoHeight=!0;var b=a.align||"center";this.buttonColor=UIL.BUTTON;var c=Math.floor(0.5*this.h)-5;this.c[2]=UIL.DOM(null,"div",UIL.BASIC+"top:0; height:90px; cursor:s-resize; pointer-events:auto; display:none; overflow:hidden; border:1px solid "+UIL.Border+";");this.c[3]=UIL.DOM(null,"div",UIL.TXT+UIL.BASIC+"text-align:"+b+"; line-height:"+(this.h-4)+"px; border:1px solid "+UIL.Border+"; top:1px; pointer-events:auto; cursor:pointer; background:"+this.buttonColor+
"; height:"+(this.h-2)+"px;");this.c[4]=UIL.DOM(null,"path",UIL.BASIC+"position:absolute; width:10px; height:10px; top:"+c+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"});this.scroller=UIL.DOM(null,"div",UIL.BASIC+"right:5px;  width:10px; pointer-events:none; background:#666; display:none;");this.c[2].name="list";this.c[3].name="title";this.c[3].style.color=this.fontColor;this.c[2].events="mousedown mousemove mouseup mousewheel mouseout mouseover".split(" ");this.c[3].events=
["mousedown","mouseover","mouseout"];this.list=a.list||[];this.baseH=this.h;this.isShow=!1;this.itemHeight=a.itemHeight||this.h-3;this.full=a.full||!1;this.py=0;this.w=this.sb;this.isDown=this.scroll=!1;this.side=a.side||"down";this.holdTop=0;"up"===this.side?(this.c[2].style.top="auto",this.c[3].style.top="auto",this.c[4].style.top="auto",this.c[2].style.bottom=this.h-2+"px",this.c[3].style.bottom="1px",this.c[4].style.bottom=c+"px"):this.c[2].style.top=this.h-2+"px";this.listIn=UIL.DOM(null,"div",
UIL.BASIC+"left:0; top:0; width:100%; background:rgba(0,0,0,0.2);");this.listIn.name="list";this.c[2].appendChild(this.listIn);this.c[2].appendChild(this.scroller);this.setList(this.list,a.value);this.init()};UIL.List.prototype=Object.create(UIL.Proto.prototype);UIL.List.prototype.constructor=UIL.List;UIL.List.prototype.clearList=function(){for(;this.listIn.children.length;)this.listIn.removeChild(this.listIn.lastChild)};
UIL.List.prototype.setList=function(a,b){this.clearList();this.list=a;this.length=this.list.length;this.maxItem=this.full?this.length:5;this.maxItem=this.length<this.maxItem?this.length:this.maxItem;this.maxHeight=this.maxItem*(this.itemHeight+1)+2;this.max=this.length*(this.itemHeight+1)+2;this.ratio=this.maxHeight/this.max;this.sh=this.maxHeight*this.ratio;this.range=this.maxHeight-this.sh;this.c[2].style.height=this.maxHeight+"px";this.scroller.style.height=this.sh+"px";this.max>this.maxHeight&&
(this.w=this.sb-20,this.scroll=!0);for(var c,d,e=0;e<this.length;e++)d=this.list[e],c=UIL.DOM(null,"div",UIL.ITEM+"width:"+this.w+"px; height:"+this.itemHeight+"px; line-height:"+(this.itemHeight-5)+"px;"),c.textContent=d,c.style.color=this.fontColor,c.name="item",this.listIn.appendChild(c);void 0!==b?isNaN(b)?this.value=b:this.value=this.list[b]:this.value=this.list[0];this.c[3].textContent=this.value};
UIL.List.prototype.handleEvent=function(a){a.preventDefault();var b=a.target.name||"";switch(a.type){case "click":this.click(a);break;case "mouseover":"title"===b?this.mode(1):this.listover(a);break;case "mousedown":"title"===b?this.titleClick(a):this.listdown(a);break;case "mouseup":"title"===b?this.mode(0):this.listup(a);break;case "mouseout":"title"===b?this.mode(0):this.listout(a);break;case "mousemove":this.listmove(a);break;case "mousewheel":this.listwheel(a)}};
UIL.List.prototype.mode=function(a){var b=this.s;switch(a){case 0:b[3].color=this.fontColor;b[3].background=this.buttonColor;break;case 1:b[3].color="#FFF";b[3].background=UIL.SELECT;break;case 2:b[3].color=this.fontColor,b[3].background=UIL.SELECTDOWN}};UIL.List.prototype.click=function(a){a=a.target.name;"title"!==a&&"list"!==a&&this.listHide()};UIL.List.prototype.titleClick=function(a){this.isShow?this.listHide():(this.listShow(),this.mode(2))};
UIL.List.prototype.listover=function(a){"item"===a.target.name&&(a.target.style.background=UIL.SELECT,a.target.style.color="#FFF")};UIL.List.prototype.listdown=function(a){var b=a.target.name;"list"!==b&&void 0!==b?(this.value=a.target.textContent,this.c[3].textContent=this.value,this.send()):"list"===b&&this.scroll&&(this.isDown=!0,this.listmove(a),this.listIn.style.background="rgba(0,0,0,0.6)",this.scroller.style.background="#AAA")};
UIL.List.prototype.listmove=function(a){if(this.isDown){var b=this.c[2].getBoundingClientRect();this.update(a.clientY-b.top-0.5*this.sh)}};UIL.List.prototype.listup=function(a){this.isDown=!1;this.listIn.style.background="rgba(0,0,0,0.2)";this.scroller.style.background="#666"};UIL.List.prototype.listout=function(a){"item"===a.target.name&&(a.target.style.background="rgba(0,0,0,0.2)",a.target.style.color=this.fontColor);this.isUI&&(this.main.lockwheel=!1);this.listup()};
UIL.List.prototype.listwheel=function(a){if(this.scroll){this.isUI&&(this.main.lockwheel=!0);var b=0;a.wheelDeltaY?b=0.04*-a.wheelDeltaY:a.wheelDelta?b=0.2*-a.wheelDelta:a.detail&&(b=4*a.detail);this.py+=b;this.update(this.py)}};UIL.List.prototype.update=function(a){this.scroll&&(a=0>a?0:a,a=a>this.range?this.range:a,this.listIn.style.top=-Math.floor(a/this.ratio)+"px",this.scroller.style.top=Math.floor(a)+"px",this.py=a)};
UIL.List.prototype.listShow=function(){document.addEventListener("click",this,!1);this.update(0);this.isShow=!0;this.h=this.maxHeight+this.baseH+10;this.scroll?this.scroller.style.display="block":(this.h=this.baseH+10+this.max,this.scroller.style.display="none");this.s[0].height=this.h+"px";this.s[2].display="block";"up"===this.side?UIL.setSvg(this.c[4],"d","M 5 2 L 2 7 8 7 5 2 Z"):UIL.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z");this.rSizeContent();null!==this.parentGroup?this.parentGroup.calc(this.h-
this.baseH):this.isUI&&this.main.calc(this.h-this.baseH)};UIL.List.prototype.listHide=function(){document.removeEventListener("click",this,!1);null!==this.parentGroup?this.parentGroup.calc(-(this.h-this.baseH)):this.isUI&&this.main.calc(-(this.h-this.baseH));this.isShow=!1;this.h=this.baseH;this.s[0].height=this.h+"px";this.s[2].display="none";UIL.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z")};UIL.List.prototype.text=function(a){this.c[3].textContent=a};
UIL.List.prototype.rSizeContent=function(){for(var a=this.length;a--;)this.listIn.children[a].style.width=this.w+"px"};UIL.List.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);var a=this.s,b=this.sb,c=this.sa;a[2].width=b+"px";a[2].left=c+"px";a[3].width=b+"px";a[3].left=c+"px";a[4].left=c+b-17+"px";this.w=b;this.max>this.maxHeight&&(this.w=b-20);this.isShow&&this.rSizeContent()};UIL.Bool=function(a){UIL.Proto.call(this,a);this.value=a.value||!1;this.buttonColor=UIL.BUTTON;this.inh=a.inh||this.h;a=~~(0.5*this.h)-0.5*(this.inh-2);this.c[2]=UIL.DOM(null,"div",UIL.BASIC+"background:"+UIL.BOOLBG+"; height:"+(this.inh-2)+"px; width:36px; top:"+a+"px; border-radius:20px; pointer-events:auto; cursor:pointer; transition:0.1s ease-out;");this.c[3]=UIL.DOM(null,"div",UIL.BASIC+"opasity:0, background:"+UIL.BOOLBG+"; height:"+(this.inh-6)+"px; width:"+(this.inh-6)+"px; top:"+(a+2)+"px; border-radius:20px; ");
this.c[4]=UIL.DOM(null,"div",UIL.BASIC+"border:1px solid "+UIL.Border+"; height:"+(this.inh-4)+"px; width:16px; top:"+(a+1)+"px; border-radius:20px; background:"+this.buttonColor+"; transition:margin 0.1s ease-out;");this.value&&(this.c[4].style.marginLeft="18px",this.c[2].style.background=this.fontColor,this.c[2].style.borderColor=this.fontColor);this.c[2].events=["click"];this.init()};UIL.Bool.prototype=Object.create(UIL.Proto.prototype);UIL.Bool.prototype.constructor=UIL.Bool;
UIL.Bool.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "click":this.click(a)}};UIL.Bool.prototype.click=function(a){this.value=this.value?!1:!0;this.update();this.send()};UIL.Bool.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);var a=this.s;a[2].left=this.sa+"px";a[3].left=this.sa+1+"px";a[4].left=this.sa+1+"px"};
UIL.Bool.prototype.update=function(){var a=this.s;this.value?(a[4].marginLeft="18px",a[2].background=this.fontColor,a[2].borderColor=this.fontColor,a[4].borderColor=this.fontColor):(a[4].marginLeft="0px",a[2].background=UIL.BOOLBG,a[2].borderColor=UIL.BOOLBG,a[4].borderColor=UIL.Border)};UIL.Button=function(a){UIL.Proto.call(this,a);this.value=a.value||[this.txt];this.buttonColor=a.bColor||UIL.BUTTON;this.isLoadButton=a.loader||!1;if(this.isDragButton=a.drag||!1)this.isLoadButton=!0;this.r=a.r||3;this.lng=this.value.length;for(a=0;a<this.lng;a++)this.c[a+2]=UIL.DOM(null,"div",UIL.TXT+UIL.BASIC+"text-align:center; border:1px solid "+UIL.Border+"; top:1px; pointer-events:auto; cursor:pointer; background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.r+"px; line-height:"+
(this.h-4)+"px;"),this.c[a+2].style.color=this.fontColor,this.c[a+2].events=["click","mouseover","mousedown","mouseup","mouseout"],this.c[a+2].innerHTML=this.value[a],this.c[a+2].name=a;void 0!==this.c[1]&&(this.c[1].textContent="");this.isLoadButton&&this.initLoader();this.isDragButton&&(this.lng++,this.initDrager());this.init()};UIL.Button.prototype=Object.create(UIL.Proto.prototype);UIL.Button.prototype.constructor=UIL.Button;
UIL.Button.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "click":this.click(a);break;case "mouseover":this.mode(1,a);break;case "mousedown":this.mode(2,a);break;case "mouseup":this.mode(0,a);break;case "mouseout":this.mode(0,a);break;case "change":this.fileSelect(a.target.files[0]);break;case "dragover":this.dragover();break;case "dragend":this.dragend();break;case "dragleave":this.dragend();break;case "drop":this.drop(a)}};
UIL.Button.prototype.dragover=function(){this.s[4].borderColor=UIL.SELECT;this.s[4].color=UIL.SELECT};UIL.Button.prototype.dragend=function(){this.s[4].borderColor=this.fontColor;this.s[4].color=this.fontColor};UIL.Button.prototype.drop=function(a){this.dragend();this.fileSelect(a.dataTransfer.files[0])};
UIL.Button.prototype.mode=function(a,b){var c=this.s,d=b.target.name||0;"loader"===d&&(d=0);switch(a){case 0:c[d+2].color=this.fontColor;c[d+2].background=this.buttonColor;break;case 1:c[d+2].color="#FFF";c[d+2].background=UIL.SELECT;break;case 2:c[d+2].color=this.fontColor,c[d+2].background=UIL.SELECTDOWN}};
UIL.Button.prototype.initDrager=function(){this.c[4]=UIL.DOM(null,"div",UIL.TXT+UIL.BASIC+" text-align:center; line-height:"+(this.h-8)+"px; border:1px dashed "+this.fontColor+"; top:2px; pointer-events:auto; cursor:default; height:"+(this.h-4)+"px; border-radius:"+this.r+"px;");this.c[4].textContent="DRAG";this.c[2].events=[];this.c[4].events=["dragover","dragend","dragleave","drop"]};
UIL.Button.prototype.initLoader=function(){this.c[3]=UIL.DOM(null,"input",UIL.BASIC+"border:1px solid "+UIL.Border+"; top:1px; opacity:0; pointer-events:auto; cursor:pointer; height:"+(this.h-2)+"px;");this.c[3].name="loader";this.c[3].type="file";this.c[2].events=[];this.c[3].events=["change","mouseover","mousedown","mouseup","mouseout"]};
UIL.Button.prototype.fileSelect=function(a){if(void 0!==a){var b=new FileReader,c=a.name,d=c.substring(c.lastIndexOf(".")+1,c.length);"png"===d||"jpg"===d?b.readAsDataURL(a):"z"===d?b.readAsBinaryString(a):"sea"===d?b.readAsArrayBuffer(a):b.readAsText(a);b.onload=function(a){this.callback&&this.callback(a.target.result,c,d)}.bind(this)}};UIL.Button.prototype.click=function(a){this.send(this.value[a.target.name||0])};UIL.Button.prototype.label=function(a,b){this.c[b||2].textContent=a};
UIL.Button.prototype.icon=function(a,b,c){c=c||2;this.s[c].padding=(b||0)+"px 0px";this.c[c].innerHTML=a};UIL.Button.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);for(var a=this.s,b=this.sa,c=this.lng,d=Math.floor((this.sb-3*(c-1))/c);c--;)a[c+2].width=d+"px",a[c+2].left=b+d*c+3*c+"px";this.isDragButton&&(a[4].left=b+d+3+"px",a[4].width=d+"px");this.isLoadButton&&(a[3].left=b+"px",a[3].width=d+"px")};UIL.Circular=function(a){UIL.Proto.call(this,a);this.autoWidth=!1;this.buttonColor=UIL.BUTTON;this.setTypeNumber(a);this.radius=a.radius||15;this.width=2*this.radius+20;void 0!==a.width&&(this.width=a.width,this.radius=0.5*~~(this.width-20));void 0!==a.size&&(this.width=a.size,this.radius=0.5*~~(this.width-20));this.w=this.height=2*this.radius;this.h=a.height||this.height+40;this.twoPi=2*Math.PI;this.top=0;this.c[0].style.width=this.width+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.width+
"px",this.c[1].style.textAlign="center",this.top=20);this.percent=0;this.c[2]=UIL.DOM(null,"div",UIL.NUM+"text-align:center; top:"+(this.height+24)+"px; width:"+this.width+"px; color:"+this.fontColor);this.c[3]=UIL.DOM(null,"circle",UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; pointer-events:auto; cursor:pointer;",{cx:this.radius,cy:this.radius,r:this.radius,fill:"rgba(0,0,0,0.3)"});this.c[4]=UIL.DOM(null,"path",UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+
this.w+"px; height:"+this.height+"px;",{d:this.makePath(),fill:this.fontColor});this.c[5]=UIL.DOM(null,"circle",UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;",{cx:this.radius,cy:this.radius,r:0.5*this.radius,fill:this.buttonColor,"stroke-width":1,stroke:UIL.SVGC});this.c[3].events=["mouseover","mousedown","mouseout"];this.init();this.update()};UIL.Circular.prototype=Object.create(UIL.Proto.prototype);UIL.Circular.prototype.constructor=UIL.Circular;
UIL.Circular.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "mouseover":this.over(a);break;case "mousedown":this.down(a);break;case "mouseout":this.out(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}};
UIL.Circular.prototype.mode=function(a){switch(a){case 0:this.s[2].color=this.fontColor;UIL.setSvg(this.c[3],"fill","rgba(0,0,0,0.2)");UIL.setSvg(this.c[4],"fill",this.fontColor);break;case 1:this.s[2].color=this.colorPlus,UIL.setSvg(this.c[3],"fill","rgba(0,0,0,0.6)"),UIL.setSvg(this.c[4],"fill",this.colorPlus)}};UIL.Circular.prototype.over=function(a){this.isOver=!0;this.mode(1)};UIL.Circular.prototype.out=function(a){this.isOver=!1;this.isDown||this.mode(0)};
UIL.Circular.prototype.up=function(a){this.isDown=!1;document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1);this.isOver?this.mode(1):this.mode(0);this.sendEnd()};UIL.Circular.prototype.down=function(a){this.isDown=!0;document.addEventListener("mouseup",this,!1);document.addEventListener("mousemove",this,!1);this.rect=this.c[3].getBoundingClientRect();this.old=this.value;this.oldr=null;this.move(a)};
UIL.Circular.prototype.move=function(a){this.isDown&&(this.r=Math.atan2(this.radius-(a.clientY-this.rect.top),this.radius-(a.clientX-this.rect.left))-0.5*Math.PI,this.r=(this.r%this.twoPi+this.twoPi)%this.twoPi,null!==this.oldr&&(a=this.r-this.oldr,this.r=Math.abs(a)>Math.PI?this.oldr:this.r,6<a&&(this.r=0),-6>a&&(this.r=this.twoPi)),a=1/this.twoPi*this.range*this.r+this.min-this.old,a>=this.step||a<=this.step)&&(a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=
this.value,this.oldr=this.r)};UIL.Circular.prototype.makePath=function(){var a=this.radius,b=this.percent*this.twoPi-0.001,c=a+a*Math.sin(b),d=a-a*Math.cos(b);return"M "+a+","+a+" L "+a+",0 A "+a+","+a+" 0 "+(b>Math.PI?1:0)+" 1 "+c+","+d+" Z"};UIL.Circular.prototype.update=function(a){this.c[2].textContent=this.value;this.percent=(this.value-this.min)/this.range;UIL.setSvg(this.c[4],"d",this.makePath());a&&this.send()};UIL.Knob=function(a){UIL.Proto.call(this,a);this.autoWidth=!1;this.buttonColor=UIL.BUTTON;this.setTypeNumber(a);this.mPI=0.8*Math.PI;this.toDeg=180/Math.PI;this.cirRange=2*this.mPI;this.radius=a.radius||15;this.width=2*this.radius+20;void 0!==a.width&&(this.width=a.width,this.radius=0.5*~~(this.width-20));void 0!==a.size&&(this.width=a.size,this.radius=0.5*~~(this.width-20));this.w=this.height=2*this.radius;this.h=a.height||this.height+40;this.top=0;this.c[0].style.width=this.width+"px";void 0!==
this.c[1]&&(this.c[1].style.width=this.width+"px",this.c[1].style.textAlign="center",this.top=20);this.percent=0;this.c[2]=UIL.DOM(null,"div",UIL.NUM+"text-align:center; top:"+(this.height+24)+"px; width:"+this.width+"px; color:"+this.fontColor);this.c[3]=UIL.DOM(null,"circle",UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;  pointer-events:auto; cursor:pointer;",{cx:this.radius,cy:this.radius,r:this.radius-4,fill:"rgba(0,0,0,0.3)"});this.c[4]=UIL.DOM(null,"circle",
UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;",{cx:this.radius,cy:0.5*this.radius,r:3,fill:this.fontColor});this.c[5]=UIL.DOM(null,"path",UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;",{d:this.makeGrad(),"stroke-width":1,stroke:UIL.SVGC});UIL.DOM(null,"circle",null,{cx:this.radius,cy:this.radius,r:0.7*this.radius,fill:this.buttonColor,"stroke-width":1,stroke:UIL.SVGC},this.c[3]);this.c[3].events=["mouseover","mousedown",
"mouseout"];this.r=0;this.init();this.update()};UIL.Knob.prototype=Object.create(UIL.Circular.prototype);UIL.Knob.prototype.constructor=UIL.Knob;
UIL.Knob.prototype.move=function(a){this.isDown&&(this.r=-Math.atan2(this.radius-(a.clientX-this.rect.left),this.radius-(a.clientY-this.rect.top)),null!==this.oldr&&(this.r=Math.abs(this.r-this.oldr)>Math.PI?this.oldr:this.r),this.r=this.r>this.mPI?this.mPI:this.r,this.r=this.r<-this.mPI?-this.mPI:this.r,a=1/this.cirRange*this.range*(this.r+this.mPI)+this.min-this.old,a>=this.step||a<=this.step)&&(a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value,
this.oldr=this.r)};UIL.Knob.prototype.makeGrad=function(){var a="",b,c,d,e,f,h,g=this.radius,l=Math.PI+this.mPI;b=Math.PI-this.mPI;5<this.step?(c=this.range/this.step,b=(l-b)/c):(b=(l-b)/g,c=g);for(var k=0;k<=c;++k)d=l-b*k,e=g+Math.sin(d)*g,f=g+Math.cos(d)*g,h=g+Math.sin(d)*(g-3),d=g+Math.cos(d)*(g-3),a+="M"+e+" "+f+" L"+h+" "+d+" ";return a};
UIL.Knob.prototype.update=function(a){this.c[2].textContent=this.value;this.percent=(this.value-this.min)/this.range;UIL.setSvg(this.c[4],"transform","rotate("+(this.percent*this.cirRange-this.mPI)*this.toDeg+" "+this.radius+" "+this.radius+")");a&&this.send()};UIL.Joystick=function(a){UIL.Proto.call(this,a);this.autoWidth=!1;this.value=[0,0];this.joyType="analogique";this.precision=a.precision||2;this.multiplicator=a.multiplicator||1;this.oldy=this.oldx=this.y=this.x=0;this.interval=null;this.radius=a.radius||50;this.width=2*this.radius+20;void 0!==a.width&&(this.width=a.width,this.radius=~~(0.5*(this.width-20)));void 0!==a.size&&(this.width=a.size,this.radius=0.5*~~(this.width-20));this.innerRadius=a.innerRadius||0.6*this.radius;this.maxDistance=this.radius-
this.innerRadius-5;this.height=2*this.radius;this.h=a.height||this.height+40;this.top=0;this.c[0].style.width=this.width+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.width+"px",this.c[1].style.textAlign="center",this.top=20);this.c[2]=UIL.DOM(null,"circle",UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;  pointer-events:auto; cursor:pointer;",{cx:this.radius,cy:this.radius,r:this.radius,fill:"url(#grad)"});this.c[3]=UIL.DOM(null,"circle",UIL.BASIC+"left:0px; top:"+
(this.top-10)+"px; width:"+(this.w+20)+"px; height:"+(this.height+20)+"px;",{cx:this.radius+10,cy:this.radius+10,r:this.innerRadius+10,fill:"url(#gradS)"});this.c[4]=UIL.DOM(null,"circle",UIL.BASIC+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;",{cx:this.radius,cy:this.radius,r:this.innerRadius,fill:"url(#gradIn)","stroke-width":1,stroke:"#000"});this.c[5]=UIL.DOM(null,"div",UIL.TXT+"text-align:center; top:"+(this.height+20)+"px; width:"+this.width+"px; color:"+this.fontColor);
a=this.c[2];UIL.DOM(null,"defs",null,{},a);UIL.DOM(null,"radialGradient",null,{id:"grad",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},a,1);UIL.DOM(null,"stop",null,{offset:"40%",style:"stop-color:rgb(0,0,0); stop-opacity:0.3;"},a,[1,0]);UIL.DOM(null,"stop",null,{offset:"80%",style:"stop-color:rgb(0,0,0); stop-opacity:0;"},a,[1,0]);UIL.DOM(null,"stop",null,{offset:"90%",style:"stop-color:rgb(50,50,50); stop-opacity:0.4;"},a,[1,0]);UIL.DOM(null,"stop",null,{offset:"100%",style:"stop-color:rgb(50,50,50); stop-opacity:0;"},
a,[1,0]);a=this.c[3];UIL.DOM(null,"defs",null,{},a);UIL.DOM(null,"radialGradient",null,{id:"gradS",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},a,1);UIL.DOM(null,"stop",null,{offset:"60%",style:"stop-color:rgb(0,0,0); stop-opacity:0.5;"},a,[1,0]);UIL.DOM(null,"stop",null,{offset:"100%",style:"stop-color:rgb(0,0,0); stop-opacity:0;"},a,[1,0]);var b=["rgb(40,40,40)","rgb(48,48,48)","rgb(30,30,30)"],c=["rgb(1,90,197)","rgb(3,95,207)","rgb(0,65,167)"];a=this.c[4];UIL.DOM(null,"defs",null,{},a);UIL.DOM(null,
"radialGradient",null,{id:"gradIn",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},a,1);UIL.DOM(null,"stop",null,{offset:"30%",style:"stop-color:"+b[0]+"; stop-opacity:1;"},a,[1,0]);UIL.DOM(null,"stop",null,{offset:"60%",style:"stop-color:"+b[1]+"; stop-opacity:1;"},a,[1,0]);UIL.DOM(null,"stop",null,{offset:"80%",style:"stop-color:"+b[1]+"; stop-opacity:1;"},a,[1,0]);UIL.DOM(null,"stop",null,{offset:"100%",style:"stop-color:"+b[2]+"; stop-opacity:1;"},a,[1,0]);UIL.DOM(null,"radialGradient",null,{id:"gradIn2",
cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},this.c[4],1);UIL.DOM(null,"stop",null,{offset:"30%",style:"stop-color:"+c[0]+"; stop-opacity:1;"},a,[1,1]);UIL.DOM(null,"stop",null,{offset:"60%",style:"stop-color:"+c[1]+"; stop-opacity:1;"},a,[1,1]);UIL.DOM(null,"stop",null,{offset:"80%",style:"stop-color:"+c[1]+"; stop-opacity:1;"},a,[1,1]);UIL.DOM(null,"stop",null,{offset:"100%",style:"stop-color:"+c[2]+"; stop-opacity:1;"},a,[1,1]);this.c[5].textContent="x"+this.value[0]+" y"+this.value[1];this.c[2].events=
["mouseover","mousedown","mouseout"];this.init();this.update(!1)};UIL.Joystick.prototype=Object.create(UIL.Proto.prototype);UIL.Joystick.prototype.constructor=UIL.Joystick;UIL.Joystick.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "mouseover":this.over(a);break;case "mousedown":this.down(a);break;case "mouseout":this.out(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}};
UIL.Joystick.prototype.mode=function(a){switch(a){case 0:UIL.setSvg(this.c[4],"fill","url(#gradIn)");UIL.setSvg(this.c[4],"stroke","#000");break;case 1:UIL.setSvg(this.c[4],"fill","url(#gradIn2)"),UIL.setSvg(this.c[4],"stroke","rgba(0,0,0,0)")}};UIL.Joystick.prototype.over=function(a){this.isOver=!0;this.mode(1)};UIL.Joystick.prototype.out=function(a){this.isOver=!1;this.isDown||this.mode(0)};
UIL.Joystick.prototype.up=function(a){this.isDown=!1;document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1);this.interval=setInterval(this.update.bind(this),10);this.isOver?this.mode(1):this.mode(0)};UIL.Joystick.prototype.down=function(a){this.isDown=!0;document.addEventListener("mouseup",this,!1);document.addEventListener("mousemove",this,!1);this.rect=this.c[2].getBoundingClientRect();this.move(a);this.mode(2)};
UIL.Joystick.prototype.move=function(a){if(this.isDown){var b=this.radius-(a.clientX-this.rect.left);a=this.radius-(a.clientY-this.rect.top);Math.sqrt(b*b+a*a)>this.maxDistance&&(a=Math.atan2(b,a),b=Math.sin(a)*this.maxDistance,a=Math.cos(a)*this.maxDistance);this.x=b/this.maxDistance;this.y=a/this.maxDistance;this.update()}};UIL.Joystick.prototype.setValue=function(a,b){this.x=a||0;this.y=b||0;this.updateSVG()};
UIL.Joystick.prototype.update=function(a){void 0===a&&(a=!0);null!==this.interval&&(this.isDown||(this.x+=(0-this.x)/3,this.y+=(0-this.y)/3),this.x.toFixed(2)===this.oldx.toFixed(2)&&this.y.toFixed(2)===this.oldy.toFixed(2)&&(this.y=this.x=0));this.updateSVG();a&&this.send();null!==this.interval&&0===this.x&&0===this.y&&(clearInterval(this.interval),this.interval=null)};
UIL.Joystick.prototype.updateSVG=function(){var a=this.radius-this.x*this.maxDistance,b=this.radius-this.y*this.maxDistance,c=b+5*(1-this.y)+10;UIL.setSvg(this.c[3],"cx",a+5*(1-this.x)+5);UIL.setSvg(this.c[3],"cy",c);UIL.setSvg(this.c[4],"cx",a);UIL.setSvg(this.c[4],"cy",b);this.oldx=this.x;this.oldy=this.y;this.value[0]=1*-(this.x*this.multiplicator).toFixed(this.precision);this.value[1]=1*(this.y*this.multiplicator).toFixed(this.precision);this.c[5].textContent="x"+this.value[0]+" y"+this.value[1]};UIL.Fps=function(a){UIL.Proto.call(this,a);this.round=Math.round;this.autoHeight=!0;this.baseH=this.h;this.hplus=50;this.res=a.res||40;this.l=1;this.pa1=[];this.pa2=[];this.pa3=[];for(var b=this.res+1;b--;)this.pa1.push(50),this.pa2.push(50),this.pa3.push(50);b=Math.floor(0.5*this.h)-6;this.c[1].textContent="FPS";this.c[0].style.cursor="pointer";this.c[0].style.pointerEvents="auto";this.c[2]=UIL.DOM(null,"path",UIL.BASIC+("display:none; left:10px; top:"+this.h+"px; height:"+(this.hplus-8)+"px; background: rgba(0, 0, 0, 0.2);border:1px solid rgba(255, 255, 255, 0.2); "),
{fill:"rgba(200,200,200,0.3)","stroke-width":1,stroke:this.fontColor,"vector-effect":"non-scaling-stroke"});this.c[2].setAttribute("viewBox","0 0 "+this.res+" 42");this.c[2].setAttribute("height","100%");this.c[2].setAttribute("width","100%");this.c[2].setAttribute("preserveAspectRatio","none");UIL.DOM(null,"path",null,{fill:"rgba(255,255,0,0.3)","stroke-width":1,stroke:"#FF0","vector-effect":"non-scaling-stroke"},this.c[2]);UIL.DOM(null,"path",null,{fill:"rgba(0,255,255,0.3)","stroke-width":1,stroke:"#0FF",
"vector-effect":"non-scaling-stroke"},this.c[2]);this.c[3]=UIL.DOM(null,"div",UIL.BASIC+"width:100%; bottom:0px; height:1px; background: rgba(255, 255, 255, 0.2);");this.c[4]=UIL.DOM(null,"path",UIL.BASIC+"position:absolute; width:10px; height:10px; left:4px; top:"+b+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"});this.isShow=a.show||!1;this.c[1].style.marginLeft="10px";this.now=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now;this.prevTime=
this.startTime=this.now();this.frames=0;this.isMem=!1;this.mm=this.mem=this.fps=this.ms=0;self.performance&&self.performance.memory&&(this.isMem=!0);this.c[0].events=["click","mousedown","mouseover","mouseout"];this.init()};UIL.Fps.prototype=Object.create(UIL.Proto.prototype);UIL.Fps.prototype.constructor=UIL.Fps;UIL.Fps.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "click":this.click(a);break;case "mouseover":this.mode(1);break;case "mousedown":this.mode(2);break;case "mouseout":this.mode(0)}};
UIL.Fps.prototype.click=function(a){this.isShow?this.hide():this.show()};UIL.Fps.prototype.mode=function(a){var b=this.s;switch(a){case 0:b[1].color=this.fontColor;break;case 1:b[1].color="#FFF";break;case 2:b[1].color=this.fontColor}};UIL.Fps.prototype.makePath=function(a){var b;b="M -1 50";for(var c=0;c<this.res+1;c++)b+=" L "+c+" "+a[c];return b+=" L "+(this.res+1)+" 50"};
UIL.Fps.prototype.drawGraph=function(){var a=this.c[2];this.pa1.shift();this.pa1.push(8.5+this.round(30*(1-this.fps/100)));UIL.setSvg(a,"d",this.makePath(this.pa1),0);this.pa2.shift();this.pa2.push(8.5+this.round(30*(1-this.ms/200)));UIL.setSvg(a,"d",this.makePath(this.pa2),1);this.isMem&&(this.pa3.shift(),this.pa3.push(8.5+this.round(30*(1-this.mm))),UIL.setSvg(a,"d",this.makePath(this.pa3),2))};
UIL.Fps.prototype.show=function(){this.h=this.hplus+this.baseH;UIL.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z");null!==this.parentGroup?this.parentGroup.calc(this.hplus):this.isUI&&this.main.calc(this.hplus);this.s[0].height=this.h+"px";this.s[2].display="block";this.isShow=!0;UIL.addListen(this)};
UIL.Fps.prototype.hide=function(){this.h=this.baseH;UIL.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z");null!==this.parentGroup?this.parentGroup.calc(-this.hplus):this.isUI&&this.main.calc(-this.hplus);this.s[0].height=this.h+"px";this.s[2].display="none";this.isShow=!1;UIL.removeListen(this);this.c[1].textContent="FPS"};UIL.Fps.prototype.rSize=function(){this.s[0].width=this.width+"px";this.s[1].width=this.width+"px";this.s[2].left="10px";this.s[2].width=this.width-20+"px"};
UIL.Fps.prototype.begin=function(){this.startTime=this.now()};
UIL.Fps.prototype.end=function(){var a=this.now();this.ms=a-this.startTime;this.frames++;if(a>this.prevTime+1E3&&(this.fps=this.round(1E3*this.frames/(a-this.prevTime)),this.prevTime=a,this.frames=0,this.isMem)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;this.mem=this.round(9.54E-7*b);this.mm=b/c}this.drawGraph();this.c[1].innerHTML="FPS "+this.fps+'<font color="yellow"> MS '+(this.ms|0)+'</font><font color="cyan"> MB '+this.mem+"</font>";return a};
UIL.Fps.prototype.listening=function(){this.startTime=this.end()};
