(function(l,m){"object"===typeof exports&&"undefined"!==typeof module?m(exports):"function"===typeof define&&define.amd?define(["exports"],m):(l=l||self,m(l.UIL={}))})(this,function(l){function m(a,b){this.x=a||0;this.y=b||0}function h(a){a=a||{};this.main=a.main||null;this.isUI=a.isUI||!1;this.parentGroup=null;this.css=this.main?this.main.css:g.css;this.colors=this.main?this.main.colors:g.colors;this.defaultBorderColor=this.colors.border;this.svgs=g.svgs;this.isEmpty=a.isEmpty||!1;this.zone={x:0,
y:0,w:0,h:0};this.local=(new m).neg();this.isSelect=this.isCanvasOnly=!1;this.p=void 0!==a.p?a.p:g.size.p;this.w=this.isUI?this.main.size.w:g.size.w;void 0!==a.w&&(this.w=a.w);this.h=this.isUI?this.main.size.h:g.size.h;void 0!==a.h&&(this.h=a.h);this.isEmpty||(this.h=11>this.h?11:this.h);this.autoWidth=a.auto||!0;this.isOpen=!1;this.radius=a.radius||0;this.isEdit=this.mono=this.isNumber=!1;if(this.simple=a.simple||!1)this.sa=0;this.setSize(this.w);void 0!==a.sa&&(this.sa=a.sa);void 0!==a.sb&&(this.sb=
a.sb);this.simple&&(this.sb=this.w-this.sa);this.sc=void 0===a.sc?47:a.sc;this.objectLink=null;this.isSend=!1;this.val=null;this.bg=this.colors.background;this.bgOver=this.colors.backgroundOver;void 0!==a.bg&&(this.bgOver=this.bg=a.bg);void 0!==a.bgOver&&(this.bgOver=a.bgOver);this.titleColor=a.titleColor||this.colors.text;this.fontColor=a.fontColor||this.colors.text;void 0!==a.color&&("n"===a.color&&(a.color="#ff0000"),"no"!==a.color&&(isNaN(a.color)?this.fontColor=a.color:this.fontColor=g.hexToHtml(a.color),
this.titleColor=this.fontColor));this.colorPlus=g.ColorLuma(this.fontColor,.3);this.txt=a.name||"Proto";this.rename=a.rename||"";this.target=a.target||null;this.callback=void 0===a.callback?null:a.callback;this.endCallback=null;null===this.callback&&this.isUI&&null!==this.main.callback&&(this.callback=this.main.callback);this.c=[];this.s=[];this.c[0]=g.dom("div",this.css.basic+"position:relative; height:20px; float:left; overflow:hidden;");this.s[0]=this.c[0].style;this.isUI&&(this.s[0].marginBottom=
"1px");this.simple||(this.c[1]=g.dom("div",this.css.txt),this.s[1]=this.c[1].style,this.c[1].textContent=""===this.rename?this.txt:this.rename,this.s[1].color=this.titleColor);if(a.pos){this.s[0].position="absolute";for(var b in a.pos)this.s[0][b]=a.pos[b];this.mono=!0}a.css&&(this.s[0].cssText=a.css)}function t(a){h.call(this,a);this.value=a.value||!1;this.buttonColor=a.bColor||this.colors.button;this.inh=a.inh||this.h;a=Math.floor(.5*this.h)-.5*(this.inh-2);this.c[2]=this.dom("div",this.css.basic+
"background:"+this.colors.boolbg+"; height:"+(this.inh-2)+"px; width:36px; top:"+a+"px; border-radius:10px; border:2px solid "+this.boolbg);this.c[3]=this.dom("div",this.css.basic+"height:"+(this.inh-6)+"px; width:16px; top:"+(a+2)+"px; border-radius:10px; background:"+this.buttonColor+";");this.init();this.update()}function u(a){h.call(this,a);this.value=!1;this.values=a.value||this.txt;"string"===typeof this.values&&(this.values=[this.values]);this.isDown=!1;this.buttonColor=a.bColor||this.colors.button;
this.isLoadButton=a.loader||!1;if(this.isDragButton=a.drag||!1)this.isLoadButton=!0;this.lng=this.values.length;this.tmp=[];this.stat=[];for(a=0;a<this.lng;a++)this.c[a+2]=this.dom("div",this.css.txt+"text-align:center; top:1px; background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+"px; line-height:"+(this.h-4)+"px;"),this.c[a+2].style.color=this.fontColor,this.c[a+2].innerHTML=this.values[a],this.stat[a]=1;void 0!==this.c[1]&&(this.c[1].textContent="");this.isLoadButton&&
this.initLoader();this.isDragButton&&(this.lng++,this.initDrager());this.init()}function r(a){h.call(this,a);this.autoWidth=!1;this.buttonColor=this.colors.button;this.setTypeNumber(a);this.radius=.5*this.w;this.twoPi=2*Math.PI;this.pi90=.5*Math.PI;this.offset=new m;this.h=a.h||this.w+10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10);this.cmode=this.percent=0;this.c[2]=this.dom("div",this.css.txt+
"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[3]=this.getCircular();this.setSvg(this.c[3],"d",this.makePath(),1);this.setSvg(this.c[3],"stroke",this.fontColor,1);this.setSvg(this.c[3],"viewBox","0 0 "+this.w+" "+this.w);this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top});this.init();this.update()}function v(a){h.call(this,a);this.ctype=a.ctype||"array";this.wfixe=256<this.sb?256:this.sb;this.side=a.side||"down";this.up="down"===this.side?
0:1;this.baseH=this.h;this.offset=new m;this.decal=new m;this.pi90=.5*Math.PI;this.c[2]=this.dom("div",this.css.txt+"height:"+(this.h-4)+"px;border-radius:"+this.radius+"px; line-height:"+(this.h-8)+"px;");this.s[2]=this.c[2].style;this.up&&(this.s[2].top="auto",this.s[2].bottom="2px");this.c[3]=this.getColorRing();this.c[3].style.visibility="hidden";this.hsl=null;this.value="#ffffff";void 0!==a.value&&(a.value instanceof Array?this.value=g.rgbToHex(a.value):isNaN(a.value)?this.value=a.value:this.value=
g.hexToHtml(a.value));this.bcolor=null;this.isDown=!1;this.setColor(this.value);this.init();void 0!==a.open&&this.open()}function w(a){h.call(this,a);this.round=Math.round;this.autoHeight=!0;this.baseH=this.h;this.hplus=a.hplus||50;this.res=a.res||40;this.l=1;this.precision=a.precision||0;this.custom=a.custom||!1;this.names=a.names||["FPS","MS"];var b=a.cc||["90,90,90","255,255,0"];this.adding=a.adding||!1;this.range=a.range||[165,100,100];this.alpha=a.alpha||.25;this.values=[];this.points=[];this.textDisplay=
[];if(!this.custom){this.now=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now;this.mm=this.mem=this.fps=this.ms=this.frames=this.prevTime=this.startTime=0;if(this.isMem=self.performance&&self.performance.memory?!0:!1)this.names.push("MEM"),b.push("0,255,255");this.txt="FPS"}var c=Math.floor(.5*this.h)-6;this.c[1].textContent=this.txt;this.c[0].style.cursor="pointer";this.c[0].style.pointerEvents="auto";var d="display:none; left:10px; top:"+this.h+"px; height:"+
(this.hplus-8)+"px; box-sizing:border-box; background: rgba(0, 0, 0, 0.2); border:"+("none"!==this.colors.groupBorder?this.colors.groupBorder+";":"1px solid rgba(255, 255, 255, 0.2);");0!==this.radius&&(d+="border-radius:"+this.radius+"px;");this.c[2]=this.dom("path",this.css.basic+d,{});this.c[2].setAttribute("viewBox","0 0 "+this.res+" 50");this.c[2].setAttribute("height","100%");this.c[2].setAttribute("width","100%");this.c[2].setAttribute("preserveAspectRatio","none");this.c[3]=this.dom("path",
this.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+c+"px;",{d:this.svgs.arrow,fill:this.fontColor,stroke:"none"});this.c[4]=this.dom("div",this.css.txt+"position:absolute; left:10px; top:"+(this.h+2)+"px; display:none; width:100%; text-align:center;");a.bottomLine&&(this.c[4]=this.dom("div",this.css.basic+"width:100%; bottom:0px; height:1px; background: rgba(255, 255, 255, 0.2);"));this.isShow=!1;a=this.s;a[1].marginLeft="10px";a[1].lineHeight=this.h-4;a[1].color=this.fontColor;
a[1].fontWeight="bold";0!==this.radius&&(a[0].borderRadius=this.radius+"px");a[0].border=this.colors.groupBorder;for(a=0;a<this.names.length;a++){c=[];for(d=this.res+1;d--;)c.push(50);this.range[a]=1/this.range[a]*49;this.points.push(c);this.values.push(0);this.textDisplay.push("<span style='color:rgb("+b[a]+")'> "+this.names[a]+" ")}for(a=this.names.length;a--;)this.dom("path",null,{fill:"rgba("+b[a]+","+this.alpha+")","stroke-width":1,stroke:"rgba("+b[a]+",1)","vector-effect":"non-scaling-stroke"},
this.c[2]);this.init()}function F(a){h.call(this,a);this.value=void 0!==a.value?a.value:[0,0,0];this.lng=this.value.length;this.precision=void 0!==a.precision?a.precision:2;this.multiplicator=a.multiplicator||1;this.neg=a.neg||!1;this.line=void 0!==a.line?a.line:!0;this.autoWidth=void 0!==a.autoWidth?a.autoWidth:!0;this.isDown=this.isNumber=!1;this.h=a.h||138;this.rh=this.h-10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.top=10,this.h+=10);
this.gh=this.rh-28;this.gw=this.w-28;this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[2].textContent=this.value;a=this.dom("svg",this.css.basic,{viewBox:"0 0 "+this.w+" "+this.rh,width:this.w,height:this.rh,preserveAspectRatio:"none"});this.setCss(a,{width:this.w,height:this.rh,left:0,top:this.top});this.dom("path","",{d:"",stroke:this.colors.text,"stroke-width":2,fill:"none","stroke-linecap":"butt"},a);this.dom("rect",
"",{x:10,y:10,width:this.gw+8,height:this.gh+8,stroke:"rgba(0,0,0,0.3)","stroke-width":1,fill:"none"},a);this.iw=(this.gw-4*(this.lng-1))/this.lng;var b=[];this.cMode=[];this.v=[];for(var c=0;c<this.lng;c++)b[c]=[14+c*this.iw+4*c,this.iw],b[c][2]=b[c][0]+b[c][1],this.cMode[c]=0,this.v[c]=this.neg?.5*(1+this.value[c]/this.multiplicator):this.value[c]/this.multiplicator,this.dom("rect","",{x:b[c][0],y:14,width:b[c][1],height:1,fill:this.fontColor,"fill-opacity":.3},a);this.tmp=b;this.c[3]=a;this.init();
void 0!==this.c[1]&&(this.c[1].style.top="0px",this.c[1].style.height="20px",this.s[1].lineHeight="15px");this.update(!1)}function x(a){h.call(this,a);this.ADD=a.add;this.uis=[];this.autoHeight=!0;this.current=-1;this.target=null;this.decal=0;this.baseH=this.h;var b=Math.floor(.5*this.h)-6;this.isLine=void 0!==a.line?a.line:!1;this.c[2]=this.dom("div",this.css.basic+"width:100%; left:0; height:auto; overflow:hidden; top:"+this.h+"px");this.c[3]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:0; top:"+
b+"px;",{d:this.svgs.group,fill:this.fontColor,stroke:"none"});this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+b+"px;",{d:this.svgs.arrow,fill:this.fontColor,stroke:"none"});this.isLine&&(this.c[5]=this.dom("div",this.css.basic+"background:rgba(255, 255, 255, 0.2); width:100%; left:0; height:1px; bottom:0px"));b=this.s;b[0].height=this.h+"px";b[1].height=this.h+"px";this.c[1].name="group";b[1].marginLeft="10px";b[1].lineHeight=this.h-4;b[1].color=
this.fontColor;b[1].fontWeight="bold";0!==this.radius&&(b[0].borderRadius=this.radius+"px");b[0].border=this.colors.groupBorder;this.init();void 0!==a.bg&&this.setBG(a.bg);void 0!==a.open&&this.open()}function y(a){h.call(this,a);this.autoWidth=!1;this.value=[0,0];this.joyType="analogique";this.model=void 0!==a.mode?a.mode:0;this.precision=a.precision||2;this.multiplicator=a.multiplicator||1;this.pos=new m;this.tmp=new m;this.interval=null;this.radius=.5*this.w;this.distance=.25*this.radius;this.h=
a.h||this.w+10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10);this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[2].textContent=this.value;this.c[3]=this.getJoystick(this.model);this.setSvg(this.c[3],"viewBox","0 0 "+this.w+" "+this.w);this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top});
this.ratio=128/this.w;this.init();this.update(!1)}function z(a){h.call(this,a);this.autoWidth=!1;this.buttonColor=this.colors.button;this.setTypeNumber(a);this.mPI=.8*Math.PI;this.toDeg=180/Math.PI;this.cirRange=2*this.mPI;this.offset=new m;this.radius=.5*this.w;this.h=a.h||this.w+10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10);this.cmode=this.percent=0;this.c[2]=this.dom("div",this.css.txt+
"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[3]=this.getKnob();this.setSvg(this.c[3],"stroke",this.fontColor,1);this.setSvg(this.c[3],"stroke",this.fontColor,3);this.setSvg(this.c[3],"d",this.makeGrad(),3);this.setSvg(this.c[3],"viewBox","0 0 "+this.ww+" "+this.ww);this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top});this.r=0;this.init();this.update()}function A(a){h.call(this,a);this.path=a.path||"";this.format=a.format||"";this.imageSize=
a.imageSize||[20,20];this.isWithImage=""!==this.path?!0:!1;this.preLoadComplete=!1;this.tmpImage={};this.tmpUrl=[];this.autoHeight=!1;var b=a.align||"center";this.tMode=this.sMode=0;this.buttonColor=a.bColor||this.colors.button;var c=Math.floor(.5*this.h)-5;this.c[2]=this.dom("div",this.css.basic+"top:0; display:none;");this.c[3]=this.dom("div",this.css.txt+"text-align:"+b+"; line-height:"+(this.h-4)+"px; top:1px; background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+
"px;");this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; top:"+c+"px;",{d:this.svgs.arrow,fill:this.fontColor,stroke:"none"});this.scroller=this.dom("div",this.css.basic+"right:5px;  width:10px; background:#666; display:none;");this.c[3].style.color=this.fontColor;this.list=a.list||[];this.items=[];this.prevName="";this.baseH=this.h;this.itemHeight=a.itemHeight||this.h-3;this.full=a.full||!1;this.py=0;this.ww=this.sb;this.isDown=this.scroll=!1;this.current=null;
this.side=a.side||"down";(this.up="down"===this.side?0:1)?(this.c[2].style.top="auto",this.c[3].style.top="auto",this.c[4].style.top="auto",this.c[2].style.bottom=this.h-2+"px",this.c[3].style.bottom="1px",this.c[4].style.bottom=c+"px"):this.c[2].style.top=this.baseH+"px";this.listIn=this.dom("div",this.css.basic+"left:0; top:0; width:100%; background:rgba(0,0,0,0.2);");this.listIn.name="list";this.topList=0;this.c[2].appendChild(this.listIn);this.c[2].appendChild(this.scroller);void 0!==a.value?
isNaN(a.value)?this.value=a.value:this.value=this.list[a.value]:this.value=this.list[0];this.isOpenOnStart=a.open||!1;this.isWithImage&&this.preloadImage();this.setList(this.list);this.init();this.isOpenOnStart&&this.open()}function B(a){h.call(this,a);this.setTypeNumber(a);this.allway=a.allway||!1;this.isDown=!1;this.value=[0];this.toRad=1;this.isNumber=!0;this.isVector=this.isAngle=!1;this.isDrag=a.drag||!1;void 0!==a.value&&(isNaN(a.value)?a.value instanceof Array?(this.value=a.value,this.isNumber=
!1):a.value instanceof Object&&(this.value=[],a.value.x&&(this.value[0]=a.value.x),a.value.y&&(this.value[1]=a.value.y),a.value.z&&(this.value[2]=a.value.z),a.value.w&&(this.value[3]=a.value.w),this.isVector=!0):this.value=[a.value]);this.lng=this.value.length;this.tmp=[];a.isAngle&&(this.isAngle=!0,this.toRad=Math.PI/180);this.current=-1;this.prev={x:0,y:0,d:0,v:0};this.c[2]=this.dom("div",this.css.basic+" background:"+this.colors.select+"; top:4px; width:0px; height:"+(this.h-8)+"px;");this.cMode=
[];for(var b=this.lng;b--;)this.isAngle&&(this.value[b]=(180*this.value[b]/Math.PI).toFixed(this.precision)),this.c[3+b]=this.dom("div",this.css.txtselect+" height:"+(this.h-4)+"px; line-height:"+(this.h-8)+"px;"),a.center&&(this.c[2+b].style.textAlign="center"),this.c[3+b].textContent=this.value[b],this.c[3+b].style.color=this.fontColor,this.c[3+b].isNum=!0,this.cMode[b]=0;this.cursorId=3+this.lng;this.c[this.cursorId]=this.dom("div",this.css.basic+"top:4px; height:"+(this.h-8)+"px; width:0px; background:"+
this.fontColor+";");this.init()}function C(a){h.call(this,a);this.setTypeNumber(a);this.model=a.stype||0;void 0!==a.mode&&(this.model=a.mode);this.buttonColor=a.bColor||this.colors.button;this.defaultBorderColor=this.colors.hide;this.isOver=this.isDown=!1;this.allway=a.allway||!1;this.firstImput=!1;this.c[2]=this.dom("div",this.css.txtselect+"text-align:right; width:47px; border:1px dashed "+this.defaultBorderColor+"; color:"+this.fontColor);this.c[3]=this.dom("div",this.css.basic+" top:0; height:"+
this.h+"px;");this.c[4]=this.dom("div",this.css.basic+"background:"+this.colors.scrollback+"; top:2px; height:"+(this.h-4)+"px;");this.c[5]=this.dom("div",this.css.basic+"left:4px; top:5px; height:"+(this.h-10)+"px; background:"+this.fontColor+";");this.c[2].isNum=!0;this.c[2].style.height=this.h-2+"px";this.c[2].style.lineHeight=this.h-10+"px";if(0!==this.model){if(1===this.model||3===this.model)var b=4,c=8,d=this.h-4,e=20;2===this.model&&(b=4,c=8,e=2,d=.5*(this.h-4));3===this.model&&(this.c[5].style.visible=
"none");this.c[4].style.borderRadius=b+"px";this.c[4].style.height=c+"px";this.c[4].style.top=.5*this.h-b+"px";this.c[5].style.borderRadius=.5*b+"px";this.c[5].style.height=b+"px";this.c[5].style.top=.5*this.h-.5*b+"px";this.c[6]=this.dom("div",this.css.basic+"border-radius:"+e+"px; margin-left:"+.5*-d+"px; border:1px solid "+this.colors.border+"; background:"+this.buttonColor+"; left:4px; top:2px; height:"+(this.h-4)+"px; width:"+d+"px;")}this.init()}function D(a){h.call(this,a);this.cmode=0;this.value=
a.value||"";this.placeHolder=a.placeHolder||"";this.allway=a.allway||!1;this.isDown=!1;this.c[2]=this.dom("div",this.css.basic+" background:"+this.colors.select+"; top:4px; width:0px; height:"+(this.h-8)+"px;");this.c[3]=this.dom("div",this.css.txtselect+"height:"+(this.h-4)+"px; line-height:"+(this.h-8)+"px; background:"+this.colors.inputBg+"; borderColor:"+this.colors.inputBorder+"; border-radius:"+this.radius+"px;");this.c[3].textContent=this.value;this.c[4]=this.dom("div",this.css.basic+"top:4px; height:"+
(this.h-8)+"px; width:0px; background:"+this.fontColor+";");this.init()}function E(a){h.call(this,a);a=a.prefix||"";this.c[2]=this.dom("div",this.css.txt+"text-align:right; width:60px; line-height:"+(this.h-8)+"px; color:"+this.fontColor);31===this.h&&(this.s[0].height=this.h+"px",this.s[1].top="8px",this.c[2].style.top="8px");this.c[1].textContent=this.txt.substring(0,1).toUpperCase()+this.txt.substring(1).replace("-"," ");this.c[2].textContent=a;this.init()}function G(a){h.call(this,a);this.values=
a.values;"string"===typeof this.values&&(this.values=[this.values]);this.value=a.value||this.values[0];this.isDown=!1;this.buttonColor=a.bColor||this.colors.button;this.lng=this.values.length;this.tmp=[];this.stat=[];for(var b=0;b<this.lng;b++)a=!1,this.values[b]===this.value&&(a=!0),this.c[b+2]=this.dom("div",this.css.txt+"text-align:center; top:1px; background:"+(a?this.colors.select:this.buttonColor)+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+"px; line-height:"+(this.h-4)+"px;"),this.c[b+
2].style.color=a?"#FFF":this.fontColor,this.c[b+2].innerHTML=this.values[b],this.stat[b]=a?3:1;this.init()}function H(a){a.simple=!0;a.isEmpty=!0;h.call(this,a);this.init()}function I(a){h.call(this,a);this.p=100;this.value=this.txt;this.status=1;this.graph=this.svgs[a.itype||"none"];this.c[2]=this.dom("path",this.css.basic+"position:absolute; width:14px; height:14px; left:5px; top:"+(Math.floor(.5*this.h)-7)+"px;",{d:this.graph,fill:this.fontColor,stroke:"none"});this.s[1].marginLeft="20px";this.init()}
function J(){var a=arguments,b=!1,c=null;if("string"===typeof a[0]){var d=a[0];var e=a[1]||{}}else"object"===typeof a[0]&&(b=!0,void 0===a[2]&&[].push.call(a,{}),d=a[2].type?a[2].type:"slide",e=a[2],e.name=a[1],e.value=a[0][a[1]]);d=d.toLowerCase();"group"===d&&(e.add=J);switch(d){case "bool":c=new t(e);break;case "button":c=new u(e);break;case "circular":c=new r(e);break;case "color":c=new v(e);break;case "fps":c=new w(e);break;case "graph":c=new F(e);break;case "group":c=new x(e);break;case "joystick":c=
new y(e);break;case "knob":c=new z(e);break;case "list":c=new A(e);break;case "numeric":case "number":c=new B(e);break;case "slide":c=new C(e);break;case "textInput":case "string":c=new D(e);break;case "title":c=new E(e);break;case "selector":c=new G(e);break;case "empty":case "space":c=new H(e);break;case "item":c=new I(e)}if(null!==c)return b&&c.setReferency(a[0],a[1]),c}function K(a){this.canvas=null;a=a||{};this.colors=g.cloneColor();this.css=g.cloneCss();a.config&&this.setConfig(a.config);this.bg=
a.bg||this.colors.background;void 0!==a.transparent&&(this.colors.background="none",this.colors.backgroundOver="none");this.isReset=!0;this.tmpAdd=null;this.tmpH=0;this.isCanvas=a.isCanvas||!1;this.isCanvasOnly=!1;this.cssGui=void 0!==a.css?a.css:"";this.callback=void 0===a.callback?null:a.callback;this.forceHeight=a.maxHeight||0;this.lockHeight=a.lockHeight||!1;this.isItemMode=void 0!==a.itemMode?a.itemMode:!1;this.cn="";this.size=g.size;void 0!==a.p&&(this.size.p=a.p);void 0!==a.w&&(this.size.w=
a.w);void 0!==a.h&&(this.size.h=a.h);void 0!==a.s&&(this.size.s=a.s);this.size.h=11>this.size.h?11:this.size.h;this.local=(new m).neg();this.zone={x:0,y:0,w:this.size.w,h:0};this.mouse=(new m).neg();this.h=0;this.prevY=-1;this.sw=0;this.bh=(this.isWithClose=void 0!==a.close?a.close:!0)?this.size.h:0;this.autoResize=void 0===a.autoResize?!0:a.autoResize;this.isCenter=a.center||!1;this.isOpen=!0;this.isScroll=this.isDown=!1;this.uis=[];this.current=-1;this.target=null;this.decal=0;this.ratio=1;this.oy=
0;this.isNewTarget=!1;this.content=g.dom("div",this.css.basic+" width:0px; height:auto; top:0px; "+this.cssGui);this.innerContent=g.dom("div",this.css.basic+"width:100%; top:0; left:0; height:auto; overflow:hidden;");this.content.appendChild(this.innerContent);this.inner=g.dom("div",this.css.basic+"width:100%; left:0; ");this.innerContent.appendChild(this.inner);this.scrollBG=g.dom("div",this.css.basic+"right:0; top:0; width:"+(this.size.s-1)+"px; height:10px; display:none; background:"+this.bg+";");
this.content.appendChild(this.scrollBG);this.scroll=g.dom("div",this.css.basic+"background:"+this.colors.scroll+"; right:2px; top:0; width:"+(this.size.s-4)+"px; height:10px;");this.scrollBG.appendChild(this.scroll);this.bottom=g.dom("div",this.css.txt+"width:100%; top:auto; bottom:0; left:0; border-bottom-right-radius:10px;  border-bottom-left-radius:10px; text-align:center; height:"+this.bh+"px; line-height:"+(this.bh-5)+"px; border-top:1px solid "+g.colors.stroke+";");this.content.appendChild(this.bottom);
this.bottom.textContent="close";this.bottom.style.background=this.bg;this.parent=void 0!==a.parent?a.parent:null;null!==this.parent||this.isCanvas||(this.parent=document.body,this.isCenter||(this.content.style.right="10px"));null!==this.parent&&this.parent.appendChild(this.content);this.isCanvas&&null===this.parent&&(this.isCanvasOnly=!0);this.isCanvasOnly||(this.content.style.pointerEvents="auto");this.setWidth();this.isCanvas&&this.makeCanvas();k.add(this)}void 0===Number.EPSILON&&(Number.EPSILON=
Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,
e)&&(b[e]=d[e])}return b}}();var f={frag:document.createDocumentFragment(),colorRing:null,joystick_0:null,joystick_1:null,circular:null,knob:null,svgns:"http://www.w3.org/2000/svg",htmls:"http://www.w3.org/1999/xhtml",DOM_SIZE:"height width top left bottom right margin-left margin-right margin-top margin-bottom".split(" "),SVG_TYPE_D:"pattern defs transform stop animate radialGradient linearGradient animateMotion".split(" "),SVG_TYPE_G:"svg rect circle path polygon text g line foreignObject".split(" "),
TwoPI:6.283185307179586,size:{w:240,h:20,p:30,s:20},cloneColor:function(){return Object.assign({},f.colors)},cloneCss:function(){return Object.assign({},f.css)},colors:{text:"#C0C0C0",textOver:"#FFFFFF",txtselectbg:"none",background:"rgba(44,44,44,0.3)",backgroundOver:"rgba(11,11,11,0.5)",inputBorder:"#454545",inputBorderSelect:"#005AAA",inputBg:"rgba(0,0,0,0.2)",inputOver:"rgba(80,80,170,0.2)",border:"#454545",borderOver:"#5050AA",borderSelect:"#308AFF",scrollback:"rgba(44,44,44,0.2)",scrollbackover:"rgba(44,44,44,0.2)",
button:"#404040",boolbg:"#181818",boolon:"#C0C0C0",select:"#308AFF",moving:"#03afff",down:"#024699",over:"#024699",stroke:"rgba(11,11,11,0.5)",scroll:"#333333",hide:"rgba(0,0,0,0)",groupBorder:"none"},css:{basic:"position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; overflow:hidden; -o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;"},svgs:{group:"M 7 7 L 7 8 8 8 8 7 7 7 M 5 7 L 5 8 6 8 6 7 5 7 M 3 7 L 3 8 4 8 4 7 3 7 M 7 5 L 7 6 8 6 8 5 7 5 M 6 6 L 6 5 5 5 5 6 6 6 M 7 3 L 7 4 8 4 8 3 7 3 M 6 4 L 6 3 5 3 5 4 6 4 M 3 5 L 3 6 4 6 4 5 3 5 M 3 3 L 3 4 4 4 4 3 3 3 Z",
arrow:"M 3 8 L 8 5 3 2 3 8 Z",arrowDown:"M 5 8 L 8 3 2 3 5 8 Z",arrowUp:"M 5 2 L 2 7 8 7 5 2 Z",solid:"M 13 10 L 13 1 4 1 1 4 1 13 10 13 13 10 M 11 3 L 11 9 9 11 3 11 3 5 5 3 11 3 Z",body:"M 13 10 L 13 1 4 1 1 4 1 13 10 13 13 10 M 11 3 L 11 9 9 11 3 11 3 5 5 3 11 3 M 5 4 L 4 5 4 10 9 10 10 9 10 4 5 4 Z",vehicle:"M 13 6 L 11 1 3 1 1 6 1 13 3 13 3 11 11 11 11 13 13 13 13 6 M 2.4 6 L 4 2 10 2 11.6 6 2.4 6 M 12 8 L 12 10 10 10 10 8 12 8 M 4 8 L 4 10 2 10 2 8 4 8 Z",articulation:"M 13 9 L 12 9 9 2 9 1 5 1 5 2 2 9 1 9 1 13 5 13 5 9 4 9 6 5 8 5 10 9 9 9 9 13 13 13 13 9 Z",
character:"M 13 4 L 12 3 9 4 5 4 2 3 1 4 5 6 5 8 4 13 6 13 7 9 8 13 10 13 9 8 9 6 13 4 M 6 1 L 6 3 8 3 8 1 6 1 Z",terrain:"M 13 8 L 12 7 Q 9.06 -3.67 5.95 4.85 4.04 3.27 2 7 L 1 8 7 13 13 8 M 3 8 Q 3.78 5.420 5.4 6.6 5.20 7.25 5 8 L 7 8 Q 8.39 -0.16 11 8 L 7 11 3 8 Z",joint:"M 7.7 7.7 Q 8 7.45 8 7 8 6.6 7.7 6.3 7.45 6 7 6 6.6 6 6.3 6.3 6 6.6 6 7 6 7.45 6.3 7.7 6.6 8 7 8 7.45 8 7.7 7.7 M 3.35 8.65 L 1 11 3 13 5.35 10.65 Q 6.1 11 7 11 8.28 11 9.25 10.25 L 7.8 8.8 Q 7.45 9 7 9 6.15 9 5.55 8.4 5 7.85 5 7 5 6.54 5.15 6.15 L 3.7 4.7 Q 3 5.712 3 7 3 7.9 3.35 8.65 M 10.25 9.25 Q 11 8.28 11 7 11 6.1 10.65 5.35 L 13 3 11 1 8.65 3.35 Q 7.9 3 7 3 5.7 3 4.7 3.7 L 6.15 5.15 Q 6.54 5 7 5 7.85 5 8.4 5.55 9 6.15 9 7 9 7.45 8.8 7.8 L 10.25 9.25 Z",
ray:"M 9 11 L 5 11 5 12 9 12 9 11 M 12 5 L 11 5 11 9 12 9 12 5 M 11.5 10 Q 10.9 10 10.45 10.45 10 10.9 10 11.5 10 12.2 10.45 12.55 10.9 13 11.5 13 12.2 13 12.55 12.55 13 12.2 13 11.5 13 10.9 12.55 10.45 12.2 10 11.5 10 M 9 10 L 10 9 2 1 1 2 9 10 Z",collision:"M 11 12 L 13 10 10 7 13 4 11 2 7.5 5.5 9 7 7.5 8.5 11 12 M 3 2 L 1 4 4 7 1 10 3 12 8 7 3 2 Z",none:"M 9 5 L 5 5 5 9 9 9 9 5 Z"},setText:function(a,b,c,d,e,n){b=b||"#CCC";e=e||f.colors;n=n||f.css;e.text=b;n.txt=n.basic+"font-family:"+(c||"Consolas,monaco,monospace;")+
"; font-size:"+(a||13)+"px; color:"+b+"; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;";d&&(n.txt+=" text-shadow:"+d+"; ");n.txtselect=n.txt+"padding:2px 5px; border:1px dashed "+e.border+"; background:"+e.txtselectbg+";";n.item=n.txt+"position:relative; background:rgba(0,0,0,0.2); margin-bottom:1px;"},clone:function(a){return a.cloneNode(!0)},setSvg:function(a,b,c,d){-1===d?a.setAttributeNS(null,b,c):a.childNodes[d||0].setAttributeNS(null,b,c)},
setCss:function(a,b){for(var c in b)-1!==f.DOM_SIZE.indexOf(c)?a.style[c]=b[c]+"px":a.style[c]=b[c]},set:function(a,b){for(var c in b)"txt"===c&&(a.textContent=b[c]),a.setAttributeNS(null,c,b[c])},get:function(a,b){if(void 0===b)return a;if(!isNaN(b))return a.childNodes[b];if(b instanceof Array){if(2===b.length)return a.childNodes[b[0]].childNodes[b[1]];if(3===b.length)return a.childNodes[b[0]].childNodes[b[1]].childNodes[b[2]]}},dom:function(a,b,c,d,e){a=a||"div";-1!==f.SVG_TYPE_D.indexOf(a)||-1!==
f.SVG_TYPE_G.indexOf(a)?"svg"===a?(d=document.createElementNS(f.svgns,"svg"),f.set(d,c)):(void 0===d&&(d=document.createElementNS(f.svgns,"svg")),f.addAttributes(d,a,c,e)):d=void 0===d?document.createElementNS(f.htmls,a):d.appendChild(document.createElementNS(f.htmls,a));b&&(d.style.cssText=b);return void 0===e?d:d.childNodes[e||0]},addAttributes:function(a,b,c,d){var e=document.createElementNS(f.svgns,b);f.set(e,c);f.get(a,d).appendChild(e);-1!==f.SVG_TYPE_G.indexOf(b)&&(e.style.pointerEvents="none");
return e},clear:function(a){for(f.purge(a);a.firstChild;)a.firstChild.firstChild&&f.clear(a.firstChild),a.removeChild(a.firstChild)},purge:function(a){var b=a.attributes,c;if(b)for(c=b.length;c--;){var d=b[c].name;"function"===typeof a[d]&&(a[d]=null)}if(b=a.childNodes)for(c=b.length;c--;)f.purge(a.childNodes[c])},clamp:function(a,b,c){return a<b?b:a>c?c:a},ColorLuma:function(a,b){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);b=b||0;var c="#",d;for(d=0;3>d;d++){var e=
parseInt(a.substr(2*d,2),16);e=Math.round(Math.min(Math.max(0,e+e*b),255)).toString(16);c+=("00"+e).substr(e.length)}return c},findDeepInver:function(a){return.6>=.3*a[0]+.59*a[1]+.11*a[2]},hexToHtml:function(a){return"#"+("000000"+(void 0===a?0:a).toString(16)).substr(-6)},htmlToHex:function(a){return a.toUpperCase().replace("#","0x")},u255:function(a,b){return parseInt(a.substring(b,b+2),16)/255},u16:function(a,b){return parseInt(a.substring(b,b+1),16)/15},unpack:function(a){if(7==a.length)return[f.u255(a,
1),f.u255(a,3),f.u255(a,5)];if(4==a.length)return[f.u16(a,1),f.u16(a,2),f.u16(a,3)]},htmlRgb:function(a){return"rgb("+Math.round(255*a[0])+","+Math.round(255*a[1])+","+Math.round(255*a[2])+")"},rgbToHex:function(a){return"#"+("000000"+(255*a[0]<<16^255*a[1]<<8^255*a[2]<<0).toString(16)).slice(-6)},hueToRgb:function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a},rgbToHsl:function(a){var b=a[0],c=a[1];a=a[2];var d=Math.min(b,c,a),e=Math.max(b,c,a),f=e-d,h=0,g=
0;d=(d+e)/2;0<d&&1>d&&(g=f/(.5>d?2*d:2-2*d));0<f&&(e==b&&e!=c&&(h+=(c-a)/f),e==c&&e!=a&&(h+=2+(a-b)/f),e==a&&e!=b&&(h+=4+(b-c)/f),h/=6);return[h,g,d]},hslToRgb:function(a){var b=a[0];var c=a[1];a=a[2];if(0===c)return[a,a,a];c=.5>=a?a*(c+1):a+c-a*c;a=2*a-c;return[f.hueToRgb(a,c,b+.33333),f.hueToRgb(a,c,b),f.hueToRgb(a,c,b-.33333)]},makeGradiant:function(a,b,c,d){f.dom(a,null,b,c,0);a=c.childNodes[0].childNodes.length-1;for(var e=0;e<d.length;e++)b=d[e],f.dom("stop",null,{offset:b[0]+"%",style:"stop-color:"+
b[1]+"; stop-opacity:"+b[2]+";"},c,[0,a])},makeKnob:function(a){a=f.dom("svg",f.css.basic,{viewBox:"0 0 128 128",width:128,height:128,preserveAspectRatio:"none"});f.dom("circle","",{cx:64,cy:64,r:34,fill:f.colors.button,stroke:"rgba(0,0,0,0.3)","stroke-width":8},a);f.dom("path","",{d:"",stroke:f.colors.text,"stroke-width":4,fill:"none","stroke-linecap":"round"},a);f.dom("circle","",{cx:64,cy:64,r:41,stroke:"rgba(0,0,0,0.1)","stroke-width":7,fill:"none"},a);f.dom("path","",{d:"",stroke:"rgba(255,255,255,0.3)",
"stroke-width":2,fill:"none","stroke-linecap":"round","stroke-opacity":.5},a);f.knob=a},makeCircular:function(a){a=f.dom("svg",f.css.basic,{viewBox:"0 0 128 128",width:128,height:128,preserveAspectRatio:"none"});f.dom("circle","",{cx:64,cy:64,r:40,stroke:"rgba(0,0,0,0.1)","stroke-width":10,fill:"none"},a);f.dom("path","",{d:"",stroke:f.colors.text,"stroke-width":7,fill:"none","stroke-linecap":"butt"},a);f.circular=a},makeJoystick:function(a){var b=f.dom("svg",f.css.basic,{viewBox:"0 0 128 128",width:128,
height:128,preserveAspectRatio:"none"});f.dom("defs",null,{},b);f.dom("g",null,{},b);if(0===a){var c=[[40,"rgb(0,0,0)",.3],[80,"rgb(0,0,0)",0],[90,"rgb(50,50,50)",.4],[100,"rgb(50,50,50)",0]];f.makeGradiant("radialGradient",{id:"grad",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},b,c);c=[[60,"rgb(0,0,0)",.5],[100,"rgb(0,0,0)",0]];f.makeGradiant("radialGradient",{id:"gradS",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},b,c);c=["rgb(40,40,40)","rgb(48,48,48)","rgb(30,30,30)"];a=["rgb(1,90,197)","rgb(3,95,207)",
"rgb(0,65,167)"];c=[[30,c[0],1],[60,c[1],1],[80,c[1],1],[100,c[2],1]];f.makeGradiant("radialGradient",{id:"gradIn",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},b,c);c=[[30,a[0],1],[60,a[1],1],[80,a[1],1],[100,a[2],1]];f.makeGradiant("radialGradient",{id:"gradIn2",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},b,c);f.dom("circle","",{cx:64,cy:64,r:49,fill:"url(#grad)"},b);f.dom("circle","",{cx:69,cy:74,r:39,fill:"url(#gradS)"},b);f.dom("circle","",{cx:64,cy:64,r:29,fill:"url(#gradIn)"},b);f.joystick_0=
b}else c=[[69,"rgb(0,0,0)",0],[70,"rgb(0,0,0)",.3],[100,"rgb(0,0,0)",0]],f.makeGradiant("radialGradient",{id:"gradX",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},b,c),f.dom("circle","",{cx:64,cy:64,r:49,fill:"none",stroke:"rgba(100,100,100,0.25)","stroke-width":"4"},b),f.dom("circle","",{cx:64,cy:64,r:43,fill:"url(#gradX)"},b),f.dom("circle","",{cx:64,cy:64,r:29,fill:"none",stroke:"rgb(100,100,100)","stroke-width":"4"},b),f.joystick_1=b},makeColorRing:function(){var a=f.dom("svg",f.css.basic,{viewBox:"0 0 256 256",
width:256,height:256,preserveAspectRatio:"none"});f.dom("defs",null,{},a);f.dom("g",null,{},a);var b=8/108/24*Math.PI,c=0,d,e=[];for(d=0;24>=d;++d){var h=d/24;var g=h*f.TwoPI;var p=.5*(c+g);var k=1/Math.cos(.5*(g-c));c=[Math.sin(c),-Math.cos(c),Math.sin(p)*k,-Math.cos(p)*k,Math.sin(g),-Math.cos(g)];e[1]=f.rgbToHex(f.hslToRgb([h,1,.5]));if(0<d){for(h=6;h--;)c[h]=(108*c[h]+128).toFixed(2);h=" M"+c[0]+" "+c[1]+" Q"+c[2]+" "+c[3]+" "+c[4]+" "+c[5];p=[[0,e[0],1],[100,e[1],1]];f.makeGradiant("linearGradient",
{id:"G"+d,x1:c[0],y1:c[1],x2:c[4],y2:c[5],gradientUnits:"userSpaceOnUse"},a,p);f.dom("path","",{d:h,"stroke-width":40,stroke:"url(#G"+d+")","stroke-linecap":"butt"},a,1)}c=g-b;e[0]=e[1]}p=[[0,"#FFFFFF",1],[50,"#FFFFFF",0],[50,"#000000",0],[100,"#000000",1]];f.makeGradiant("linearGradient",{id:"GL1",x1:68,y1:68,x2:68,y2:188,gradientUnits:"userSpaceOnUse"},a,p);p=[[0,"#7f7f7f",0],[50,"#7f7f7f",.5],[100,"#7f7f7f",1]];f.makeGradiant("linearGradient",{id:"GL2",x1:68,y1:68,x2:188,y2:68,gradientUnits:"userSpaceOnUse"},
a,p);f.dom("circle","",{cx:128,cy:128,r:90,fill:"red"},a);f.dom("circle","",{cx:128,cy:128,r:90,fill:"url(#GL2)"},a);f.dom("circle","",{cx:128,cy:128,r:90,fill:"url(#GL1)"},a);f.dom("circle","",{cx:0,cy:0,r:8,"stroke-width":4,stroke:"#FFF",fill:"none"},a);f.dom("circle","",{cx:0,cy:0,r:8,"stroke-width":4,stroke:"#000",fill:"none"},a);f.colorRing=a},icon:function(a,b,c){c=c||40;b=b||"#DEDEDE";c=["<svg xmlns='"+f.svgns+"' version='1.1' xmlns:xlink='"+f.htmls+"' style='pointer-events:none;' preserveAspectRatio='xMinYMax meet' x='0px' y='0px' width='"+
c+"px' height='"+c+"px' viewBox='0 0 256 256'><g>"];switch(a){case "logo":c[1]="<path id='logoin' fill='"+b+"' stroke='none' d='"+f.logoFill_d+"'/>";break;case "save":c[1]="<path stroke='"+b+"' stroke-width='4' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 26.125 17 L 20 22.95 14.05 17 M 20 9.95 L 20 22.95'/><path stroke='"+b+"' stroke-width='2.5' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 32.6 23 L 32.6 25.5 Q 32.6 28.5 29.6 28.5 L 10.6 28.5 Q 7.6 28.5 7.6 25.5 L 7.6 23'/>"}c[2]=
"</g></svg>";return c.join("\n")},logoFill_d:"M 171 150.75 L 171 33.25 155.5 33.25 155.5 150.75 Q 155.5 162.2 147.45 170.2 139.45 178.25 128 178.25 116.6 178.25 108.55 170.2 100.5 162.2 100.5 150.75 \nL 100.5 33.25 85 33.25 85 150.75 Q 85 168.65 97.55 181.15 110.15 193.75 128 193.75 145.9 193.75 158.4 181.15 171 168.65 171 150.75 \nM 200 33.25 L 184 33.25 184 150.8 Q 184 174.1 167.6 190.4 151.3 206.8 128 206.8 104.75 206.8 88.3 190.4 72 174.1 72 150.8 L 72 33.25 56 33.25 56 150.75 \nQ 56 180.55 77.05 201.6 98.2 222.75 128 222.75 157.8 222.75 178.9 201.6 200 180.55 200 150.75 L 200 33.25 Z"};
f.setText();var g=f,d={ui:[],ID:null,lock:!1,wlock:!1,current:-1,needReZone:!0,isEventsInit:!1,prevDefault:["contextmenu","mousedown","mousemove","mouseup"],xmlserializer:new XMLSerializer,tmpTime:null,tmpImage:null,oldCursor:"auto",input:null,parent:null,firstImput:!0,hiddenImput:null,hiddenSizer:null,hasFocus:!1,startInput:!1,inputRange:[0,0],cursorId:0,str:"",pos:0,startX:-1,moveX:-1,debugInput:!1,isLoop:!1,listens:[],e:{type:null,clientX:0,clientY:0,keyCode:NaN,key:null,delta:0},isMobile:!1,add:function(a){d.ui.push(a);
d.getZone(a);d.isEventsInit||d.initEvents()},testMobile:function(){var a=navigator.userAgent;return a.match(/Android/i)||a.match(/webOS/i)||a.match(/iPhone/i)||a.match(/iPad/i)||a.match(/iPod/i)||a.match(/BlackBerry/i)||a.match(/Windows Phone/i)?!0:!1},remove:function(a){var b=d.ui.indexOf(a);-1!==b&&(d.removeListen(a),d.ui.splice(b,1));0===d.ui.length&&d.removeEvents()},initEvents:function(){if(!d.isEventsInit){var a=document.body;d.isMobile=d.testMobile();d.isMobile?(a.addEventListener("touchstart",
d,!1),a.addEventListener("touchend",d,!1),a.addEventListener("touchmove",d,!1)):(a.addEventListener("mousedown",d,!1),a.addEventListener("contextmenu",d,!1),a.addEventListener("wheel",d,!1),document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",d,!1));window.addEventListener("keydown",d,!1);window.addEventListener("keyup",d,!1);window.addEventListener("resize",d.resize,!1);d.isEventsInit=!0}},removeEvents:function(){if(d.isEventsInit){var a=document.body;d.isMobile?(a.removeEventListener("touchstart",
d,!1),a.removeEventListener("touchend",d,!1),a.removeEventListener("touchmove",d,!1)):(a.removeEventListener("mousedown",d,!1),a.removeEventListener("contextmenu",d,!1),a.removeEventListener("wheel",d,!1),document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",d,!1));window.removeEventListener("keydown",d);window.removeEventListener("keyup",d);window.removeEventListener("resize",d.resize);d.isEventsInit=!1}},resize:function(){d.needReZone=!0;for(var a=d.ui.length,b;a--;)b=
d.ui[a],b.isGui&&!b.isCanvasOnly&&b.autoResize&&b.setHeight()},handleEvent:function(a){-1!==a.type.indexOf(d.prevDefault)&&a.preventDefault();if("contextmenu"!==a.type){d.findZone();var b=d.e;"keydown"===a.type&&d.keydown(a);"keyup"===a.type&&d.keyup(a);b.delta="wheel"===a.type?0<a.deltaY?1:-1:0;b.clientX=a.clientX||0;b.clientY=a.clientY||0;b.type=a.type;d.isMobile&&(a.touches&&0<a.touches.length&&(b.clientX=a.touches[0].clientX||0,b.clientY=a.touches[0].clientY||0),"touchstart"===a.type&&(b.type=
"mousedown"),"touchend"===a.type&&(b.type="mouseup"),"touchmove"===a.type&&(b.type="mousemove"));"mousedown"===b.type&&(d.lock=!0);"mouseup"===b.type&&(d.lock=!1);d.isMobile&&"mousedown"===b.type&&d.findID(b);"mousemove"!==b.type||d.lock||d.findID(b);null!==d.ID&&(d.ID.isCanvasOnly&&(b.clientX=d.ID.mouse.x,b.clientY=d.ID.mouse.y),d.ID.handleEvent(b));d.isMobile&&"mouseup"===b.type&&d.clearOldID()}},findID:function(a){for(var b=d.ui.length,c=-1,q,e,f;b--;)if(q=d.ui[b],q.isCanvasOnly?(e=q.mouse.x,f=
q.mouse.y):(e=a.clientX,f=a.clientY),d.onZone(q,e,f)){c=b;c!==d.current&&(d.clearOldID(),d.current=c,d.ID=q);break}-1===c&&d.clearOldID()},clearOldID:function(){d.ID&&(d.current=-1,d.ID.reset(),d.ID=null,d.cursor())},calcUis:function(a,b,c){var d=a.length,e,f=0,h=0;for(e=0;e<d;e++){var g=a[e];g.zone.w=g.w;g.zone.h=g.h;g.autoWidth?(g.zone.x=b.x,g.zone.y=c,c+=g.h+1):(0===f&&(c+=g.h+1),g.zone.x=b.x+f,g.zone.y=0===f?c-g.h:h,h=g.zone.y,f+=g.w,f+g.w>b.w&&(f=0));g.isGroup&&g.calcUis()}},findTarget:function(a,
b){for(var c=a.length;c--;)if(d.onZone(a[c],b.clientX,b.clientY))return c;return-1},findZone:function(a){if(d.needReZone||a){a=d.ui.length;for(var b;a--;)b=d.ui[a],d.getZone(b),b.isGui&&b.calcUis();d.needReZone=!1}},onZone:function(a,b,c){if(void 0===b||void 0===c)return!1;var d=a.zone;b-=d.x;c-=d.y;(d=0<=b&&0<=c&&b<=d.w&&c<=d.h)?a.local.set(b,c):a.local.neg();return d},getZone:function(a){if(!a.isCanvasOnly){var b=a.getDom().getBoundingClientRect();a.zone={x:b.left,y:b.top,w:b.width,h:b.height}}},
cursor:function(a){a=a?a:"auto";a!==d.oldCursor&&(document.body.style.cursor=a,d.oldCursor=a)},toCanvas:function(a,b,c,f){f&&null!==d.tmpTime&&(clearTimeout(d.tmpTime),d.tmpTime=null);if(null===d.tmpTime){d.lock&&(d.tmpTime=setTimeout(function(){d.tmpTime=null},10));var e=!1;if(b!==a.canvas.width||c!==a.canvas.height)e=!0;null===d.tmpImage&&(d.tmpImage=new Image);f=d.tmpImage;var g=d.xmlserializer.serializeToString(a.content);f.onload=function(){var d=a.canvas.getContext("2d");e?(a.canvas.width=b,
a.canvas.height=c):d.clearRect(0,0,b,c);d.drawImage(this,0,0);a.onDraw()};f.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="'+b+'" height="'+c+'"><foreignObject style="pointer-events: none; left:0;" width="100%" height="100%">'+g+"</foreignObject></svg>");f.crossOrigin=""}},setHidden:function(){if(null===d.hiddenImput){var a=d.parent.css.txt+"padding:0; width:auto; height:auto; text-shadow:none;";a+="left:10px; top:auto; border:none; color:#FFF; background:#000;"+
(d.debugInput?"":"opacity:0; zIndex:0;");d.hiddenImput=document.createElement("input");d.hiddenImput.type="text";d.hiddenImput.style.cssText=a+"bottom:30px;"+(d.debugInput?"":"transform:scale(0);");d.hiddenSizer=document.createElement("div");d.hiddenSizer.style.cssText=a+"bottom:60px;";document.body.appendChild(d.hiddenImput);document.body.appendChild(d.hiddenSizer)}d.hiddenImput.style.width=d.input.clientWidth+"px";d.hiddenImput.value=d.str;d.hiddenSizer.innerHTML=d.str;d.hasFocus=!0},clearHidden:function(a){null!==
d.hiddenImput&&(d.hasFocus=!1)},clickPos:function(a){for(var b=d.str.length,c=0,f=0;b--;){c+=d.textWidth(d.str[f]);if(c>=a)break;f++}return f},upInput:function(a,b){if(null===d.parent)return!1;var c=!1;b?(a=d.clickPos(a),d.moveX=a,-1===d.startX?(d.startX=a,d.cursorId=a,d.inputRange=[d.startX,d.startX]):d.moveX!==d.startX&&(d.inputRange=d.startX>d.moveX?[d.moveX,d.startX]:[d.startX,d.moveX]),c=!0):-1!==d.startX&&(d.hasFocus=!0,d.hiddenImput.focus(),d.hiddenImput.selectionStart=d.inputRange[0],d.hiddenImput.selectionEnd=
d.inputRange[1],d.startX=-1,c=!0);c&&d.selectParent();return c},selectParent:function(){var a=d.textWidth(d.str.substring(0,d.cursorId)),b=d.textWidth(d.str.substring(0,d.inputRange[0])),c=d.textWidth(d.str.substring(d.inputRange[0],d.inputRange[1]));d.parent.select(a,b,c)},textWidth:function(a){if(null===d.hiddenSizer)return 0;a=a.replace(/ /g,"&nbsp;");d.hiddenSizer.innerHTML=a;return d.hiddenSizer.clientWidth},clearInput:function(){null!==d.parent&&(d.firstImput||d.parent.validate(),d.clearHidden(),
d.parent.unselect(),d.input.style.background=d.parent.colors.inputBg,d.input.style.borderColor=d.parent.colors.inputBorder,d.parent.isEdit=!1,d.input=null,d.parent=null,d.str="",d.firstImput=!0)},setInput:function(a,b){d.clearInput();d.input=a;d.parent=b;d.input.style.background=d.parent.colors.inputOver;d.input.style.borderColor=d.parent.colors.inputBorderSelect;d.str=d.input.textContent;d.setHidden()},keydown:function(a){if(null!==d.parent){var b=a.which;d.firstImput=!1;d.hasFocus&&(window.focus(),
d.hiddenImput.focus());d.parent.isEdit=!0;13===b?d.clearInput():d.hiddenImput.readOnly=d.input.isNum?47<a.keyCode&&58>a.keyCode||95<a.keyCode&&106>a.keyCode||190===a.keyCode||110===a.keyCode||109===a.keyCode?!1:!0:!1}},keyup:function(a){null!==d.parent&&(d.str=d.hiddenImput.value,d.input.textContent=d.str,d.cursorId=d.hiddenImput.selectionStart,d.inputRange=[d.hiddenImput.selectionStart,d.hiddenImput.selectionEnd],d.selectParent(),d.parent.allway&&d.parent.validate())},loop:function(){d.isLoop&&requestAnimationFrame(d.loop);
d.update()},update:function(){for(var a=d.listens.length;a--;)d.listens[a].listening()},removeListen:function(a){a=d.listens.indexOf(a);-1!==a&&d.listens.splice(a,1);0===d.listens.length&&(d.isLoop=!1)},addListen:function(a){-1===d.listens.indexOf(a)&&(d.listens.push(a),d.isLoop||(d.isLoop=!0,d.loop()))}},k=d;Object.assign(m.prototype,{set:function(a,b){this.x=a;this.y=b;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},
multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},addScalar:function(a){this.x+=a;this.y+=a;return this},negate:function(){this.x*=-1;this.y*=-1;return this},neg:function(){this.y=this.x=-1;return this},isZero:function(){return 0===this.x&&0===this.y},copy:function(a){this.x=a.x;this.y=a.y;
return this},equals:function(a){return a.x===this.x&&a.y===this.y},nearEquals:function(a,b){return a.x.toFixed(b)===this.x.toFixed(b)&&a.y.toFixed(b)===this.y.toFixed(b)},lerp:function(a,b){null===a?(this.x-=this.x*b,this.y-=this.y*b):(this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b);return this}});Object.assign(h.prototype,{constructor:h,init:function(){this.zone.h=this.h;var a=this.s,b=this.c;a[0].height=this.h+"px";this.isUI&&(a[0].background=this.bg);this.isEmpty&&(a[0].background="none");void 0!==
b[1]&&this.autoWidth&&(a[1]=b[1].style,a[1].height=this.h-4+"px",a[1].lineHeight=this.h-8+"px");for(var c=g.frag,d=1,e=b.length;d!==e;d++)void 0!==b[d]&&(c.appendChild(b[d]),a[d]=b[d].style);null!==this.target?this.target.appendChild(b[0]):this.isUI?this.main.inner.appendChild(b[0]):document.body.appendChild(b[0]);b[0].appendChild(c);this.rSize();this.isUI||(this.c[0].style.pointerEvents="auto",k.add(this))},dom:function(a,b,c,d,e){return g.dom(a,b,c,d,e)},setSvg:function(a,b,c,d){g.setSvg(a,b,c,
d)},setCss:function(a,b){g.setCss(a,b)},clamp:function(a,b,c){return g.clamp(a,b,c)},getColorRing:function(){g.colorRing||g.makeColorRing();return g.clone(g.colorRing)},getJoystick:function(a){g["joystick_"+a]||g.makeJoystick(a);return g.clone(g["joystick_"+a])},getCircular:function(a){g.circular||g.makeCircular(a);return g.clone(g.circular)},getKnob:function(a){g.knob||g.makeKnob(a);return g.clone(g.knob)},cursor:function(a){k.cursor(a)},update:function(){},reset:function(){},getDom:function(){return this.c[0]},
uiout:function(){this.isEmpty||(this.s[0].background=this.bg)},uiover:function(){this.isEmpty||(this.s[0].background=this.bgOver)},rename:function(a){void 0!==this.c[1]&&(this.c[1].textContent=a)},listen:function(){k.addListen(this);return this},listening:function(){null!==this.objectLink&&(this.isSend||this.isEdit||this.setValue(this.objectLink[this.val]))},setValue:function(a){this.value=this.isNumber?this.numValue(a):a;this.update()},onChange:function(a){if(!this.isEmpty)return this.callback=a,
this},onFinishChange:function(a){if(!this.isEmpty)return this.callback=null,this.endCallback=a,this},send:function(a){this.isSend=!0;null!==this.objectLink&&(this.objectLink[this.val]=a||this.value);this.callback&&this.callback(a||this.value);this.isSend=!1},sendEnd:function(a){this.endCallback&&this.endCallback(a||this.value);null!==this.objectLink&&(this.objectLink[this.val]=a||this.value)},clear:function(){g.clear(this.c[0]);null!==this.target?this.target.removeChild(this.c[0]):this.isUI?this.main.clearOne(this):
document.body.removeChild(this.c[0]);this.isUI||k.remove(this);this.target=this.callback=this.s=this.c=null},setSize:function(a){this.autoWidth&&(this.w=a,this.simple?this.sb=this.w-this.sa:(a=this.p/100*this.w,this.sa=Math.floor(a+10),this.sb=Math.floor(this.w-a-20)))},rSize:function(){this.autoWidth&&(this.s[0].width=this.w+"px",this.simple||(this.s[1].width=this.sa+"px"))},setTypeNumber:function(a){this.isNumber=!0;this.value=0;void 0!==a.value&&(this.value="string"===typeof a.value?1*a.value:
a.value);this.min=void 0===a.min?-Infinity:a.min;this.max=void 0===a.max?Infinity:a.max;this.precision=void 0===a.precision?2:a.precision;switch(this.precision){case 0:var b=1;break;case 1:b=.1;break;case 2:b=.01;break;case 3:b=.001;break;case 4:b=1E-4}this.step=void 0===a.step?b:a.step;this.range=this.max-this.min;this.value=this.numValue(this.value)},numValue:function(a){return 1*Math.min(this.max,Math.max(this.min,a)).toFixed(this.precision)},handleEvent:function(a){if(!this.isEmpty)return this[a.type](a)},
wheel:function(a){return!1},mousedown:function(a){return!1},mousemove:function(a){return!1},mouseup:function(a){return!1},keydown:function(a){return!1},keyup:function(a){return!1},setReferency:function(a,b){this.objectLink=a;this.val=b},display:function(a){this.s[0].display=a?"block":"none"},open:function(){this.isOpen||(this.isOpen=!0)},close:function(){this.isOpen&&(this.isOpen=!1)},needZone:function(){k.needReZone=!0},select:function(){},unselect:function(){},setInput:function(a){k.setInput(a,
this)},upInput:function(a,b){return k.upInput(a,b)},selected:function(a){this.isSelect=a||!1}});t.prototype=Object.assign(Object.create(h.prototype),{constructor:t,mousemove:function(a){this.cursor("pointer")},mousedown:function(a){this.value=this.value?!1:!0;this.update();this.send();return!0},update:function(){var a=this.s;this.value?(a[2].background=this.colors.boolon,a[2].borderColor=this.colors.boolon,a[3].marginLeft="17px"):(a[2].background=this.colors.boolbg,a[2].borderColor=this.colors.boolbg,
a[3].marginLeft="2px")},rSize:function(){h.prototype.rSize.call(this);var a=this.s;a[2].left=this.sa+"px";a[3].left=this.sa+1+"px"}});u.prototype=Object.assign(Object.create(h.prototype),{constructor:u,testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";for(var b=this.lng,c=this.tmp;b--;)if(a.x>c[b][0]&&a.x<c[b][2])return b+2;return""},mouseup:function(a){return this.isDown?(this.isDown=this.value=!1,this.mousemove(a)):!1},mousedown:function(a){var b=this.testZone(a);if(!b)return!1;this.isDown=
!0;this.value=this.values[b-2];this.isLoadButton||this.send();return this.mousemove(a)},mousemove:function(a){a=this.testZone(a);""!==a?(this.cursor("pointer"),a=this.modes(this.isDown?3:2,a)):a=this.reset();return a},modes:function(a,b){for(var c,d=!1,e=0;e<this.lng;e++)(c=e===b-2?this.mode(a,e+2):this.mode(1,e+2))&&(d=!0);return d},mode:function(a,b){var c=!1;b-=2;if(this.stat[b]!==a){switch(a){case 1:this.stat[b]=1;this.s[b+2].color=this.fontColor;this.s[b+2].background=this.buttonColor;break;
case 2:this.stat[b]=2;this.s[b+2].color="#FFF";this.s[b+2].background=this.colors.select;break;case 3:this.stat[b]=3,this.s[b+2].color="#FFF",this.s[b+2].background=this.colors.down}c=!0}return c},reset:function(){this.cursor();return this.modes(1,2)},dragover:function(a){a.preventDefault();this.s[4].borderColor=this.colors.select;this.s[4].color=this.colors.select},dragend:function(a){a.preventDefault();this.s[4].borderColor=this.fontColor;this.s[4].color=this.fontColor},drop:function(a){a.preventDefault();
this.dragend(a);this.fileSelect(a.dataTransfer.files[0])},initDrager:function(){this.c[4]=this.dom("div",this.css.txt+" text-align:center; line-height:"+(this.h-8)+"px; border:1px dashed "+this.fontColor+"; top:2px;  height:"+(this.h-4)+"px; border-radius:"+this.radius+"px; pointer-events:auto;");this.c[4].textContent="DRAG";this.c[4].addEventListener("dragover",function(a){this.dragover(a)}.bind(this),!1);this.c[4].addEventListener("dragend",function(a){this.dragend(a)}.bind(this),!1);this.c[4].addEventListener("dragleave",
function(a){this.dragend(a)}.bind(this),!1);this.c[4].addEventListener("drop",function(a){this.drop(a)}.bind(this),!1)},initLoader:function(){this.c[3]=this.dom("input",this.css.basic+"top:0px; opacity:0; height:"+this.h+"px; pointer-events:auto; cursor:pointer;");this.c[3].name="loader";this.c[3].type="file";this.c[3].addEventListener("change",function(a){this.fileSelect(a.target.files[0])}.bind(this),!1)},fileSelect:function(a){var b=["sea","z","hex","bvh","BVH"];if(void 0!==a){var c=new FileReader,
d=a.name,e=d.substring(d.lastIndexOf(".")+1,d.length);-1!==["png","jpg","mp4","webm","ogg"].indexOf(e)?c.readAsDataURL(a):-1!==b.indexOf(e)?c.readAsArrayBuffer(a):c.readAsText(a);c.onload=function(a){this.callback&&this.callback(a.target.result,d,e)}.bind(this)}},label:function(a,b){this.c[b||2].textContent=a},icon:function(a,b,c){c=c||2;this.s[c].padding=(b||0)+"px 0px";this.c[c].innerHTML=a},rSize:function(){h.prototype.rSize.call(this);for(var a=this.s,b=this.sa,c=this.lng,d=Math.floor((this.sb-
3*(c-1))/c);c--;)this.tmp[c]=[Math.floor(b+d*c+3*c),d],this.tmp[c][2]=this.tmp[c][0]+this.tmp[c][1],a[c+2].left=this.tmp[c][0]+"px",a[c+2].width=this.tmp[c][1]+"px";this.isDragButton&&(a[4].left=b+d+3+"px",a[4].width=d+"px");this.isLoadButton&&(a[3].left=b+"px",a[3].width=d+"px")}});r.prototype=Object.assign(Object.create(h.prototype),{constructor:r,mode:function(a){if(this.cmode===a)return!1;switch(a){case 0:this.s[2].color=this.fontColor;this.setSvg(this.c[3],"stroke","rgba(0,0,0,0.1)",0);this.setSvg(this.c[3],
"stroke",this.fontColor,1);break;case 1:this.s[2].color=this.colorPlus,this.setSvg(this.c[3],"stroke","rgba(0,0,0,0.3)",0),this.setSvg(this.c[3],"stroke",this.colorPlus,1)}this.cmode=a;return!0},reset:function(){this.isDown=!1},mouseup:function(a){this.isDown=!1;this.sendEnd();return this.mode(0)},mousedown:function(a){this.isDown=!0;this.old=this.value;this.oldr=null;this.mousemove(a);return this.mode(1)},mousemove:function(a){if(this.isDown){var b=this.offset;b.x=this.radius-(a.clientX-this.zone.x);
b.y=this.radius-(a.clientY-this.zone.y-this.top);this.r=b.angle()-this.pi90;this.r=(this.r%this.twoPi+this.twoPi)%this.twoPi;null!==this.oldr&&(a=this.r-this.oldr,this.r=Math.abs(a)>Math.PI?this.oldr:this.r,6<a&&(this.r=0),-6>a&&(this.r=this.twoPi));a=1/this.twoPi*this.range*this.r+this.min-this.old;if(a>=this.step||a<=this.step)a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value,this.oldr=this.r}},makePath:function(){var a=this.percent*this.twoPi-
.001;return"M 64,24 A 40,40 0 "+(a>Math.PI?1:0)+" 1 "+(40*Math.sin(a)+64)+","+(40-40*Math.cos(a)+24)},update:function(a){this.c[2].textContent=this.value;this.percent=(this.value-this.min)/this.range;this.setSvg(this.c[3],"d",this.makePath(),1);a&&this.send()}});v.prototype=Object.assign(Object.create(h.prototype),{constructor:v,testZone:function(a,b){a=this.local;if(-1===a.x&&-1===a.y)return"";if(this.up&&this.isOpen)return a.y>this.wfixe?"title":"color";if(a.y<this.baseH+2)return"title";if(this.isOpen)return"color"},
mouseup:function(a){this.isDown=!1},mousedown:function(a){var b=this.testZone(a.clientX,a.clientY);if("title"===b)return this.isOpen?this.close():this.open(),!0;"color"===b&&(this.isDown=!0,this.mousemove(a))},mousemove:function(a){var b=this.testZone(a.clientX,a.clientY);"title"===b&&this.cursor("pointer");"color"===b&&(this.cursor("crosshair"),this.isDown&&(b=this.offset,b.x=a.clientX-(this.zone.x+this.decal.x+this.mid),b.y=a.clientY-(this.zone.y+this.decal.y+this.mid),a=b.length()*this.ratio,128>
a&&(88<a?(b=(b.angle()+this.pi90)/6.28,this.setHSL([(b+1)%1,this.hsl[1],this.hsl[2]])):(a=Math.max(0,Math.min(1,.5-b.x*this.square*.5)),b=Math.max(0,Math.min(1,.5-b.y*this.square*.5)),this.setHSL([this.hsl[0],a,b])))))},setHeight:function(){this.h=this.isOpen?this.wfixe+this.baseH+5:this.baseH;this.s[0].height=this.h+"px";this.zone.h=this.h},parentHeight:function(a){null!==this.parentGroup?this.parentGroup.calc(a):this.isUI&&this.main.calc(a)},open:function(){h.prototype.open.call(this);this.setHeight();
this.up&&(this.zone.y-=this.wfixe+5);var a=this.h-this.baseH;this.s[3].visibility="visible";this.parentHeight(a)},close:function(){h.prototype.close.call(this);this.up&&(this.zone.y+=this.wfixe+5);var a=this.h-this.baseH;this.setHeight();this.s[3].visibility="hidden";this.parentHeight(-a)},update:function(a){var b=g.rgbToHex(g.hslToRgb([this.hsl[0],1,.5]));this.moveMarkers();this.value=this.bcolor;this.setSvg(this.c[3],"fill",b,2);this.s[2].background=this.bcolor;this.c[2].textContent=g.htmlToHex(this.bcolor);
this.invert=g.findDeepInver(this.rgb);this.s[2].color=this.invert?"#fff":"#000";a&&("array"===this.ctype&&this.send(this.rgb),"rgb"===this.ctype&&this.send(g.htmlRgb(this.rgb)),"hex"===this.ctype&&this.send(g.htmlToHex(this.value)),"html"===this.ctype&&this.send())},setColor:function(a){var b=g.unpack(a);this.bcolor!=a&&b&&(this.bcolor=a,this.rgb=b,this.hsl=g.rgbToHsl(this.rgb),this.update());return this},setHSL:function(a){this.hsl=a;this.rgb=g.hslToRgb(a);this.bcolor=g.rgbToHex(this.rgb);this.update(!0);
return this},moveMarkers:function(){var a=this.invert?"#fff":"#000",b=6.28*this.hsl[0];b=(new m(108*Math.sin(b),108*-Math.cos(b))).addScalar(128);this.setSvg(this.c[3],"cx",b.x,5);this.setSvg(this.c[3],"cy",b.y,5);b.set(120*(.5-this.hsl[1]),120*(.5-this.hsl[2])).addScalar(128);this.setSvg(this.c[3],"cx",b.x,6);this.setSvg(this.c[3],"cy",b.y,6);this.setSvg(this.c[3],"stroke",a,6)},rSize:function(){h.prototype.rSize.call(this);var a=this.s;a[2].width=this.sb+"px";a[2].left=this.sa+"px";this.decal.x=
Math.floor(.5*(this.w-this.wfixe));this.decal.y="up"===this.side?2:this.baseH+2;this.mid=Math.floor(.5*this.wfixe);this.setSvg(this.c[3],"viewBox","0 0 "+this.wfixe+" "+this.wfixe);a[3].width=this.wfixe+"px";a[3].height=this.wfixe+"px";a[3].left=this.decal.x+"px";a[3].top=this.decal.y+"px";this.ratio=256/this.wfixe;this.square=1/(this.wfixe/256*60);this.setHeight()}});w.prototype=Object.assign(Object.create(h.prototype),{constructor:w,mousedown:function(a){this.isShow?this.close():this.open()},tick:function(a){this.values=
a;this.isShow&&(this.drawGraph(),this.upText())},makePath:function(a){var b="M -1 50";for(var c=0;c<this.res+1;c++)b+=" L "+c+" "+a[c];return b+=" L "+(this.res+1)+" 50"},upText:function(a){a=a||this.values;for(var b="",c=0,d=this.names.length;c<d;c++)b+=this.textDisplay[c]+a[c].toFixed(this.precision)+"</span>";this.c[4].innerHTML=b},drawGraph:function(){for(var a=this.c[2],b=this.names.length,c,d=0,e=0;b--;)c=this.adding?(this.values[e]+d)*this.range[e]:this.values[e]*this.range[e],this.points[e].shift(),
this.points[e].push(50-c),this.setSvg(a,"d",this.makePath(this.points[e]),b+1),d+=this.values[e],e++},open:function(){h.prototype.open.call(this);this.h=this.hplus+this.baseH;this.setSvg(this.c[3],"d",this.svgs.arrowDown);null!==this.parentGroup?this.parentGroup.calc(this.hplus):this.isUI&&this.main.calc(this.hplus);this.s[0].height=this.h+"px";this.s[2].display="block";this.s[4].display="block";this.isShow=!0;this.custom||k.addListen(this)},close:function(){h.prototype.close.call(this);this.h=this.baseH;
this.setSvg(this.c[3],"d",this.svgs.arrow);null!==this.parentGroup?this.parentGroup.calc(-this.hplus):this.isUI&&this.main.calc(-this.hplus);this.s[0].height=this.h+"px";this.s[2].display="none";this.s[4].display="none";this.isShow=!1;this.custom||k.removeListen(this);this.c[4].innerHTML=""},begin:function(){this.startTime=this.now()},end:function(){var a=this.now();this.ms=a-this.startTime;this.frames++;if(a>this.prevTime+1E3&&(this.fps=this.round(1E3*this.frames/(a-this.prevTime)),this.prevTime=
a,this.frames=0,this.isMem)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;this.mem=this.round(9.54E-7*b);this.mm=b/c}this.values=[this.fps,this.ms,this.mm];this.drawGraph();this.upText([this.fps,this.ms,this.mem]);return a},listening:function(){this.custom||(this.startTime=this.end())},rSize:function(){var a=this.s,b=this.w;a[0].width=b+"px";a[1].width=b+"px";a[2].left="10px";a[2].width=b-20+"px";a[4].width=b-20+"px"}});F.prototype=Object.assign(Object.create(h.prototype),
{constructor:F,updateSVG:function(){this.line&&this.setSvg(this.c[3],"d",this.makePath(),0);for(var a=0;a<this.lng;a++)this.setSvg(this.c[3],"height",this.v[a]*this.gh,a+2),this.setSvg(this.c[3],"y",14+(this.gh-this.v[a]*this.gh),a+2),this.value[a]=this.neg?1*((2*this.v[a]-1)*this.multiplicator).toFixed(this.precision):1*(this.v[a]*this.multiplicator).toFixed(this.precision);this.c[2].textContent=this.value},testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";var b=this.lng,c=this.tmp;
if(a.y>this.top&&a.y<this.h-20)for(;b--;)if(a.x>c[b][0]&&a.x<c[b][2])return b;return""},mode:function(a,b){if(a===this.cMode[b])return!1;switch(a){case 0:var c=.3;break;case 1:c=.6;break;case 2:c=1}this.reset();this.setSvg(this.c[3],"fill-opacity",c,b+2);this.cMode[b]=a;return!0},reset:function(){for(var a=!1,b=this.lng;b--;)0!==this.cMode[b]&&(this.cMode[b]=0,this.setSvg(this.c[3],"fill-opacity",.3,b+2),a=!0);return a},mouseup:function(a){this.isDown=!1;if(-1!==this.current)return this.reset()},
mousedown:function(a){this.isDown=!0;return this.mousemove(a)},mousemove:function(a){var b=this.testZone(a);if(""===b)var c=this.reset();else c=this.mode(this.isDown?2:1,b),this.isDown&&(this.v[b]=this.clamp(1-(a.clientY-this.zone.y-this.top-10)/this.gh,0,1),this.update(!0));return c},update:function(a){this.updateSVG();a&&this.send()},makePath:function(){for(var a="",b,c,d,e,f,g,h=0;h<this.lng;h++)b=14+(this.gh-this.v[h]*this.gh),c=14+h*this.iw+4*h,e=c+.5*this.iw,d=c+this.iw,a=0===h?a+("M "+c+" "+
b+" T "+e+" "+b):a+(" C "+f+" "+g+","+c+" "+b+","+e+" "+b),h===this.lng-1&&(a+=" T "+d+" "+b),f=d,g=b;return a},rSize:function(){h.prototype.rSize.call(this);var a=this.s;void 0!==this.c[1]&&(a[1].width=this.w+"px");a[2].width=this.w+"px";a[3].width=this.w+"px";a=(this.w-28-4*(this.lng-1))/this.lng;for(var b=[],c=0;c<this.lng;c++)b[c]=[14+c*a+4*c,a],b[c][2]=b[c][0]+b[c][1];this.tmp=b}});x.prototype=Object.assign(Object.create(h.prototype),{constructor:x,isGroup:!0,testZone:function(a){a=this.local;
if(-1===a.x&&-1===a.y)return"";var b="";a.y<this.baseH?b="title":this.isOpen&&(b="content");return b},clearTarget:function(){if(-1===this.current)return!1;this.target.uiout();this.target.reset();this.current=-1;this.target=null;this.cursor();return!0},reset:function(){this.clearTarget()},handleEvent:function(a){var b=a.type,c=!1,d=!1,e=this.testZone(a);if(e){switch(e){case "content":this.cursor();k.isMobile&&"mousedown"===b&&this.getNext(a,c);this.target&&(d=this.target.handleEvent(a));k.lock||this.getNext(a,
c);break;case "title":this.cursor("pointer"),"mousedown"===b&&(this.isOpen?this.close():this.open())}this.isDown&&(c=!0);d&&(c=!0);return c}},getNext:function(a,b){a=k.findTarget(this.uis,a);a!==this.current&&(this.clearTarget(),this.current=a);-1!==a&&(this.target=this.uis[this.current],this.target.uiover())},calcH:function(){var a=this.uis.length,b,c=0,d=0,e=0;for(b=0;b<a;b++){var f=this.uis[b];f.autoWidth?c+=f.h+1:(0===d?c+=f.h+1:e<f.h&&(c+=f.h-e),e=f.h,d+=f.w,d+f.w>this.w&&(d=0))}return c},calcUis:function(){this.isOpen&&
k.calcUis(this.uis,this.zone,this.zone.y+this.baseH)},setBG:function(a){this.s[0].background=a;for(var b=this.uis.length;b--;)this.uis[b].setBG(a)},add:function(){var a=arguments;"object"===typeof a[1]?(a[1].isUI=this.isUI,a[1].target=this.c[2],a[1].main=this.main):"string"===typeof arguments[1]&&(void 0===a[2]?[].push.call(a,{isUI:!0,target:this.c[2],main:this.main}):(a[2].isUI=!0,a[2].target=this.c[2],a[2].main=this.main));a=this.ADD.apply(this,a);this.uis.push(a);a.autoHeight&&(a.parentGroup=this);
return a},parentHeight:function(a){null!==this.parentGroup?this.parentGroup.calc(a):this.isUI&&this.main.calc(a)},open:function(){h.prototype.open.call(this);this.setSvg(this.c[4],"d",this.svgs.arrowDown);this.rSizeContent();this.parentHeight(this.h-this.baseH)},close:function(){h.prototype.close.call(this);var a=this.h-this.baseH;this.setSvg(this.c[4],"d",this.svgs.arrow);this.h=this.baseH;this.s[0].height=this.h+"px";this.parentHeight(-a)},clear:function(){this.clearGroup();this.isUI&&this.main.calc(-(this.h+
1));h.prototype.clear.call(this)},clearGroup:function(){this.close();for(var a=this.uis.length;a--;)this.uis[a].clear(),this.uis.pop();this.uis=[];this.h=this.baseH},calc:function(a){this.isOpen&&(void 0!==a?(this.h+=a,this.isUI&&this.main.calc(a)):this.h=this.calcH()+this.baseH,this.s[0].height=this.h+"px")},rSizeContent:function(){for(var a=this.uis.length;a--;)this.uis[a].setSize(this.w),this.uis[a].rSize();this.calc()},rSize:function(){h.prototype.rSize.call(this);var a=this.s;a[3].left=this.sa+
this.sb-17+"px";a[1].width=this.w+"px";a[2].width=this.w+"px";this.isOpen&&this.rSizeContent()}});y.prototype=Object.assign(Object.create(h.prototype),{constructor:y,mode:function(a){switch(a){case 0:0===this.model?(this.setSvg(this.c[3],"fill","url(#gradIn)",4),this.setSvg(this.c[3],"stroke","#000",4)):(this.setSvg(this.c[3],"stroke","rgba(100,100,100,0.25)",2),this.setSvg(this.c[3],"stroke","#666",4),this.setSvg(this.c[3],"fill","none",4));break;case 1:0===this.model?(this.setSvg(this.c[3],"fill",
"url(#gradIn2)",4),this.setSvg(this.c[3],"stroke","rgba(0,0,0,0)",4)):(this.setSvg(this.c[3],"stroke","rgba(48,138,255,0.25)",2),this.setSvg(this.c[3],"stroke",this.colors.select,4),this.setSvg(this.c[3],"fill","rgba(48,138,255,0.25)",4))}},addInterval:function(){null!==this.interval&&this.stopInterval();this.pos.isZero()||(this.interval=setInterval(function(){this.update()}.bind(this),10))},stopInterval:function(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)},reset:function(){this.addInterval();
this.mode(0)},mouseup:function(a){this.addInterval();this.isDown=!1},mousedown:function(a){this.isDown=!0;this.mousemove(a);this.mode(2)},mousemove:function(a){this.mode(1);this.isDown&&(this.tmp.x=this.radius-(a.clientX-this.zone.x),this.tmp.y=this.radius-(a.clientY-this.zone.y-this.top),this.tmp.length()>this.distance&&(a=Math.atan2(this.tmp.x,this.tmp.y),this.tmp.x=Math.sin(a)*this.distance,this.tmp.y=Math.cos(a)*this.distance),this.pos.copy(this.tmp).divideScalar(this.distance).negate(),this.update())},
setValue:function(a){void 0===a&&(a=[0,0]);this.pos.set(a[0]||0,a[1]||0);this.updateSVG()},update:function(a){void 0===a&&(a=!0);null===this.interval||this.isDown||(this.pos.lerp(null,.3),this.pos.x=.01>Math.abs(this.pos.x)?0:this.pos.x,this.pos.y=.01>Math.abs(this.pos.y)?0:this.pos.y,this.isUI&&this.main.isCanvas&&this.main.draw());this.updateSVG();a&&this.send();this.pos.isZero()&&this.stopInterval()},updateSVG:function(){var a=this.radius- -this.pos.x*this.distance,b=this.radius- -this.pos.y*this.distance;
if(0===this.model){var c=b+5*this.pos.y+10;this.setSvg(this.c[3],"cx",(a+5*this.pos.x+5)*this.ratio,3);this.setSvg(this.c[3],"cy",c*this.ratio,3)}else this.setSvg(this.c[3],"cx",a*this.ratio,3),this.setSvg(this.c[3],"cy",b*this.ratio,3);this.setSvg(this.c[3],"cx",a*this.ratio,4);this.setSvg(this.c[3],"cy",b*this.ratio,4);this.value[0]=1*(this.pos.x*this.multiplicator).toFixed(this.precision);this.value[1]=1*(this.pos.y*this.multiplicator).toFixed(this.precision);this.c[2].textContent=this.value},
clear:function(){this.stopInterval();h.prototype.clear.call(this)}});z.prototype=Object.assign(Object.create(r.prototype),{constructor:z,mode:function(a){if(this.cmode===a)return!1;switch(a){case 0:this.s[2].color=this.fontColor;this.setSvg(this.c[3],"fill",this.colors.button,0);this.setSvg(this.c[3],"stroke",this.fontColor,1);break;case 1:this.s[2].color=this.colorPlus,this.setSvg(this.c[3],"fill",this.colors.select,0),this.setSvg(this.c[3],"stroke",this.colorPlus,1)}this.cmode=a;return!0},mousemove:function(a){if(this.isDown){var b=
this.offset;b.x=this.radius-(a.clientX-this.zone.x);b.y=this.radius-(a.clientY-this.zone.y-this.top);this.r=-Math.atan2(b.x,b.y);null!==this.oldr&&(this.r=Math.abs(this.r-this.oldr)>Math.PI?this.oldr:this.r);this.r=this.r>this.mPI?this.mPI:this.r;this.r=this.r<-this.mPI?-this.mPI:this.r;a=1/this.cirRange*this.range*(this.r+this.mPI)+this.min-this.old;if(a>=this.step||a<=this.step)a=Math.floor(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value,this.oldr=
this.r}},makeGrad:function(){var a="",b=Math.PI+this.mPI;var c=Math.PI-this.mPI;if(5<this.step){var d=this.range/this.step;c=(b-c)/d}else c=(b-c)/64*2,d=32;for(var e=0;e<=d;++e){var f=b-c*e;var g=64+44*Math.sin(f);var h=64+44*Math.cos(f);var k=64+40*Math.sin(f);f=64+40*Math.cos(f);a+="M"+g+" "+h+" L"+k+" "+f+" "}return a},update:function(a){this.c[2].textContent=this.value;this.percent=(this.value-this.min)/this.range;var b=this.percent*this.cirRange-this.mPI,c=Math.sin(b);b=Math.cos(b);this.setSvg(this.c[3],
"d","M "+(25*c+64)+" "+(-(25*b)+64)+" L "+(20*c+64)+" "+(-(20*b)+64),1);a&&this.send()}});A.prototype=Object.assign(Object.create(h.prototype),{constructor:A,preloadImage:function(){this.preLoadComplete=!1;this.tmpImage={};for(var a=0;a<this.list.length;a++)this.tmpUrl.push(this.list[a]);this.loadOne()},nextImg:function(){this.tmpUrl.shift();0===this.tmpUrl.length?(this.preLoadComplete=!0,this.addImages()):this.loadOne()},loadOne:function(){var a=this,b=this.tmpUrl[0],c=document.createElement("img");
c.style.cssText="position:absolute; width:"+a.imageSize[0]+"px; height:"+a.imageSize[1]+"px";c.setAttribute("src",this.path+b+this.format);c.addEventListener("load",function(){a.imageSize[2]=c.width;a.imageSize[3]=c.height;a.tmpImage[b]=c;a.nextImg()})},testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";if(this.up&&this.isOpen){if(a.y>this.h-this.baseH)return"title";if(this.scroll&&a.x>this.sa+this.sb-20)return"scroll";if(a.x>this.sa)return this.testItems(a.y-this.baseH)}else{if(a.y<
this.baseH+2)return"title";if(this.isOpen){if(this.scroll&&a.x>this.sa+this.sb-20)return"scroll";if(a.x>this.sa)return this.testItems(a.y-this.baseH)}}return""},testItems:function(a){for(var b="",c=this.items.length,d,e,f;c--;)if(d=this.items[c],e=d.posy+this.topList,f=d.posy+this.itemHeight+1+this.topList,a>=e&&a<=f){b="item"+c;this.unSelected();this.current=d;this.selected();break}return b},unSelected:function(){this.current&&(this.current.style.background="rgba(0,0,0,0.2)",this.current.style.color=
this.fontColor,this.current=null)},selected:function(){this.current.style.background=this.colors.select;this.current.style.color="#FFF"},mouseup:function(a){this.isDown=!1},mousedown:function(a){var b=this.testZone(a);if(!b)return!1;"scroll"===b?(this.isDown=!0,this.mousemove(a)):"title"===b?(this.modeTitle(2),this.isOpen?this.close():this.open()):this.current&&(this.value=this.list[this.current.id],this.setTopItem(),this.send(),this.close());return!0},mousemove:function(a){var b=!1,c=this.testZone(a);
if(!c)return b;"title"===c?(this.unSelected(),this.modeTitle(1),this.cursor("pointer")):"scroll"===c?(this.cursor("s-resize"),this.modeScroll(1),this.isDown&&(this.modeScroll(2),this.update(a.clientY-(this.zone.y+this.baseH-2)-.5*this.sh))):(this.modeTitle(0),this.modeScroll(0),this.cursor("pointer"));c!==this.prevName&&(b=!0);this.prevName=c;return b},wheel:function(a){if("title"===this.testZone(a))return!1;this.py+=10*a.delta;this.update(this.py);return!0},reset:function(){this.prevName="";this.unSelected();
this.modeTitle(0);this.modeScroll(0)},modeScroll:function(a){if(a!==this.sMode){switch(a){case 0:this.scroller.style.background=this.buttonColor;break;case 1:this.scroller.style.background=this.colors.select;break;case 2:this.scroller.style.background=this.colors.down}this.sMode=a}},modeTitle:function(a){if(a!==this.tMode){var b=this.s;switch(a){case 0:b[3].color=this.fontColor;b[3].background=this.buttonColor;break;case 1:b[3].color="#FFF";b[3].background=this.colors.select;break;case 2:b[3].color=
this.fontColor,b[3].background=this.colors.down}this.tMode=a}},clearList:function(){for(;this.listIn.children.length;)this.listIn.removeChild(this.listIn.lastChild);this.items=[]},setList:function(a){this.clearList();this.list=a;this.length=this.list.length;this.maxItem=this.full?this.length:5;this.maxItem=this.length<this.maxItem?this.length:this.maxItem;this.maxHeight=this.maxItem*(this.itemHeight+1)+2;this.max=this.length*(this.itemHeight+1)+2;this.ratio=this.maxHeight/this.max;this.sh=this.maxHeight*
this.ratio;this.range=this.maxHeight-this.sh;this.c[2].style.height=this.maxHeight+"px";this.scroller.style.height=this.sh+"px";this.max>this.maxHeight&&(this.ww=this.sb-20,this.scroll=!0);for(var b,c=0;c<this.length;c++)b=this.list[c],a=this.dom("div",this.css.item+"width:"+this.ww+"px; height:"+this.itemHeight+"px; line-height:"+(this.itemHeight-5)+"px; color:"+this.fontColor+";"),a.name="item"+c,a.id=c,a.posy=(this.itemHeight+1)*c,this.listIn.appendChild(a),this.items.push(a),this.isWithImage||
(a.textContent=b);this.setTopItem()},addImages:function(){for(var a=this.list.length,b=0;b<a;b++)this.items[b].appendChild(this.tmpImage[this.list[b]]);this.setTopItem()},setTopItem:function(){this.isWithImage?this.preLoadComplete&&(this.c[3].children.length||(this.canvas=document.createElement("canvas"),this.canvas.width=this.imageSize[0],this.canvas.height=this.imageSize[1],this.canvas.style.cssText="position:absolute; top:0px; left:0px;",this.ctx=this.canvas.getContext("2d"),this.c[3].appendChild(this.canvas)),
this.ctx.drawImage(this.tmpImage[this.value],0,0,this.imageSize[2],this.imageSize[3],0,0,this.imageSize[0],this.imageSize[1])):this.c[3].textContent=this.value},update:function(a){this.scroll&&(a=0>a?0:a,a=a>this.range?this.range:a,this.topList=-Math.floor(a/this.ratio),this.listIn.style.top=this.topList+"px",this.scroller.style.top=Math.floor(a)+"px",this.py=a)},parentHeight:function(a){null!==this.parentGroup?this.parentGroup.calc(a):this.isUI&&this.main.calc(a)},open:function(){h.prototype.open.call(this);
this.update(0);this.h=this.maxHeight+this.baseH+5;this.scroll?this.scroller.style.display="block":(this.topList=0,this.h=this.baseH+5+this.max,this.scroller.style.display="none");this.s[0].height=this.h+"px";this.s[2].display="block";this.up?(this.zone.y-=this.h-(this.baseH-10),this.setSvg(this.c[4],"d",this.svgs.arrowUp)):this.setSvg(this.c[4],"d",this.svgs.arrowDown);this.rSizeContent();var a=this.h-this.baseH;this.zone.h=this.h;this.parentHeight(a)},close:function(){h.prototype.close.call(this);
this.up&&(this.zone.y+=this.h-(this.baseH-10));var a=this.h-this.baseH;this.h=this.baseH;this.s[0].height=this.h+"px";this.s[2].display="none";this.setSvg(this.c[4],"d",this.svgs.arrow);this.zone.h=this.h;this.parentHeight(-a)},text:function(a){this.c[3].textContent=a},rSizeContent:function(){for(var a=this.length;a--;)this.listIn.children[a].style.width=this.ww+"px"},rSize:function(){h.prototype.rSize.call(this);var a=this.s,b=this.sb,c=this.sa;void 0!==a[2]&&(a[2].width=b+"px",a[2].left=c+"px",
a[3].width=b+"px",a[3].left=c+"px",a[4].left=c+b-17+"px",this.ww=b,this.max>this.maxHeight&&(this.ww=b-20),this.isOpen&&this.rSizeContent())}});B.prototype=Object.assign(Object.create(h.prototype),{constructor:B,testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";for(var b=this.lng,c=this.tmp;b--;)if(a.x>c[b][0]&&a.x<c[b][2])return b;return""},mousedown:function(a){var b=this.testZone(a);return this.isDown?!1:(this.isDown=!0,""!==b&&(this.current=b,this.prev={x:a.clientX,y:a.clientY,
d:0,v:this.isNumber?parseFloat(this.value):parseFloat(this.value[this.current])},this.setInput(this.c[3+this.current])),this.mousemove(a))},mouseup:function(a){return this.isDown?(this.isDown=!1,this.prev={x:0,y:0,d:0,v:0},this.mousemove(a)):!1},mousemove:function(a){var b=!1,c=0;""===this.testZone(a)?this.cursor():this.isDrag?this.cursor(-1!==this.current?"move":"pointer"):this.cursor("text");if(this.isDrag)-1!==this.current&&(this.prev.d+=a.clientX-this.prev.x-(a.clientY-this.prev.y),this.value[this.current]=
this.numValue(this.prev.v+this.prev.d*this.step),this.c[3+this.current].textContent=this.value[this.current],this.validate(),this.prev.x=a.clientX,this.prev.y=a.clientY,b=!0);else return this.isDown&&(c=a.clientX-this.zone.x-3),-1!==this.current&&(c-=this.tmp[this.current][0]),this.upInput(c,this.isDown);return b},reset:function(){return!1},setValue:function(a,b){b=b||0;this.value[b]=this.numValue(a);this.c[3+b].textContent=this.value[b]},select:function(a,b,c){var d=this.s,e=-1!==this.current?this.tmp[this.current][0]+
5:0;d[this.cursorId].width="1px";d[this.cursorId].left=e+a+"px";d[2].left=e+b+"px";d[2].width=c+"px"},unselect:function(){var a=this.s;a[2].width="0px";a[this.cursorId].width="0px"},validate:function(){for(var a=[],b=this.lng;b--;){if(isNaN(this.c[3+b].textContent))this.c[3+b].textContent=this.value[b];else{var c=this.numValue(this.c[3+b].textContent);this.c[3+b].textContent=c;this.value[b]=c}a[b]=this.value[b]*this.toRad}this.isNumber?this.send(a[0]):this.send(a)},rSize:function(){h.prototype.rSize.call(this);
for(var a=Math.floor((this.sb+5)/this.lng)-5,b=this.s,c=this.lng;c--;)this.tmp[c]=[Math.floor(this.sa+a*c+5*c),a],this.tmp[c][2]=this.tmp[c][0]+this.tmp[c][1],b[3+c].left=this.tmp[c][0]+"px",b[3+c].width=this.tmp[c][1]+"px"}});C.prototype=Object.assign(Object.create(h.prototype),{constructor:C,testZone:function(a){a=this.local;return-1===a.x&&-1===a.y?"":a.x>=this.txl?"text":a.x>=this.sa?"scroll":""},mouseup:function(a){this.isDown&&(this.isDown=!1)},mousedown:function(a){var b=this.testZone(a);if(!b)return!1;
"scroll"===b&&(this.isDown=!0,this.old=this.value,this.mousemove(a));"text"===b&&this.setInput(this.c[2],function(){this.validate()}.bind(this));return!0},mousemove:function(a){var b=!1,c=this.testZone(a);"scroll"===c?(this.mode(1),this.cursor("w-resize")):"text"===c?this.cursor("pointer"):this.cursor();if(this.isDown){a=(a.clientX-(this.zone.x+this.sa)-3)/this.ww*this.range+this.min-this.old;if(a>=this.step||a<=this.step)a=Math.floor(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),
this.old=this.value;b=!0}return b},keydown:function(a){return!0},validate:function(){var a=this.c[2].textContent;isNaN(a)?this.c[2].textContent=this.value:(this.value=this.numValue(a),this.update(!0))},reset:function(){this.isDown=!1;this.mode(0)},mode:function(a){var b=this.s;switch(a){case 0:b[2].color=this.fontColor;b[4].background=this.colors.scrollback;b[5].background=this.fontColor;break;case 1:b[2].color=this.colorPlus,b[4].background=this.colors.scrollbackover,b[5].background=this.colorPlus}},
update:function(a){var b=Math.floor((this.value-this.min)/this.range*this.ww);3!==this.model&&(this.s[5].width=b+"px");this.s[6]&&(this.s[6].left=this.sa+b+3+"px");this.c[2].textContent=this.value;a&&this.send()},rSize:function(){h.prototype.rSize.call(this);var a=this.sb-this.sc;this.ww=a-6;var b=this.sc;if(this.isUI||!this.simple)b=this.sc+10;this.txl=this.w-b+2;b=this.s;b[2].width=this.sc-6+"px";b[2].left=this.txl+4+"px";b[3].left=this.sa+"px";b[3].width=a+"px";b[4].left=this.sa+"px";b[4].width=
a+"px";b[5].left=this.sa+3+"px";this.update()}});D.prototype=Object.assign(Object.create(h.prototype),{constructor:D,testZone:function(a){a=this.local;return-1===a.x&&-1===a.y?"":a.x>=this.sa?"text":""},mouseup:function(a){return this.isDown?(this.isDown=!1,this.mousemove(a)):!1},mousedown:function(a){var b=this.testZone(a);return this.isDown?!1:(this.isDown=!0,"text"===b&&this.setInput(this.c[3]),this.mousemove(a))},mousemove:function(a){var b=0;"text"===this.testZone(a)?this.cursor("text"):this.cursor();
this.isDown&&(b=a.clientX-this.zone.x);return this.upInput(b-this.sa-3,this.isDown)},render:function(a,b,c){this.s[4].width="1px";this.s[4].left=this.sa+a+5+"px";this.s[2].left=this.sa+b+5+"px";this.s[2].width=c+"px"},reset:function(){this.cursor()},select:function(a,b,c){var d=this.s,e=this.sa+5;d[4].width="1px";d[4].left=e+a+"px";d[2].left=e+b+"px";d[2].width=c+"px"},unselect:function(){var a=this.s;a[2].width="0px";a[4].width="0px"},validate:function(){this.value=this.c[3].textContent;this.send()},
rSize:function(){h.prototype.rSize.call(this);var a=this.s;a[3].left=this.sa+"px";a[3].width=this.sb+"px"}});E.prototype=Object.assign(Object.create(h.prototype),{constructor:E,text:function(a){this.c[1].textContent=a},text2:function(a){this.c[2].textContent=a},rSize:function(){h.prototype.rSize.call(this);this.s[1].width=this.w-50+"px";this.s[2].left=this.w-76+"px"}});G.prototype=Object.assign(Object.create(h.prototype),{constructor:G,testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";
for(var b=this.lng,c=this.tmp;b--;)if(a.x>c[b][0]&&a.x<c[b][2])return b+2;return""},mouseup:function(a){return this.isDown?(this.isDown=!1,this.mousemove(a)):!1},mousedown:function(a){var b=this.testZone(a);if(!b)return!1;this.isDown=!0;this.value=this.values[b-2];this.send();return this.mousemove(a)},mousemove:function(a){a=this.testZone(a);""!==a?(this.cursor("pointer"),a=this.modes(this.isDown?3:2,a)):a=this.reset();return a},modes:function(a,b){for(var c,d=!1,e=0;e<this.lng;e++)(c=e===b-2&&this.values[e]!==
this.value?this.mode(a,e+2):this.values[e]===this.value?this.mode(3,e+2):this.mode(1,e+2))&&(d=!0);return d},mode:function(a,b){var c=!1;b-=2;if(this.stat[b]!==a){switch(a){case 1:this.stat[b]=1;this.s[b+2].color=this.fontColor;this.s[b+2].background=this.buttonColor;break;case 2:this.stat[b]=2;this.s[b+2].color="#FFF";this.s[b+2].background=this.colors.over;break;case 3:this.stat[b]=3,this.s[b+2].color="#FFF",this.s[b+2].background=this.colors.select}c=!0}return c},reset:function(){this.cursor();
for(var a,b=!1,c=0;c<this.lng;c++)(a=this.values[c]===this.value?this.mode(3,c+2):this.mode(1,c+2))&&(b=!0);return b},label:function(a,b){this.c[b||2].textContent=a},icon:function(a,b,c){c=c||2;this.s[c].padding=(b||0)+"px 0px";this.c[c].innerHTML=a},rSize:function(){h.prototype.rSize.call(this);for(var a=this.s,b=this.sa,c=this.lng,d=Math.floor((this.sb-3*(c-1))/c);c--;)this.tmp[c]=[Math.floor(b+d*c+3*c),d],this.tmp[c][2]=this.tmp[c][0]+this.tmp[c][1],a[c+2].left=this.tmp[c][0]+"px",a[c+2].width=
this.tmp[c][1]+"px"}});H.prototype=Object.assign(Object.create(h.prototype),{constructor:H});I.prototype=Object.assign(Object.create(h.prototype),{constructor:I,mousemove:function(a){this.cursor("pointer")},mousedown:function(a){this.isUI&&this.main.resetItem();this.selected(!0);this.send();return!0},uiout:function(){this.isSelect?this.mode(3):this.mode(1)},uiover:function(){this.isSelect?this.mode(4):this.mode(2)},update:function(){},rSize:function(){h.prototype.rSize.call(this)},mode:function(a){var b=
!1;if(this.status!==a){this.status=a;switch(a){case 1:this.status=1;this.s[1].color=this.fontColor;this.s[0].background="none";break;case 2:this.status=2;this.s[1].color=this.fontColor;this.s[0].background=this.bgOver;break;case 3:this.status=3;this.s[1].color="#FFF";this.s[0].background=this.colors.select;break;case 4:this.status=4,this.s[1].color="#FFF",this.s[0].background=this.colors.down}b=!0}return b},reset:function(){this.cursor()},selected:function(a){this.isSelect&&this.mode(1);(this.isSelect=
a||!1)&&this.mode(3)}});Object.assign(K.prototype,{constructor:K,isGui:!0,setTop:function(a,b){this.content.style.top=a+"px";void 0!==b&&(this.forceHeight=b);this.setHeight()},dispose:function(){this.clear();null!==this.parent&&this.parent.removeChild(this.content);k.remove(this)},onDraw:function(){},makeCanvas:function(){this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.canvas.width=this.zone.w;this.canvas.height=this.forceHeight?this.forceHeight:this.zone.h},draw:function(a){null!==
this.canvas&&k.toCanvas(this,this.zone.w,this.forceHeight?this.forceHeight:this.zone.h,a)},getDom:function(){return this.content},setMouse:function(a){this.mouse.set(a.x,a.y)},setConfig:function(a){this.setColors(a);this.setText(a.fontSize,a.text,a.font,a.shadow)},setColors:function(a){for(var b in a)this.colors[b]&&(this.colors[b]=a[b])},setText:function(a,b,c,d){g.setText(a,b,c,d,this.colors,this.css)},hide:function(a){this.content.style.display=a?"none":"block"},onChange:function(a){this.callback=
a;return this},mode:function(a){var b=!1;if(a!==this.cn){this.cn=a;switch(a){case "def":this.scroll.style.background=this.colors.scroll;this.bottom.style.background=this.colors.background;this.bottom.style.color=this.colors.text;break;case "scrollOver":this.scroll.style.background=this.colors.select;break;case "scrollDown":this.scroll.style.background=this.colors.down;break;case "bottomOver":this.bottom.style.background=this.colors.backgroundOver,this.bottom.style.color="#FFF"}b=!0}return b},clearTarget:function(){if(-1===
this.current)return!1;this.target.uiout();this.target.reset();this.target=null;this.current=-1;k.cursor();return!0},testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";this.isReset=!1;var b=this.isScroll?this.zone.w-this.size.s:this.zone.w;return a.y>this.zone.h-this.bh&&a.y<this.zone.h?"bottom":a.x>b?"scroll":"content"},handleEvent:function(a){var b=a.type,c=!1,d=!1,e=this.testZone(a);"mouseup"===b&&this.isDown&&(this.isDown=!1);"mousedown"!==b||this.isDown||(this.isDown=!0);this.isDown&&
this.isNewTarget&&(k.clearInput(),this.isNewTarget=!1);if(e){switch(e){case "content":a.clientY=this.isScroll?a.clientY+this.decal:a.clientY;k.isMobile&&"mousedown"===b&&this.getNext(a,c);this.target&&(d=this.target.handleEvent(a));"mousemove"===b&&(c=this.mode("def"));"wheel"===b&&!d&&this.isScroll&&(c=this.onWheel(a));k.lock||this.getNext(a,c);break;case "bottom":this.clearTarget();"mousemove"===b&&(c=this.mode("bottomOver"));"mousedown"===b&&(this.isOpen=this.isOpen?!1:!0,this.bottom.textContent=
this.isOpen?"close":"open",this.setHeight(),this.mode("def"),c=!0);break;case "scroll":this.clearTarget(),"mousemove"===b&&(c=this.mode("scrollOver")),"mousedown"===b&&(c=this.mode("scrollDown")),"wheel"===b&&(c=this.onWheel(a)),this.isDown&&this.update(a.clientY-this.zone.y-.5*this.sh)}this.isDown&&(c=!0);d&&(c=!0);"keyup"===b&&(c=!0);"keydown"===b&&(c=!0);c&&this.draw()}},getNext:function(a,b){a=k.findTarget(this.uis,a);a!==this.current&&(this.clearTarget(),this.current=a,this.isNewTarget=!0);-1!==
a&&(this.target=this.uis[this.current],this.target.uiover())},onWheel:function(a){this.oy+=20*a.delta;this.update(this.oy);return!0},reset:function(a){if(!this.isReset){this.mouse.neg();this.isDown=!1;a=this.mode("def");var b=this.clearTarget();(a||b)&&this.draw(!0);this.isReset=!0}},add:function(){var a=arguments;"object"===typeof a[1]?(a[1].isUI=!0,a[1].main=this):"string"===typeof a[1]&&(void 0===a[2]?[].push.call(a,{isUI:!0,main:this}):(a[2].isUI=!0,a[2].main=this));a=J.apply(this,a);if(null!==
a){this.uis.push(a);if(a.autoWidth)this.prevY=0,this.calc(a.h+1);else{var b=a.c[0].getBoundingClientRect().top;this.prevY!==b&&(this.calc(a.h+1),this.prevY=b)}return a}},applyCalc:function(){this.calc(this.tmpH);this.tmpAdd=null},calcUis:function(){k.calcUis(this.uis,this.zone,this.zone.y)},remove:function(a){a=this.uis.indexOf(a);-1!==a&&this.uis[a].clear()},clearOne:function(a){a=this.uis.indexOf(a);-1!==a&&(this.inner.removeChild(this.uis[a].c[0]),this.uis.splice(a,1))},clear:function(){for(var a=
this.uis.length;a--;)this.uis[a].clear();this.uis=[];k.listens=[];this.calc(-this.h)},resetItem:function(){if(this.isItemMode)for(var a=this.uis.length;a--;)this.uis[a].selected()},setItem:function(a){if(this.isItemMode){this.resetItem();for(var b=this.uis.length;b--;)this.uis[b].value===a&&(this.uis[b].selected(!0),this.isScroll&&this.update(b*(this.size.h+1)*this.ratio))}},upScroll:function(a){this.sw=a?this.size.s:0;this.oy=a?this.oy:0;this.scrollBG.style.display=a?"block":"none";a&&(this.total=
this.h,this.maxView=this.maxHeight,this.ratio=this.maxView/this.total,this.sh=this.maxView*this.ratio,this.range=this.maxView-this.sh,this.oy=g.clamp(this.oy,0,this.range),this.scrollBG.style.height=this.maxView+"px",this.scroll.style.height=this.sh+"px");this.setItemWidth(this.zone.w-this.sw);this.update(this.oy)},update:function(a){a=g.clamp(a,0,this.range);this.decal=Math.floor(a/this.ratio);this.inner.style.top=-this.decal+"px";this.scroll.style.top=Math.floor(a)+"px";this.oy=a},calc:function(a){this.h+=
a;clearTimeout(this.tmp);this.tmp=setTimeout(this.setHeight.bind(this),10)},setHeight:function(){this.tmp&&clearTimeout(this.tmp);this.zone.h=this.bh;this.isScroll=!1;this.isOpen&&(this.maxHeight=(this.forceHeight?this.forceHeight+this.zone.y:window.innerHeight)-this.zone.y-this.bh,1<this.h-this.maxHeight?(this.isScroll=!0,this.zone.h=this.maxHeight+this.bh):this.zone.h=this.h+this.bh);this.upScroll(this.isScroll);this.innerContent.style.height=this.zone.h-this.bh+"px";this.content.style.height=this.zone.h+
"px";this.bottom.style.top=this.zone.h-this.bh+"px";this.forceHeight&&this.lockHeight&&(this.content.style.height=this.forceHeight+"px");this.isOpen&&this.calcUis();this.isCanvas&&this.draw(!0)},setWidth:function(a){a&&(this.zone.w=a);this.content.style.width=this.zone.w+"px";this.isCenter&&(this.content.style.marginLeft=-Math.floor(.5*this.zone.w)+"px");this.setItemWidth(this.zone.w-this.sw);this.setHeight();this.isCanvasOnly||(k.needReZone=!0)},setItemWidth:function(a){for(var b=this.uis.length;b--;)this.uis[b].setSize(a),
this.uis[b].rSize()}});l.Bool=t;l.Button=u;l.Circular=r;l.Color=v;l.Fps=w;l.Group=x;l.Gui=K;l.Joystick=y;l.Knob=z;l.List=A;l.Numeric=B;l.Proto=h;l.REVISION="2.66";l.Slide=C;l.TextInput=D;l.Title=E;l.Tools=g;l.add=J;Object.defineProperty(l,"__esModule",{value:!0})});
