'use strict';var UMC=UMC||function(){var a=document,b=a.getElementsByTagName("head")[0],c="height width top left bottom right margin-left margin-right margin-top margin-bottom".split(" "),d="pattern defs transform stop animate radialGradient linearGradient".split(" "),e="rect circle path polygon text g line foreignObject".split(" ");UMC=function(){};UMC.setSvg=function(a,b,c,d){-1===d?a.setAttributeNS(null,b,c):a.childNodes[d||0].setAttributeNS(null,b,c)};UMC.setDom=function(a,b,d){var e=-1!==c.indexOf(b)?
"px":"";a.style[b]=d+e};UMC.clearDom=function(a){for(;a.children.length;){if(a.lastChild.children)for(;a.lastChild.children.length;)a.lastChild.removeChild(a.lastChild.lastChild);a.removeChild(a.lastChild)}};UMC.dom=function(b,c,k,f,l,m){c=c||"div";-1!==d.indexOf(c)||-1!==e.indexOf(c)?(void 0===l&&(l=a.createElementNS("http://www.w3.org/2000/svg","svg")),UMC.add(l,c,f,m)):void 0===l&&(l=a.createElementNS("http://www.w3.org/1999/xhtml",c));b&&l.setAttribute("class",b);k&&(l.style.cssText=k);return void 0===
m?l:l.childNodes[m||0]};UMC.cc=function(c,d,e){e=void 0===e?".":"";"*"===c&&(e="");var f=a.createElement("style");f.setAttribute("type","text/css");f.setAttribute("id",c);b.appendChild(f);(f.sheet||{}).insertRule?f.sheet.insertRule(e+c+"{"+d+"}",0):(f.styleSheet||f.sheet).addRule(e+c,d)};UMC.add=function(a,b,c,d){var l=document.createElementNS("http://www.w3.org/2000/svg",b);this.set(l,c);this.get(a,d).appendChild(l);-1!==e.indexOf(b)&&(l.style.pointerEvents="none");return l};UMC.set=function(a,b){for(var c in b)"txt"===
c&&(a.textContent=b[c]),a.setAttributeNS(null,c,b[c])};UMC.get=function(a,b){if(void 0===b)return a;if(!isNaN(b))return a.childNodes[b];if(b instanceof Array){if(2===b.length)return a.childNodes[b[0]].childNodes[b[1]];if(3===b.length)return a.childNodes[b[0]].childNodes[b[1]].childNodes[b[2]]}};return UMC}();var define,module,exports,UIL=function(){UIL=function(){};UIL.REVISION="0.9";UIL.main=null;UIL.DEF=!1;UIL.WIDTH=300;UIL.BW=190;UIL.AW=100;UIL.UNS="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;";UIL.US="-o-user-select:text; -ms-user-select:text; -khtml-user-select:text; -webkit-user-select:text; -moz-user-select:text;";UIL.TXT='font-family:"Lucida Console", Monaco, monospace; font-size:11px; color:#cccccc; background:none; padding:3px 10px; left:0; top:0; height:17px; width:100px; overflow:hidden; white-space: nowrap;';
UIL.DOM=UMC.dom;UIL.CC=UMC.cc;UIL.setSvg=UMC.setSvg;UIL.COLOR="N";UIL.SELECT="#035fcf";UIL.MOVING="#03afff";UIL.SELECTDOWN="#024699";UIL.SVGB="rgba(0,0,0,0.2)";UIL.SVGC="rgba(120,120,120,0.6)";UIL.BorderSelect="rgba(3,95,207,0.6)";UIL.sizer=function(a){this.WIDTH=~~a;a=this.WIDTH/3;this.BW=~~(2*a-10);this.AW=~~a;this.main&&this.main.changeWidth()};UIL.classDefine=function(){UIL.CC("UIL",UIL.UNS+" position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; ");UIL.CC("UIL.content",
" display:block; width:300px; height:auto; top:0; left:0; overflow:hidden; background:none; transition:height, 0.1s ease-out;");UIL.CC("UIL.inner","width:100%; top:0; left:0; height:auto; overflow:hidden; background:none; ");UIL.CC("UIL.bottom",UIL.TXT+"width:100%; top:auto; bottom:0; left:0; height:20px; overflow:hidden; background:none; text-align:center; padding:5px 10px; pointer-events:auto; cursor:pointer;");UIL.CC("UIL.base","position:relative; height:20px; overflow:hidden; float: left");UIL.CC("UIL.text",
UIL.TXT);UIL.CC("UIL.textSelect",UIL.TXT+UIL.US+"outline:none; -webkit-appearance:none; -moz-appearance:none; border:1px solid rgba(255,255,255,0.1);");UIL.CC("UIL.list","box-sizing:content-box; border:20px solid transparent; border-bottom:10px solid transparent; left:80px; top:0px; width:190px; height:90px; overflow:hidden; cursor:s-resize; pointer-events:auto; display:none;");UIL.CC("UIL.list-in","left:0; top:0; width:100%; background:rgba(0,0,0,0.2); ");UIL.CC("UIL.listItem","position:relative; height:18px; background:rgba(0,0,0,0.2); border-bottom:1px solid rgba(0,0,0,0.2); pointer-events:auto; cursor:pointer;"+
UIL.TXT);UIL.CC("UIL.listItem:hover","background:"+UIL.SELECT+"; color:#FFFFFF;");UIL.CC("UIL.scroll-bg","cursor:w-resize; pointer-events:auto; background-image:linear-gradient(to right,  rgba(255,255,255,0), rgba(255,255,255,0.1));");UIL.CC("UIL.scroll"," background:rgba(255,255,255,0.2);");UIL.CC("UIL.svgbox","left:100px; top:1px; width:190px; height:17px; pointer-events:auto; cursor:pointer;");UIL.DEF=!0};UIL.bgcolor=function(a,b){var c=48,d=48,e=48;b=b||0.66;if(a)switch(a){case "r":case "R":case "S":c=
160;e=68;break;case "g":case "G":case "E":d=120;e=68;break;case "b":case "B":case "T":e=120;d=68;break;case "no":case "NO":b=0}c="rgba("+c+","+d+","+e+","+b+")";0===b&&(c="none");return c};UIL.classDefine();return UIL}();(function(a){"function"===typeof define&&define.amd?define("uil",UIL):"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=UIL:a.UIL=UIL})(this);UIL.Gui=function(a,b,c,d){UIL.sizer(b||300);this.width=UIL.WIDTH;UIL.main=this;this.color=d||UIL.COLOR;this.isCenter=c||!1;this.lockwheel=!1;this.isOpen=!0;this.uis=[];this.content=UIL.DOM("UIL content","div",a);document.body.appendChild(this.content);this.inner=UIL.DOM("UIL inner");this.content.appendChild(this.inner);this.inner.name="inner";this.scrollBG=UIL.DOM("UIL scroll-bg","div","right:0; top:0; width:10px; height:10px; cursor:s-resize; display:none; ");this.content.appendChild(this.scrollBG);
this.scrollBG.name="scroll";this.scroll=UIL.DOM("UIL scroll","div","left:4px; top:0; width:3px; height:10px;  ");this.scrollBG.appendChild(this.scroll);this.bottom=UIL.DOM("UIL bottom");this.content.appendChild(this.bottom);this.bottom.textContent="close";this.bottom.name="bottom";this.bottom.style.background=UIL.bgcolor(this.color);this.changeWidth();this.isScroll=this.isDown=!1;this.content.addEventListener("mousedown",this,!1);this.content.addEventListener("mousemove",this,!1);this.content.addEventListener("mouseout",
this,!1);this.content.addEventListener("mouseup",this,!1);this.content.addEventListener("mouseover",this,!1);document.addEventListener("mousewheel",this,!1);window.addEventListener("resize",function(a){this.resize(a)}.bind(this),!1);this.resize()};
UIL.Gui.prototype={constructor:UIL.Gui,handleEvent:function(a){switch(a.type){case "mousedown":this.down(a);break;case "mouseout":this.out(a);break;case "mouseover":this.over(a);break;case "mousewheel":this.wheel(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}},down:function(a){a.target.name&&("scroll"===a.target.name&&(this.isDown=!0,this.move(a),this.scroll.style.background="rgba(255,255,255,0.75)",document.addEventListener("mouseup",this,!1),document.addEventListener("mousemove",
this,!1)),"bottom"===a.target.name&&(this.isOpen=this.isOpen?!1:!0,this.show()))},move:function(a){this.isDown&&(this.scroll.style.background="rgba(255,255,255,0.75)",this.update(a.clientY-this.top-0.5*this.sh))},out:function(a){a.target.name&&"scroll"===a.target.name&&(this.scroll.style.background="rgba(255,255,255,0.2)")},up:function(a){this.isDown=!1;this.scroll.style.background="rgba(255,255,255,0.2)";document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,
!1)},over:function(a){a.target.name&&"scroll"===a.target.name&&(this.scroll.style.background="rgba(255,255,255,0.5)")},wheel:function(a){if(!this.lockwheel&&this.isScroll){var b=a.clientX,c=this.content.getBoundingClientRect().left;b<c||b>c+this.width||(b=0,a.wheelDeltaY?b=0.04*-a.wheelDeltaY:a.wheelDelta?b=0.2*-a.wheelDelta:a.detail&&(b=4*a.detail),this.py+=b,this.update(this.py))}},update:function(a){a=0>a?0:a;a=a>this.range?this.range:a;this.inner.style.top=-(a/this.ratio)+"px";this.scroll.style.top=
a+"px";this.py=a},add:function(a,b){void 0===b.isUI&&(b.isUI=!0);a=a[0].toUpperCase()+a.slice(1);var c=new UIL[a](b);this.uis.push(c);this.calc();return c},resize:function(a){this.calc();this.testHeight()},remove:function(a){a=this.uis.indexOf(a);-1!==a&&(this.uis[a].clear(),this.uis.splice(a,1))},clear:function(){this.update(0);for(var a=this.uis.length;a--;)this.uis[a].clear(),this.uis[a]=null,this.uis.pop();this.uis=[];this.calc()},showScroll:function(a){this.isScroll=!0;this.total=this.height-
20;this.maxView=this.maxHeight-20;this.ratio=this.maxView/this.total;this.sh=this.maxView*this.ratio;20>this.sh&&(this.sh=20);this.range=this.maxView-this.sh;this.scrollBG.style.display="block";this.scrollBG.style.height=this.maxView+"px";this.scroll.style.height=this.sh+"px";this.update(0)},hideScroll:function(){this.isScroll=!1;this.update(0);this.scrollBG.style.display="none"},calc:function(a){void 0!==a?(this.height+=a,this.content.style.height=this.height+"px"):(this.height=this.inner.offsetHeight+
20,this.content.style.height=this.height+"px","close"!==this.bottom.textContent&&(this.bottom.textContent="close"));this.tmp=setTimeout(this.testHeight.bind(this),10)},testHeight:function(){this.tmp&&clearTimeout(this.tmp);this.top=this.content.getBoundingClientRect().top;this.maxHeight=window.innerHeight-this.top-10;this.height>this.maxHeight?(this.content.style.height=this.maxHeight+"px",this.bottom.style.background=UIL.bgcolor(this.color,1),this.showScroll()):(this.hideScroll(),this.bottom.style.background=
UIL.bgcolor(this.color))},changeWidth:function(){this.width=UIL.WIDTH;this.content.style.width=this.width+"px";this.isCenter&&(this.content.style.marginLeft=-~~(0.5*UIL.WIDTH)+"px");for(var a=this.uis.length;a--;)this.uis[a].setSize(),this.uis[a].rSize();this.calc()},show:function(){this.isOpen?(this.inner.style.display="block",this.calc()):(this.content.style.height="20px",this.tmp=setTimeout(this.endHide.bind(this),100))},endHide:function(){this.tmp&&clearTimeout(this.tmp);this.inner.style.display=
"none";this.bottom.textContent="open"}};UIL.Proto=function(a){a=a||{};this.autoWidth=!0;this.autoHeight=!1;this.isUI=a.isUI||!1;this.mono=!1;this.simple=a.simple||!1;this.setSize(a.size);this.h=20;a.color&&(UIL.COLOR=a.color);this.color=UIL.COLOR;this.fontColor=void 0===a.fontColor?"#cccccc":a.fontColor;this.titleColor=void 0===a.titleColor?"#cccccc":a.titleColor;this.txt=a.name||"Proto";this.target=a.target||null;this.callback=a.callback||function(){};this.c=[];this.c[0]=UIL.DOM("UIL base");this.isUI&&(this.c[0].style.marginBottom="1px");
this.simple||(this.c[1]=UIL.DOM("UIL text"),this.c[1].textContent=this.txt,this.c[1].style.color=this.titleColor);if(a.pos){this.c[0].style.position="absolute";for(var b in a.pos)this.c[0].style[b]=a.pos[b];this.mono=!0}};
UIL.Proto.prototype={constructor:UIL.Proto,init:function(){this.c[0].style.height=this.h+"px";this.c[0].style.background=UIL.bgcolor(this.color);this.autoHeight&&(this.c[0].style.transition="height, 0.1s ease-out");for(var a=0;a<this.c.length;a++)0===a?null!==this.target?this.target.appendChild(this.c[0]):UIL.main.inner.appendChild(this.c[0]):void 0!==this.c[a]&&this.c[0].appendChild(this.c[a]);this.rSize();this.addEvent()},setCallBack:function(a){this.callback&&(this.callback=null);this.callback=
a},setSize:function(a){this.autoWidth&&(this.size=a||UIL.WIDTH,this.simple?(this.sa=1,this.sb=a-2):(this.sa=~~(this.size/3),this.sb=~~(2*this.sa-10)))},clear:function(){this.clearEvent();for(var a=this.c.length;a--;)0!==a&&void 0!==this.c[a]&&(this.c[a].children&&this.clearDOM(this.c[a]),this.c[0].removeChild(this.c[a]),this.c[a]=null);null!==this.target?this.target.removeChild(this.c[0]):UIL.main.inner.removeChild(this.c[0]);this.c=this.handleEvent=this.c[0]=null;this.callback&&(this.callback=null);
this.value&&(this.value=null)},clearDOM:function(a){for(;a.children.length;){if(a.lastChild.children)for(;a.lastChild.children.length;)a.lastChild.removeChild(a.lastChild.lastChild);a.removeChild(a.lastChild)}},setTypeNumber:function(a){this.min=void 0===a.min?-Infinity:a.min;this.max=void 0===a.max?Infinity:a.max;this.precision=void 0===a.precision?2:a.precision;var b;switch(this.precision){case 0:b=1;break;case 1:b=0.1;break;case 2:b=0.01;break;case 3:b=0.001;break;case 4:b=1E-4}this.step=void 0===
a.step?b:a.step},numValue:function(a){return 1*Math.min(this.max,Math.max(this.min,a)).toFixed(this.precision)},rSize:function(){this.autoWidth&&(this.c[0].style.width=this.size+"px",this.simple||(this.c[1].style.width=this.sa+"px"))},addEvent:function(){for(var a=this.c.length,b,c;a--;)if(c=this.c[a],void 0!==c&&void 0!==c.events)for(b=c.events.length;b--;)c.addEventListener(c.events[b],this,!1)},clearEvent:function(){for(var a=this.c.length,b,c;a--;)if(c=this.c[a],void 0!==c&&void 0!==c.events)for(b=
c.events.length;b--;)c.removeEventListener(c.events[b],this,!1)},handleEvent:function(a){}};UIL.Group=function(a){UIL.Proto.call(this,a);this.autoHeight=!0;this.h=25;this.isOpen=a.open||!1;this.c[2]=UIL.DOM("UIL inner","div","top:25px");this.c[3]=UIL.DOM("UIL","path","position:absolute; width:16px; left:"+(this.sa+this.sb-17)+"px; top:4px; pointer-events:none;",{width:16,height:16,d:"M 6 4 L 10 8 6 12","stroke-width":2,stroke:this.fontColor,fill:"none","stroke-linecap":"butt"});this.c[0].style.height=this.h+"px";this.c[1].style.height=this.h+"px";this.c[1].style.top="4px";this.c[1].style.pointerEvents=
"auto";this.c[1].style.cursor="pointer";this.c[1].name="group";this.uis=[];this.c[1].events=["click"];this.init();this.isOpen&&this.open()};UIL.Group.prototype=Object.create(UIL.Proto.prototype);UIL.Group.prototype.constructor=UIL.Group;UIL.Group.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "click":this.click(a)}};UIL.Group.prototype.click=function(a){this.isOpen?this.close():this.open()};
UIL.Group.prototype.add=function(a,b){b.target=this.c[2];b.isUI=this.isUI;UIL.Gui.prototype.add.call(this,a,b)};UIL.Group.prototype.open=function(){this.isOpen=!0;UIL.setSvg(this.c[3],"d","M 12 6 L 8 10 4 6");this.calc();this.isUI&&UIL.main.calc(this.h-25)};UIL.Group.prototype.close=function(){this.isUI&&UIL.main.calc(-(this.h-25));this.isOpen=!1;UIL.setSvg(this.c[3],"d","M 6 4 L 10 8 6 12");this.h=25;this.c[0].style.height=this.h+"px"};UIL.Group.prototype.clear=function(){this.clearGroup();UIL.Proto.prototype.clear.call(this)};
UIL.Group.prototype.clearGroup=function(){for(var a=this.uis.length;a--;)this.uis[a].clear(),this.uis.pop();this.uis=[];this.calc()};UIL.Group.prototype.calc=function(){this.isOpen&&(this.h=25,this.h+=this.c[2].offsetHeight,this.c[0].style.height=this.h+"px")};
UIL.Group.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.c[3].style.left=this.sa+this.sb-17+"px";this.c[1].style.width=this.size+"px";this.c[2].style.width=this.size+"px";for(var a=this.uis.length;a--;)this.uis[a].setSize(),this.uis[a].rSize();this.calc()};UIL.Title=function(a){UIL.Proto.call(this,a);this.h=a.height||31;var b=a.id||0;a=a.prefix||"";this.c[2]=UIL.DOM("UIL text","div","text-align:right; width:40px; padding:3px 5px;");this.c[2].style.color=this.fontColor;31===this.h&&(this.c[0].style.height=this.h+"px",this.c[1].style.top="8px",this.c[2].style.top="8px");var c=b||0;10>b&&(c="0"+b);this.c[1].textContent=this.txt.substring(0,1).toUpperCase()+this.txt.substring(1).replace("-"," ");this.c[2].textContent=a.toUpperCase()+" "+c;this.init()};
UIL.Title.prototype=Object.create(UIL.Proto.prototype);UIL.Title.prototype.constructor=UIL.Title;UIL.Title.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.c[1].style.width=this.size-50+"px";this.c[2].style.left=this.size-76+"px"};UIL.Title.prototype.text=function(a){this.c[1].textContent=a};UIL.Title.prototype.text2=function(a){this.c[2].textContent=a};UIL.String=function(a){UIL.Proto.call(this,a);this.value=a.value||"";this.allway=a.allway||!1;this.c[2]=UIL.DOM("UIL textSelect","div","pointer-events:auto; padding:3px 5px;");this.c[2].style.color=this.fontColor;this.c[2].contentEditable=!0;this.c[2].textContent=this.value;this.c[2].events=["click","keydown","keyup"];this.init()};UIL.String.prototype=Object.create(UIL.Proto.prototype);UIL.String.prototype.constructor=UIL.String;
UIL.String.prototype.handleEvent=function(a){switch(a.type){case "click":this.click(a);break;case "keydown":this.keydown(a);break;case "keyup":this.keyup(a)}};UIL.String.prototype.click=function(a){a.target.focus();a.target.style.cursor="auto";a.target.style.border="1px solid "+UIL.BorderSelect};UIL.String.prototype.keydown=function(a){13===a.keyCode&&(a.preventDefault(),this.value=a.target.textContent,this.callback(this.value),a.target.blur())};
UIL.String.prototype.keyup=function(a){this.allway&&this.callback(this.value)};UIL.String.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.c[2].style.left=this.sa+"px";this.c[2].style.width=this.sb+"px"};UIL.Number=function(a){UIL.Proto.call(this,a);this.type="number";this.setTypeNumber(a);this.allway=a.allway||!1;this.value=[0];this.toRad=1;this.isNumber=!0;this.isSelect=this.isVector=this.isAngle=!1;void 0!==a.value&&(isNaN(a.value)?a.value instanceof Array?(this.value=a.value,this.isNumber=!1):a.value instanceof Object&&(this.value=[],a.value.x&&(this.value[0]=a.value.x),a.value.y&&(this.value[1]=a.value.y),a.value.z&&(this.value[2]=a.value.z),a.value.w&&(this.value[3]=a.value.w),this.isVector=
!0):this.value=[a.value]);this.length=this.value.length;a.isAngle&&(this.isAngle=!0,this.toRad=Math.PI/180);this.w=(UIL.BW+5)/this.length-5;this.current=void 0;for(a=this.length;a--;)this.isAngle&&(this.value[a]=(180*this.value[a]/Math.PI).toFixed(this.precision)),this.c[2+a]=UIL.DOM("UIL textSelect","div","pointer-events:auto; cursor:move; padding:3px 5px; width:"+this.w+"px; left:"+(UIL.AW+this.w*a+5*a)+"px;"),this.c[2+a].name=a,this.c[2+a].textContent=this.value[a],this.c[2+a].style.color=this.fontColor,
this.c[2+a].contentEditable=!0,this.c[2+a].events=["keydown","keyup","mousedown","blur","focus"];this.init()};UIL.Number.prototype=Object.create(UIL.Proto.prototype);UIL.Number.prototype.constructor=UIL.Number;UIL.Number.prototype.handleEvent=function(a){switch(a.type){case "mousedown":this.down(a);break;case "keydown":this.keydown(a);break;case "keyup":this.keyup(a);break;case "blur":this.blur(a);break;case "focus":this.focus(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}};
UIL.Number.prototype.keydown=function(a){13===a.keyCode&&(a.preventDefault(),this.testValue(parseFloat(a.target.name)),this.validate(),a.target.blur())};UIL.Number.prototype.keyup=function(a){this.allway&&(this.testValue(parseFloat(a.target.name)),this.validate())};UIL.Number.prototype.blur=function(a){this.isSelect=!1;a.target.style.border="1px solid rgba(255,255,255,0.1)";a.target.style.cursor="move"};
UIL.Number.prototype.focus=function(a){this.isSelect=!0;this.current=void 0;a.target.style.border="1px solid "+UIL.BorderSelect;a.target.style.cursor="auto"};
UIL.Number.prototype.down=function(a){this.isSelect||(a.preventDefault(),a.target.style.border="1px solid rgba(255,255,255,0.2)",this.current=parseFloat(a.target.name),this.prev={x:a.clientX,y:a.clientY,d:0,id:this.current+2},this.prev.v=this.isNumber?parseFloat(this.value):parseFloat(this.value[this.current]),document.addEventListener("mouseup",this,!1),document.addEventListener("mousemove",this,!1))};
UIL.Number.prototype.up=function(a){a.preventDefault();document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1);void 0!==this.current&&(this.current===parseFloat(a.target.name)?a.target.focus():this.c[2+this.current].style.border="1px solid rgba(255,255,255,0.1)")};
UIL.Number.prototype.move=function(a){a.preventDefault();void 0!==this.current&&(this.prev.d+=a.clientX-this.prev.x-(a.clientY-this.prev.y),this.value[this.current]=this.numValue(this.prev.v+this.prev.d*this.step),this.c[2+this.current].textContent=this.value[this.current],this.validate(),this.prev.x=a.clientX,this.prev.y=a.clientY)};UIL.Number.prototype.testValue=function(a){isNaN(this.c[2+a].textContent)?this.c[2+a].textContent=this.value[a]:this.value[a]=this.c[2+a].textContent};
UIL.Number.prototype.validate=function(){for(var a=[],b=this.length;b--;)a[b]=this.value[b]*this.toRad;this.isNumber?this.callback(a[0]):this.callback(a)};UIL.Number.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.w=(this.sb+5)/this.length-5;for(var a=this.length;a--;)this.c[2+a].style.left=this.sa+this.w*a+5*a+"px",this.c[2+a].style.width=this.w+"px"};UIL.Color=function(a){UIL.Proto.call(this,a);this.autoHeight=!0;this.type=a.type||"array";this.width=this.sb;this.oldWidth=0;this.side=a.side||"down";this.holdTop=0;this.wheelWidth=0.1*this.width;this.decal=22;this.radius=0.5*(this.width-this.wheelWidth)-1;this.square=Math.floor(0.7*(this.radius-0.5*this.wheelWidth))-1;this.mid=Math.floor(0.5*this.width);this.markerSize=0.3*this.wheelWidth;this.c[2]=UIL.DOM("UIL svgbox","rect","",{width:"100%",height:17,fill:"#000","stroke-width":1,stroke:UIL.SVGC});
this.c[3]=UIL.DOM("UIL text","div","padding:4px 10px");"up"===this.side&&(this.decal=5,this.c[3].style.top="auto",this.c[2].style.top="auto",this.c[3].style.bottom="2px",this.c[2].style.bottom="2px");this.c[4]=UIL.DOM("UIL","rect","left:"+this.sa+"px;  top:"+this.decal+"px; width:"+this.width+"px; height:"+this.width+"px;",{x:this.mid-this.square,y:this.mid-this.square,width:2*this.square-1,height:2*this.square-1,fill:"#000"});this.c[5]=UIL.DOM("UIL","canvas","left:"+this.sa+"px;  top:"+this.decal+
"px; display:none;");this.c[6]=UIL.DOM("UIL","canvas","left:"+this.sa+"px;  top:"+this.decal+"px; pointer-events:auto; cursor:pointer; display:none;");"up"===this.side&&(this.c[6].style.pointerEvents="none");this.c[5].width=this.c[5].height=this.width;this.c[6].width=this.c[6].height=this.width;this.ctxMask=this.c[5].getContext("2d");this.ctxOverlay=this.c[6].getContext("2d");this.ctxMask.translate(this.mid,this.mid);this.ctxOverlay.translate(this.mid,this.mid);this.hsl=null;this.value="#ffffff";
void 0!==a.value&&(a.value instanceof Array?this.value=UIL.pack(a.value):isNaN(a.value)?this.value=a.value:this.value=UIL.numFormat(a.value));this.bcolor=null;this.isShow=this.isDown=!1;this.c[2].events=["click"];this.c[6].events=["mousedown","mousemove","mouseup","mouseout"];this.setColor(this.value);this.init()};UIL.Color.prototype=Object.create(UIL.Proto.prototype);UIL.Color.prototype.constructor=UIL.Color;
UIL.Color.prototype.handleEvent=function(a){a.preventDefault();a.stopPropagation();switch(a.type){case "click":this.click(a);break;case "mousedown":this.down(a);break;case "mousemove":this.move(a);break;case "mouseup":this.up(a);break;case "mouseout":this.out(a)}};UIL.Color.prototype.click=function(a){this.isShow?this.hide():this.show()};UIL.Color.prototype.up=function(a){this.isDown=!1};UIL.Color.prototype.out=function(a){this.hide()};
UIL.Color.prototype.down=function(a){if(this.isShow)return this.isDown=!0,this.move(a),!1};
UIL.Color.prototype.move=function(a){if(this.isDown){this.offset=this.c[6].getBoundingClientRect();var b=a.pageX-this.offset.left-this.mid;a=a.pageY-this.offset.top-this.mid;(this.circleDrag=Math.max(Math.abs(b),Math.abs(a))>this.square+2)?(b=Math.atan2(b,-a)/6.28,this.setHSL([(b+1)%1,this.hsl[1],this.hsl[2]])):(b=Math.max(0,Math.min(1,-(b/this.square*0.5)+0.5)),a=Math.max(0,Math.min(1,-(a/this.square*0.5)+0.5)),this.setHSL([this.hsl[0],b,a]))}};
UIL.Color.prototype.redraw=function(){this.oldWidth=this.width;this.drawCircle();this.drawMask();this.drawMarkers()};
UIL.Color.prototype.show=function(){this.oldWidth!==this.width&&this.redraw();this.isShow=!0;this.h=this.width+30;this.c[0].style.height=this.h+"px";"up"==this.side&&(this.holdTop=1*this.c[0].style.top.substring(0,this.c[0].style.top.length-2)||"auto",isNaN(this.holdTop)||(this.c[0].style.top=this.holdTop-(this.h-20)+"px"),setTimeout(function(){this.c[6].style.pointerEvents="auto"}.bind(this),100));this.c[4].style.display="block";this.c[5].style.display="block";this.c[6].style.display="block";this.isUI&&
UIL.main.calc(this.h-20)};UIL.Color.prototype.hide=function(){this.isUI&&UIL.main.calc(-(this.h-20));this.isShow=!1;this.h=20;"up"==this.side&&(isNaN(this.holdTop)||(this.c[0].style.top=this.holdTop+"px"),this.c[6].style.pointerEvents="none");this.c[0].style.height=this.h+"px";this.c[4].style.display="none";this.c[5].style.display="none";this.c[6].style.display="none"};
UIL.Color.prototype.updateDisplay=function(){this.invert=0.6>=0.3*this.rgb[0]+0.59*this.rgb[1]+0.11*this.rgb[2];UIL.setSvg(this.c[4],"fill",UIL.pack(UIL.HSLToRGB([this.hsl[0],1,0.5])));this.drawMarkers();this.value=this.bcolor;UIL.setSvg(this.c[2],"fill",this.bcolor);this.c[3].textContent=UIL.hexFormat(this.bcolor);this.c[3].style.color=this.invert?"#fff":"#000";"array"===this.type&&this.callback(this.rgb);"html"===this.type&&this.callback(this.value);"hex"===this.type&&this.callback(this.value)};
UIL.Color.prototype.setColor=function(a){var b=UIL.unpack(a);this.bcolor!=a&&b&&(this.bcolor=a,this.rgb=b,this.hsl=UIL.RGBtoHSL(this.rgb),this.updateDisplay());return this};UIL.Color.prototype.setHSL=function(a){this.hsl=a;this.rgb=UIL.HSLToRGB(a);this.bcolor=UIL.pack(this.rgb);this.updateDisplay();return this};UIL.Color.prototype.calculateMask=function(a,b,c){for(var d=1/a,e=1/b,g=0;g<=b;++g)for(var h=1-g*e,k=0;k<=a;++k){var f=1-k*d,f=1-2*Math.min(h*f,(1-h)*f);c(k,g,0<f?0.5*(2*h-1+f)/f:0,f)}};
UIL.Color.prototype.drawMask=function(){var a=this.square,b=Math.floor(2*this.square/2),c=document.createElement("canvas");c.width=c.height=b+1;var d=c.getContext("2d"),e=d.getImageData(0,0,b+1,b+1),g=0;this.calculateMask(b,b,function(a,b,c,d){e.data[g++]=e.data[g++]=e.data[g++]=255*c;e.data[g++]=255*d});d.putImageData(e,0,0);this.ctxMask.drawImage(c,0,0,b+1,b+1,-a,-a,2*a,2*a)};
UIL.Color.prototype.drawCircle=function(){var a=this.radius,b=this.wheelWidth,c=8/a/24*Math.PI,d=this.ctxMask,e=0,g,h,k,f;d.save();d.lineWidth=b/a;d.scale(a,a);for(var l=0;24>=l;++l)f=l/24,a=f*Math.PI*2,b=[Math.sin(e),-Math.cos(e),Math.sin(a),-Math.cos(a)],h=0.5*(e+a),k=1/Math.cos(0.5*(a-e)),e=Math.sin(h)*k,h=-Math.cos(h)*k,f=UIL.pack(UIL.HSLToRGB([f,1,0.5])),0<l&&(k=d.createLinearGradient(b[0],b[1],b[2],b[3]),k.addColorStop(0,g),k.addColorStop(1,f),d.strokeStyle=k,d.beginPath(),d.moveTo(b[0],b[1]),
d.quadraticCurveTo(e,h,b[2],b[3]),d.stroke()),e=a-c,g=f;d.restore()};
UIL.Color.prototype.drawMarkers=function(){var a=this.markerSize,b=this.radius,c=this.width,d=Math.ceil(a/4),e=a-d+1,g=this.invert?"#fff":"#000",h=this.invert?"#000":"#fff",k=6.28*this.hsl[0],b=[Math.sin(k)*b,-Math.cos(k)*b,2*this.square*(0.5-this.hsl[1]),2*this.square*(0.5-this.hsl[2])],a=[{x:b[2],y:b[3],r:a,c:g,lw:d},{x:b[2],y:b[3],r:e,c:h,lw:d+1},{x:b[0],y:b[1],r:a,c:"#fff",lw:d},{x:b[0],y:b[1],r:e,c:"#000",lw:d+1}];this.ctxOverlay.clearRect(-this.mid,-this.mid,c,c);for(c=a.length;c--;)d=a[c],
this.ctxOverlay.lineWidth=d.lw,this.ctxOverlay.strokeStyle=d.c,this.ctxOverlay.beginPath(),this.ctxOverlay.arc(d.x,d.y,d.r,0,2*Math.PI,!0),this.ctxOverlay.stroke()};
UIL.Color.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.width=this.sb;this.wheelWidth=0.1*this.width;this.decal=22;"up"===this.side&&(this.decal=5);this.radius=0.5*(this.width-this.wheelWidth)-1;this.square=Math.floor(0.7*(this.radius-0.5*this.wheelWidth))-1;this.mid=Math.floor(0.5*this.width);this.markerSize=0.3*this.wheelWidth;this.c[2].style.width=this.sb+"px";this.c[2].style.left=this.sa+"px";this.c[3].style.width=this.sb+"px";this.c[3].style.left=this.sa+"px";this.c[4].style.width=
this.width+"px";this.c[4].style.height=this.width+"px";this.c[4].style.left=this.sa+"px";this.c[5].width=this.c[5].height=this.width;this.c[5].style.left=this.sa+"px";this.c[6].width=this.c[6].height=this.width;this.c[6].style.left=this.sa+"px";this.c[5].style.top=this.decal+"px";this.c[6].style.top=this.decal+"px";UIL.setSvg(this.c[4],"width",2*this.square-1);UIL.setSvg(this.c[4],"height",2*this.square-1);UIL.setSvg(this.c[4],"x",this.mid-this.square);UIL.setSvg(this.c[4],"y",this.mid-this.square);
this.ctxMask.translate(this.mid,this.mid);this.ctxOverlay.translate(this.mid,this.mid);this.isShow&&(this.redraw(),this.h=this.width+30,this.c[0].height=this.h+"px",this.isUI&&UIL.main.calc())};UIL.hexToHtml=function(a){return"#"+("000000"+a.toString(16)).substr(-6)};UIL.numFormat=function(a){return"#"+("000000"+a.toString(16)).substr(-6)};UIL.hexFormat=function(a){return a.toUpperCase().replace("#","0x")};
UIL.pack=function(a){var b=Math.round(255*a[0]),c=Math.round(255*a[1]);a=Math.round(255*a[2]);return"#"+UIL.dec2hex(b)+UIL.dec2hex(c)+UIL.dec2hex(a)};UIL.u255=function(a,b){return parseInt(a.substring(b,b+2),16)/255};UIL.u16=function(a,b){return parseInt(a.substring(b,b+1),16)/15};UIL.unpack=function(a){if(7==a.length)return[UIL.u255(a,1),UIL.u255(a,3),UIL.u255(a,5)];if(4==a.length)return[UIL.u16(a,1),UIL.u16(a,2),UIL.u16(a,3)]};
UIL.packDX=function(a,b){return"#"+UIL.dec2hex(b)+UIL.dec2hex(a)+UIL.dec2hex(a)+UIL.dec2hex(a)};UIL.dec2hex=function(a){return(16>a?"0":"")+a.toString(16)};UIL.HSLToRGB=function(a){var b,c=a[0];b=a[1];a=a[2];b=0.5>=a?a*(b+1):a+b-a*b;a=2*a-b;return[UIL.HUEtoRGB(a,b,c+0.33333),UIL.HUEtoRGB(a,b,c),UIL.HUEtoRGB(a,b,c-0.33333)]};UIL.HUEtoRGB=function(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(0.66666-c)*6:a};
UIL.RGBtoHSL=function(a){var b=a[0],c=a[1];a=a[2];var d=Math.min(b,c,a),e=Math.max(b,c,a),g=e-d,h=0,k=0,d=(d+e)/2;0<d&&1>d&&(k=g/(0.5>d?2*d:2-2*d));0<g&&(e==b&&e!=c&&(h+=(c-a)/g),e==c&&e!=a&&(h+=2+(a-b)/g),e==a&&e!=b&&(h+=4+(b-c)/g),h/=6);return[h,k,d]};UIL.Slide=function(a){UIL.Proto.call(this,a);this.setTypeNumber(a);this.range=this.max-this.min;this.width=UIL.BW-40;this.w=this.width-8;this.h=a.height||20;this.h=11>this.h?11:this.h;this.old=this.value=a.value||0;this.isOver=this.isDown=!1;a=0.5*a.height-10;void 0!==this.c[1]&&(this.c[1].style.top=a+"px");this.c[2]=UIL.DOM("UIL text","div","top:"+a+"px; text-align:right; width:40px; padding:3px 5px; color:"+this.fontColor);this.c[3]=UIL.DOM("UIL svgbox","rect","width:"+this.width+"px; height:"+
(this.h-3)+"px; cursor:w-resize;",{width:"100%",height:this.h-3,fill:UIL.SVGB,"stroke-width":1,stroke:UIL.SVGC});this.c[4]=UIL.DOM("UIL svgbox","rect","left:4px; top:4px; width:"+(this.width-8)+"px; height:"+(this.h-10)+"px; pointer-events:none;",{width:"100%",height:"100%",fill:this.fontColor});UIL.DOM(null,"defs",null,{},this.c[3]);UIL.DOM(null,"pattern",null,{id:"sripe",x:0,y:0,width:10,height:10,patternUnits:"userSpaceOnUse"},this.c[3],1);UIL.DOM(null,"line",null,{x1:5,x2:0,y1:0,y2:10,stroke:UIL.SVGC,
"stroke-width":1},this.c[3].childNodes[1],0);UIL.DOM(null,"line",null,{x1:10,x2:5,y1:0,y2:10,stroke:UIL.SVGC,"stroke-width":1},this.c[3].childNodes[1],0);this.c[3].events=["mouseover","mousedown","mouseout"];this.init()};UIL.Slide.prototype=Object.create(UIL.Proto.prototype);UIL.Slide.prototype.constructor=UIL.Slide;
UIL.Slide.prototype.handleEvent=function(a){a.preventDefault();a.stopPropagation();switch(a.type){case "mouseover":this.over(a);break;case "mousedown":this.down(a);break;case "mouseout":this.out(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}};
UIL.Slide.prototype.mode=function(a){switch(a){case 0:UIL.setSvg(this.c[3],"fill","rgba(0,0,0,0.2)");UIL.setSvg(this.c[4],"fill",this.fontColor);break;case 1:UIL.setSvg(this.c[3],"fill","rgba(0,0,0,0.6)");UIL.setSvg(this.c[4],"fill",UIL.SELECT);break;case 2:UIL.setSvg(this.c[3],"fill","url(#sripe)"),UIL.setSvg(this.c[4],"fill",UIL.MOVING)}};UIL.Slide.prototype.over=function(a){this.isOver=!0;this.mode(1)};UIL.Slide.prototype.out=function(a){this.isOver=!1;this.isDown||this.mode(0)};
UIL.Slide.prototype.up=function(a){this.isDown=!1;document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1);this.isOver?this.mode(1):this.mode(0)};UIL.Slide.prototype.down=function(a){this.isDown=!0;document.addEventListener("mouseup",this,!1);document.addEventListener("mousemove",this,!1);this.left=this.c[3].getBoundingClientRect().left;this.old=this.value;this.move(a);this.mode(2)};
UIL.Slide.prototype.move=function(a){this.isDown&&(a=(a.clientX-this.left-4)/this.w*this.range+this.min-this.old,a>=this.step||a<=this.step)&&(a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value)};UIL.Slide.prototype.listen=function(a){this.value=a;this.update()};UIL.Slide.prototype.update=function(a){this.c[4].style.width=(this.value-this.min)/this.range*this.w+"px";this.c[2].textContent=this.value;a&&this.callback(this.value)};
UIL.Slide.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.width=this.sb-40;this.w=this.width-8;this.c[2].style.left=this.size-50+"px";this.c[3].style.left=this.sa+"px";this.c[3].style.width=this.width+"px";this.c[4].style.left=this.sa+4+"px";this.update()};UIL.List=function(a){UIL.Proto.call(this,a);this.autoHeight=!0;this.c[2]=UIL.DOM("UIL list");this.c[3]=UIL.DOM("UIL svgbox","rect","",{width:"100%",height:17,fill:UIL.bgcolor(UIL.COLOR),"stroke-width":1,stroke:UIL.SVGC});this.c[4]=UIL.DOM("UIL","path","position:absolute; width:16px; height:16px; left:"+(this.sa+this.sb-17)+"px; top:1px; pointer-events:none;",{width:16,height:16,d:"M 6 4 L 10 8 6 12","stroke-width":2,stroke:this.fontColor,fill:"none","stroke-linecap":"butt"});this.c[5]=UIL.DOM("UIL text",
"div","text-align:center; padding:4px 10px; ");this.c[6]=UIL.DOM("UIL svgbox","rect","top:20px; height:90px; pointer-events:none;",{x:this.sb-15,y:0,width:10,height:16,fill:"#666","stroke-width":1,stroke:UIL.SVGC});this.c[2].name="list";this.c[3].name="title";this.c[5].style.color=this.fontColor;this.c[2].events=["mousedown","mousemove","mouseup","mouseout","mousewheel"];this.c[3].events=["click","mousedown","mouseover","mouseout","mouseup"];this.list=a.list||[];a.value?isNaN(a.value)?this.value=
a.value:this.value=this.list[a.value]:this.value=this.list[0];this.show=!1;this.maxItem=a.maxItem||5;this.length=this.list.length;if(this.full=a.full||!1)this.maxItem=this.length;this.maxHeight=18*this.maxItem;this.max=18*this.length;this.w=this.sb;this.isDown=!1;this.range=this.max-this.maxHeight;this.py=0;this.scroll=!1;this.side=a.side||"down";this.holdTop=0;"up"===this.side&&(this.c[2].style.top="auto",this.c[3].style.top="auto",this.c[4].style.top="auto",this.c[5].style.top="auto",this.c[2].style.bottom=
"10px",this.c[3].style.bottom="2px",this.c[4].style.bottom="2px",this.c[5].style.bottom="2px");this.max>this.maxHeight&&(this.w=this.sb-20,this.scroll=!0);this.listIn=UIL.DOM("UIL list-in");this.listIn.name="list";this.c[2].style.height=this.maxHeight+"px";this.c[2].appendChild(this.listIn);for(var b,c=0;c<this.length;c++)b=this.list[c],a=UIL.DOM("UIL listItem","div","width:"+this.w+"px; height:18px;"),a.textContent=b,a.style.color=this.fontColor,a.name=b,this.listIn.appendChild(a);this.c[5].textContent=
this.value;this.init()};UIL.List.prototype=Object.create(UIL.Proto.prototype);UIL.List.prototype.constructor=UIL.List;
UIL.List.prototype.handleEvent=function(a){a.preventDefault();a.stopPropagation();var b=a.target.name||"";switch(a.type){case "click":this.click(a);break;case "mouseover":this.mode(1);break;case "mousedown":"title"===b?this.mode(2):this.listdown(a);break;case "mouseup":"title"===b?this.mode(0):this.listup(a);break;case "mouseout":"title"===b?this.mode(0):this.listout(a);break;case "mousemove":this.listmove(a);break;case "mousewheel":this.listwheel(a)}};
UIL.List.prototype.mode=function(a){switch(a){case 0:this.c[5].style.color=this.fontColor;UIL.setSvg(this.c[3],"fill",UIL.bgcolor(UIL.COLOR));break;case 1:this.c[5].style.color="#FFF";UIL.setSvg(this.c[3],"fill",UIL.SELECT);break;case 2:this.c[5].style.color=this.fontColor,UIL.setSvg(this.c[3],"fill",UIL.SELECTDOWN)}};UIL.List.prototype.click=function(a){this.show?this.listHide():this.listShow()};
UIL.List.prototype.listdown=function(a){var b=a.target.name;"list"!==b&&void 0!==b?(this.value=a.target.name,this.c[5].textContent=this.value,this.callback(this.value),this.listHide()):"list"===b&&this.scroll&&(this.isDown=!0,this.listmove(a),this.listIn.style.background="rgba(0,0,0,0.6)",UIL.setSvg(this.c[6],"fill","#AAA"),a.preventDefault())};
UIL.List.prototype.listmove=function(a){if(this.isDown){var b=this.c[2].getBoundingClientRect();a=a.clientY-b.top;30>a&&(a=30);100<a&&(a=100);this.py=~~((a-30)/70*this.range);this.update()}};UIL.List.prototype.listup=function(a){this.isDown=!1;this.listIn.style.background="rgba(0,0,0,0.2)";UIL.setSvg(this.c[6],"fill","#666")};UIL.List.prototype.listout=function(a){this.isUI&&(UIL.main.lockwheel=!1);this.listup();void 0===a.relatedTarget.name&&this.listHide()};
UIL.List.prototype.listwheel=function(a){if(this.scroll){this.isUI&&(UIL.main.lockwheel=!0);var b=0;a.wheelDeltaY?b=0.04*-a.wheelDeltaY:a.wheelDelta?b=0.2*-a.wheelDelta:a.detail&&(b=4*a.detail);this.py+=b;0>this.py&&(this.py=0);this.py>this.range&&(this.py=this.range);this.update()}};UIL.List.prototype.update=function(a){this.scroll&&(this.py=void 0===a?this.py:a,this.listIn.style.top=-this.py+"px",UIL.setSvg(this.c[6],"y",70*this.py/this.range+2))};
UIL.List.prototype.listShow=function(){this.update(0);this.show=!0;this.h=this.maxHeight+30;this.scroll||(this.h=30+this.max,this.c[6].style.display="none",this.c[2].removeEventListener("mousewheel",this,!1),this.c[2].removeEventListener("mousemove",this,!1));this.c[0].style.height=this.h+"px";this.c[2].style.display="block";"up"===this.side?UIL.setSvg(this.c[4],"d","M 12 10 L 8 6 4 10"):UIL.setSvg(this.c[4],"d","M 12 6 L 8 10 4 6");this.isUI&&UIL.main.calc(this.h-20)};
UIL.List.prototype.listHide=function(){this.isUI&&UIL.main.calc(-(this.h-20));this.show=!1;this.h=20;this.c[0].style.height=this.h+"px";this.c[2].style.display="none";UIL.setSvg(this.c[4],"d","M 6 4 L 10 8 6 12")};UIL.List.prototype.text=function(a){this.c[5].textContent=a};
UIL.List.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.c[2].style.width=this.sb+"px";this.c[2].style.left=this.sa-20+"px";this.c[3].style.width=this.sb+"px";this.c[3].style.left=this.sa+"px";this.c[4].style.left=this.sa+this.sb-17+"px";this.c[5].style.width=this.sb+"px";this.c[5].style.left=this.sa+"px";this.c[6].style.width=this.sb+"px";this.c[6].style.left=this.sa+"px";UIL.setSvg(this.c[6],"x",this.sb-15);this.w=this.sb;this.max>this.maxHeight&&(this.w=this.sb-20);for(var a=
this.length;a--;)this.listIn.children[a].style.width=this.w+"px"};UIL.Bool=function(a){UIL.Proto.call(this,a);this.value=a.value||!1;this.c[2]=UIL.DOM("UIL svgbox","rect","width:17px;",{width:17,height:17,fill:UIL.SVGB,"stroke-width":1,stroke:UIL.SVGC});this.c[3]=UIL.DOM("UIL svgbox","path","width:17px; pointer-events:none;",{width:17,height:17,d:"M 4 9 L 6 12 14 4","stroke-width":2,stroke:this.fontColor,fill:"none","stroke-linecap":"butt"});this.value||(this.c[3].style.display="none");this.c[2].events=["click"];this.init()};UIL.Bool.prototype=Object.create(UIL.Proto.prototype);
UIL.Bool.prototype.constructor=UIL.Bool;UIL.Bool.prototype.handleEvent=function(a){a.preventDefault();a.stopPropagation();switch(a.type){case "click":this.click(a)}};UIL.Bool.prototype.click=function(a){this.value?(this.value=!1,this.c[3].style.display="none",UIL.setSvg(this.c[2],"fill","rgba(0,0,0,0.2)")):(this.value=!0,this.c[3].style.display="block",UIL.setSvg(this.c[2],"fill","rgba(0,0,0,0.4)"));this.callback(this.value)};
UIL.Bool.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.c[2].style.left=this.sa+"px";this.c[3].style.left=this.sa+"px"};UIL.Button=function(a){UIL.Proto.call(this,a);this.value=a.value||!1;this.c[2]=UIL.DOM("UIL svgbox","rect","",{width:"100%",height:17,fill:UIL.bgcolor(UIL.COLOR),"stroke-width":1,stroke:UIL.SVGC});this.c[3]=UIL.DOM("UIL text","div","text-align:center; padding:4px 10px");this.c[3].style.color=this.fontColor;this.c[2].events=["click","mouseover","mousedown","mouseup","mouseout"];void 0!==this.c[1]&&(this.c[1].textContent="");this.c[3].innerHTML=this.txt;this.init()};UIL.Button.prototype=Object.create(UIL.Proto.prototype);
UIL.Button.prototype.constructor=UIL.Button;UIL.Button.prototype.handleEvent=function(a){a.preventDefault();a.stopPropagation();switch(a.type){case "click":this.click(a);break;case "mouseover":this.mode(1);break;case "mousedown":this.mode(2);break;case "mouseup":this.mode(0);break;case "mouseout":this.mode(0)}};
UIL.Button.prototype.mode=function(a){switch(a){case 0:this.c[3].style.color=this.fontColor;UIL.setSvg(this.c[2],"fill",UIL.bgcolor(UIL.COLOR));break;case 1:this.c[3].style.color="#FFF";UIL.setSvg(this.c[2],"fill",UIL.SELECT);break;case 2:this.c[3].style.color=this.fontColor,UIL.setSvg(this.c[2],"fill",UIL.SELECTDOWN)}};UIL.Button.prototype.click=function(a){this.callback(this.value)};UIL.Button.prototype.label=function(a){this.c[3].textContent=a};
UIL.Button.prototype.icon=function(a){this.c[3].style.padding="0px 0px";this.c[3].innerHTML=a};UIL.Button.prototype.rSize=function(){UIL.Proto.prototype.rSize.call(this);this.c[2].style.left=this.sa+"px";this.c[3].style.left=this.sa+"px";this.c[2].style.width=this.sb+"px";this.c[3].style.width=this.sb+"px"};UIL.Circular=function(a){UIL.Proto.call(this,a);this.autoWidth=!1;this.setTypeNumber(a);this.range=this.max-this.min;this.value=a.value||0;this.radius=a.radius||15;this.size=2*this.radius+20;void 0!==a.size&&(this.size=a.size,this.radius=0.5*~~(this.size-20));this.w=2*this.radius;this.height=2*this.radius;this.h=a.height||this.height+40;this.twoPi=2*Math.PI;this.top=0;this.c[0].style.width=this.size+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.size+"px",this.c[1].style.textAlign="center",
this.top=20);this.percent=0;this.c[2]=UIL.DOM("UIL text","div","top:"+(this.height+20)+"px; text-align:center; width:"+this.size+"px; padding:3px 5px; color:"+this.fontColor);this.c[3]=UIL.DOM("UIL svgbox","circle","left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; cursor:pointer;",{cx:this.radius,cy:this.radius,r:this.radius,fill:"rgba(0,0,0,0.3)"});this.c[4]=UIL.DOM("UIL svgbox","path","left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; pointer-events:none;",
{d:this.makePath(),fill:this.fontColor});this.c[5]=UIL.DOM("UIL svgbox","circle","left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; pointer-events:none;",{cx:this.radius,cy:this.radius,r:0.5*this.radius,fill:UIL.bgcolor(UIL.COLOR,1),"stroke-width":1,stroke:UIL.SVGC});this.c[3].events=["mouseover","mousedown","mouseout"];this.init();this.update()};UIL.Circular.prototype=Object.create(UIL.Proto.prototype);UIL.Circular.prototype.constructor=UIL.Circular;
UIL.Circular.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "mouseover":this.over(a);break;case "mousedown":this.down(a);break;case "mouseout":this.out(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}};
UIL.Circular.prototype.mode=function(a){switch(a){case 0:UIL.setSvg(this.c[3],"fill","rgba(0,0,0,0.2)");UIL.setSvg(this.c[4],"fill",this.fontColor);break;case 1:UIL.setSvg(this.c[3],"fill","rgba(0,0,0,0.6)");UIL.setSvg(this.c[4],"fill",UIL.SELECT);break;case 2:UIL.setSvg(this.c[3],"fill","rgba(0,0,0,0.2)"),UIL.setSvg(this.c[4],"fill",UIL.MOVING)}};UIL.Circular.prototype.over=function(a){this.isOver=!0;this.mode(1)};UIL.Circular.prototype.out=function(a){this.isOver=!1;this.isDown||this.mode(0)};
UIL.Circular.prototype.up=function(a){this.isDown=!1;document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1);this.isOver?this.mode(1):this.mode(0)};UIL.Circular.prototype.down=function(a){this.isDown=!0;document.addEventListener("mouseup",this,!1);document.addEventListener("mousemove",this,!1);this.rect=this.c[3].getBoundingClientRect();this.old=this.value;this.oldr=null;this.move(a);this.mode(2)};
UIL.Circular.prototype.move=function(a){this.isDown&&(this.r=Math.atan2(this.radius-(a.clientY-this.rect.top),this.radius-(a.clientX-this.rect.left))-0.5*Math.PI,this.r=(this.r%this.twoPi+this.twoPi)%this.twoPi,null!==this.oldr&&(a=this.r-this.oldr,this.r=Math.abs(a)>Math.PI?this.oldr:this.r,6<a&&(this.r=0),-6>a&&(this.r=this.twoPi)),a=1/this.twoPi*this.range*this.r+this.min-this.old,a>=this.step||a<=this.step)&&(a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=
this.value,this.oldr=this.r)};UIL.Circular.prototype.makePath=function(){var a=this.radius,b=this.percent*this.twoPi-0.001,c=a+a*Math.sin(0),d=a-a*Math.cos(0),e=a+a*Math.sin(b),g=a-a*Math.cos(b);return"M "+a+","+a+" L "+c+","+d+" A "+a+","+a+" 0 "+(b-0>Math.PI?1:0)+" 1 "+e+","+g+" Z"};UIL.Circular.prototype.update=function(a){this.c[2].textContent=this.value;this.percent=(this.value-this.min)/this.range;UIL.setSvg(this.c[4],"d",this.makePath());a&&this.callback(this.value)};UIL.Knob=function(a){UIL.Proto.call(this,a);this.autoWidth=!1;this.setTypeNumber(a);this.range=this.max-this.min;this.mPI=0.8*Math.PI;this.toDeg=180/Math.PI;this.cirRange=2*this.mPI;this.value=a.value||0;this.radius=a.radius||15;this.size=2*this.radius+20;void 0!==a.size&&(this.size=a.size,this.radius=0.5*~~(this.size-20));this.w=2*this.radius;this.height=2*this.radius;this.h=a.height||this.height+40;this.top=0;this.c[0].style.width=this.size+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.size+
"px",this.c[1].style.textAlign="center",this.top=20);this.percent=0;this.c[2]=UIL.DOM("UIL text","div","top:"+(this.height+20)+"px; text-align:center; width:"+this.size+"px; padding:3px 5px; color:"+this.fontColor);this.c[3]=UIL.DOM("UIL svgbox","circle","left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; cursor:pointer;",{cx:this.radius,cy:this.radius,r:this.radius-4,fill:"rgba(0,0,0,0.3)"});this.c[4]=UIL.DOM("UIL svgbox","circle","left:10px; top:"+this.top+"px; width:"+
this.w+"px; height:"+this.height+"px; pointer-events:none;",{cx:this.radius,cy:0.5*this.radius,r:3,fill:this.fontColor});this.c[5]=UIL.DOM("UIL svgbox","path","left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; pointer-events:none;",{d:this.makeGrad(),"stroke-width":1,stroke:UIL.SVGC});UIL.DOM(null,"circle",null,{cx:this.radius,cy:this.radius,r:0.7*this.radius,fill:UIL.bgcolor(UIL.COLOR,1),"stroke-width":1,stroke:UIL.SVGC},this.c[3]);this.c[3].events=["mouseover","mousedown",
"mouseout"];this.r=0;this.init();this.update()};UIL.Knob.prototype=Object.create(UIL.Circular.prototype);UIL.Knob.prototype.constructor=UIL.Knob;
UIL.Knob.prototype.move=function(a){this.isDown&&(this.r=-Math.atan2(this.radius-(a.clientX-this.rect.left),this.radius-(a.clientY-this.rect.top)),null!==this.oldr&&(this.r=Math.abs(this.r-this.oldr)>Math.PI?this.oldr:this.r),this.r=this.r>this.mPI?this.mPI:this.r,this.r=this.r<-this.mPI?-this.mPI:this.r,a=1/this.cirRange*this.range*(this.r+this.mPI)+this.min-this.old,a>=this.step||a<=this.step)&&(a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value,
this.oldr=this.r)};UIL.Knob.prototype.makeGrad=function(){for(var a="",b=Math.PI+this.mPI,c=(b-(Math.PI-this.mPI))/this.radius,d=this.radius,e,g,h,k,f=0;f<=this.radius;++f)e=b-c*f,g=d+Math.sin(e)*d,h=d+Math.cos(e)*d,k=d+Math.sin(e)*(d-3),e=d+Math.cos(e)*(d-3),a+="M"+g+" "+h+" L"+k+" "+e+" ";return a};
UIL.Knob.prototype.update=function(a){this.c[2].textContent=this.value;this.percent=(this.value-this.min)/this.range;this.rr=(this.percent*this.cirRange-this.mPI)*this.toDeg;UIL.setSvg(this.c[4],"transform","rotate("+this.rr+" "+this.radius+" "+this.radius+")");a&&this.callback(this.value)};UIL.Joystick=function(a){UIL.Proto.call(this,a);this.autoWidth=!1;this.value=[0,0];this.precision=a.precision||2;this.multiplicator=a.multiplicator||1;this.oldy=this.oldx=this.y=this.x=0;this.interval=null;this.radius=a.radius||50;this.size=2*this.radius+20;void 0!==a.size&&(this.size=a.size,this.radius=0.5*~~(this.size-20));this.innerRadius=a.innerRadius||0.6*this.radius;this.maxDistance=this.radius-this.innerRadius-5;this.height=2*this.radius;this.h=a.height||this.height+40;this.top=0;this.c[0].style.width=
this.size+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.size+"px",this.c[1].style.textAlign="center",this.top=20);this.c[2]=UIL.DOM("UIL svgbox","circle","left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; cursor:pointer;",{cx:this.radius,cy:this.radius,r:this.radius,fill:"url(#grad)"});this.c[3]=UIL.DOM("UIL svgbox","circle","left:0px; top:"+(this.top-10)+"px; width:"+(this.w+20)+"px; height:"+(this.height+20)+"px; pointer-events:none;",{cx:this.radius+10,cy:this.radius+
10,r:this.innerRadius+10,fill:"url(#gradS)"});this.c[4]=UIL.DOM("UIL svgbox","circle","left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px; pointer-events:none;",{cx:this.radius,cy:this.radius,r:this.innerRadius,fill:"url(#gradIn)","stroke-width":1,stroke:"#000"});this.c[5]=UIL.DOM("UIL text","div","top:"+(this.height+20)+"px; text-align:center; width:"+this.size+"px; padding:3px 5px; color:"+this.fontColor);UIL.DOM(null,"defs",null,{},this.c[2]);UIL.DOM(null,"radialGradient",
null,{id:"grad",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},this.c[2],1);UIL.DOM(null,"stop",null,{offset:"40%",style:"stop-color:rgb(0,0,0); stop-opacity:0.3;"},this.c[2].childNodes[1],0);UIL.DOM(null,"stop",null,{offset:"80%",style:"stop-color:rgb(0,0,0); stop-opacity:0;"},this.c[2].childNodes[1],0);UIL.DOM(null,"stop",null,{offset:"90%",style:"stop-color:rgb(50,50,50); stop-opacity:0.4;"},this.c[2].childNodes[1],0);UIL.DOM(null,"stop",null,{offset:"100%",style:"stop-color:rgb(50,50,50); stop-opacity:0;"},
this.c[2].childNodes[1],0);UIL.DOM(null,"defs",null,{},this.c[3]);UIL.DOM(null,"radialGradient",null,{id:"gradS",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},this.c[3],1);UIL.DOM(null,"stop",null,{offset:"60%",style:"stop-color:rgb(0,0,0); stop-opacity:0.5;"},this.c[3].childNodes[1],0);UIL.DOM(null,"stop",null,{offset:"100%",style:"stop-color:rgb(0,0,0); stop-opacity:0;"},this.c[3].childNodes[1],0);UIL.DOM(null,"defs",null,{},this.c[4]);UIL.DOM(null,"radialGradient",null,{id:"gradIn",cx:"50%",cy:"50%",
r:"50%",fx:"50%",fy:"50%"},this.c[4],1);UIL.DOM(null,"stop",null,{offset:"30%",style:"stop-color:rgb(40,40,40); stop-opacity:1;"},this.c[4].childNodes[1],0);UIL.DOM(null,"stop",null,{offset:"60%",style:"stop-color:rgb(48,48,48); stop-opacity:1;"},this.c[4].childNodes[1],0);UIL.DOM(null,"stop",null,{offset:"80%",style:"stop-color:rgb(48,48,48); stop-opacity:1;"},this.c[4].childNodes[1],0);UIL.DOM(null,"stop",null,{offset:"100%",style:"stop-color:rgb(30,30,30); stop-opacity:1;"},this.c[4].childNodes[1],
0);UIL.DOM(null,"radialGradient",null,{id:"gradIn2",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},this.c[4],1);UIL.DOM(null,"stop",null,{offset:"30%",style:"stop-color:rgb(1,90,197); stop-opacity:1;"},this.c[4].childNodes[1],1);UIL.DOM(null,"stop",null,{offset:"60%",style:"stop-color:rgb(3,95,207); stop-opacity:1;"},this.c[4].childNodes[1],1);UIL.DOM(null,"stop",null,{offset:"80%",style:"stop-color:rgb(3,95,207); stop-opacity:1;"},this.c[4].childNodes[1],1);UIL.DOM(null,"stop",null,{offset:"100%",
style:"stop-color:rgb(0,65,167); stop-opacity:1;"},this.c[4].childNodes[1],1);this.c[5].textContent="x"+this.value[0]+" y"+this.value[1];this.c[2].events=["mouseover","mousedown","mouseout"];this.init();this.update(!1)};UIL.Joystick.prototype=Object.create(UIL.Proto.prototype);UIL.Joystick.prototype.constructor=UIL.Joystick;
UIL.Joystick.prototype.handleEvent=function(a){a.preventDefault();switch(a.type){case "mouseover":this.over(a);break;case "mousedown":this.down(a);break;case "mouseout":this.out(a);break;case "mouseup":this.up(a);break;case "mousemove":this.move(a)}};UIL.Joystick.prototype.mode=function(a){switch(a){case 0:UIL.setSvg(this.c[4],"fill","url(#gradIn)");UIL.setSvg(this.c[4],"stroke","#000");break;case 1:UIL.setSvg(this.c[4],"fill","url(#gradIn2)"),UIL.setSvg(this.c[4],"stroke","rgba(0,0,0,0)")}};
UIL.Joystick.prototype.over=function(a){this.isOver=!0;this.mode(1)};UIL.Joystick.prototype.out=function(a){this.isOver=!1;this.isDown||this.mode(0)};UIL.Joystick.prototype.up=function(a){this.isDown=!1;document.removeEventListener("mouseup",this,!1);document.removeEventListener("mousemove",this,!1);this.interval=setInterval(this.update.bind(this),10);this.isOver?this.mode(1):this.mode(0)};
UIL.Joystick.prototype.down=function(a){this.isDown=!0;document.addEventListener("mouseup",this,!1);document.addEventListener("mousemove",this,!1);this.rect=this.c[2].getBoundingClientRect();this.move(a);this.mode(2)};
UIL.Joystick.prototype.move=function(a){if(this.isDown){var b=this.radius-(a.clientX-this.rect.left);a=this.radius-(a.clientY-this.rect.top);Math.sqrt(b*b+a*a)>this.maxDistance&&(a=Math.atan2(b,a),b=Math.sin(a)*this.maxDistance,a=Math.cos(a)*this.maxDistance);this.x=b/this.maxDistance;this.y=a/this.maxDistance;this.update()}};
UIL.Joystick.prototype.update=function(a){void 0===a&&(a=!0);null!==this.interval&&(this.isDown||(this.x+=(0-this.x)/3,this.y+=(0-this.y)/3),this.x.toFixed(2)===this.oldx.toFixed(2)&&this.y.toFixed(2)===this.oldy.toFixed(2)&&(this.y=this.x=0));var b=this.radius-this.x*this.maxDistance,c=this.radius-this.y*this.maxDistance,d=b+5*(1-this.x)+5,e=c+5*(1-this.y)+10;this.value[0]=1*-(this.x*this.multiplicator).toFixed(this.precision);this.value[1]=1*(this.y*this.multiplicator).toFixed(this.precision);this.c[5].textContent=
"x"+this.value[0]+" y"+this.value[1];UIL.setSvg(this.c[3],"cx",d);UIL.setSvg(this.c[3],"cy",e);UIL.setSvg(this.c[4],"cx",b);UIL.setSvg(this.c[4],"cy",c);this.oldx=this.x;this.oldy=this.y;a&&this.callback(this.value);null!==this.interval&&0===this.x&&0===this.y&&(clearInterval(this.interval),this.interval=null)};
